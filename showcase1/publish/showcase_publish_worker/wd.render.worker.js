!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.wdrd=t():n.wdrd=t()}(self,function(){return function(n){var t={};function r(e){if(t[e])return t[e].exports;var i=t[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=n,r.c=t,r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)r.d(e,i,function(t){return n[t]}.bind(null,i));return e},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p="",r(r.s=11)}([function(n,t,r){"use strict";r.d(t,"a",function(){return u}),r.d(t,"c",function(){return i}),r.d(t,"b",function(){return o});var e=r(2);function i(n,t,r){for(var e=new Array(r),i=0,o=t;i<r;)e[i]=n[o],i=i+1|0,o=o+1|0;return e}function o(n,t){if(t<0||t>=n.length)throw[e.e,"index out of bounds"];return n[t]}function u(n){return n.slice(0)}},function(n,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"f",function(){return u}),r.d(t,"b",function(){return c}),r.d(t,"c",function(){return a}),r.d(t,"d",function(){return s}),r.d(t,"e",function(){return f});var e=r(0);function i(n,t){for(;;){var r=t,o=n,u=o.length,c=u-r.length|0;if(0===c)return o.apply(null,r);if(!(c<0))return function(n,t){return function(r){return i(n,t.concat([r]))}}(o,r);t=e.c(r,u,0|-c),n=o.apply(null,e.c(r,0,u))}}function o(n,t){var r=n.length;return 1===r?n(t):function(n,t,r){switch(r){case 1:return n(t);case 2:return function(r){return n(t,r)};case 3:return function(r,e){return n(t,r,e)};case 4:return function(r,e,i){return n(t,r,e,i)};case 5:return function(r,e,i,o){return n(t,r,e,i,o)};case 6:return function(r,e,i,o,u){return n(t,r,e,i,o,u)};case 7:return function(r,e,i,o,u,c){return n(t,r,e,i,o,u,c)};default:return i(n,[t])}}(n,t,r)}function u(n){return 1===n.length?n:function(t){return o(n,t)}}function c(n,t,r){var e=n.length;return 2===e?n(t,r):function(n,t,r,e){switch(e){case 1:return i(n(t),[r]);case 2:return n(t,r);case 3:return function(e){return n(t,r,e)};case 4:return function(e,i){return n(t,r,e,i)};case 5:return function(e,i,o){return n(t,r,e,i,o)};case 6:return function(e,i,o,u){return n(t,r,e,i,o,u)};case 7:return function(e,i,o,u,c){return n(t,r,e,i,o,u,c)};default:return i(n,[t,r])}}(n,t,r,e)}function a(n,t,r,e){var o=n.length;return 3===o?n(t,r,e):function(n,t,r,e,o){switch(o){case 1:return i(n(t),[r,e]);case 2:return i(n(t,r),[e]);case 3:return n(t,r,e);case 4:return function(i){return n(t,r,e,i)};case 5:return function(i,o){return n(t,r,e,i,o)};case 6:return function(i,o,u){return n(t,r,e,i,o,u)};case 7:return function(i,o,u,c){return n(t,r,e,i,o,u,c)};default:return i(n,[t,r,e])}}(n,t,r,e,o)}function s(n,t,r,e,o){var u=n.length;return 4===u?n(t,r,e,o):function(n,t,r,e,o,u){switch(u){case 1:return i(n(t),[r,e,o]);case 2:return i(n(t,r),[e,o]);case 3:return i(n(t,r,e),[o]);case 4:return n(t,r,e,o);case 5:return function(i){return n(t,r,e,o,i)};case 6:return function(i,u){return n(t,r,e,o,i,u)};case 7:return function(i,u,c){return n(t,r,e,o,i,u,c)};default:return i(n,[t,r,e,o])}}(n,t,r,e,o,u)}function f(n,t,r,e,o,u){var c=n.length;return 5===c?n(t,r,e,o,u):function(n,t,r,e,o,u,c){switch(c){case 1:return i(n(t),[r,e,o,u]);case 2:return i(n(t,r),[e,o,u]);case 3:return i(n(t,r,e),[o,u]);case 4:return i(n(t,r,e,o),[u]);case 5:return n(t,r,e,o,u);case 6:return function(i){return n(t,r,e,o,u,i)};case 7:return function(i,c){return n(t,r,e,o,u,i,c)};default:return i(n,[t,r,e,o,u])}}(n,t,r,e,o,u,c)}},function(n,t,r){"use strict";r.d(t,"d",function(){return e}),r.d(t,"e",function(){return i}),r.d(t,"c",function(){return o}),r.d(t,"b",function(){return u}),r.d(t,"g",function(){return c}),r.d(t,"f",function(){return a}),r.d(t,"a",function(){return s});var e=["Failure",-2],i=["Invalid_argument",-3],o=["End_of_file",-4],u=["Division_by_zero",-5],c=["Not_found",-6],a=["Match_failure",-7],s=["Assert_failure",-10];e.tag=248,i.tag=248,o.tag=248,u.tag=248,c.tag=248,a.tag=248,s.tag=248},function(n,t,r){"use strict";(function(n){r.d(t,"f",function(){return f}),r.d(t,"g",function(){return i}),r.d(t,"e",function(){return o}),r.d(t,"a",function(){return u}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return a}),r.d(t,"b",function(){return s});var e=r(1),i=["",function(t,r){var e=r.length-1|0;return void 0!==n&&n.stdout&&n.stdout.write?n.stdout.write(r):"\n"===r[e]?(console.log(r.slice(0,e)),0):(console.log(r),0)}],o=["",function(n,t){var r=t.length-1|0;return"\n"===t[r]?(console.log(t.slice(0,r)),0):(console.log(t),0)}];function u(n){return""!==n[0]?(e.b(n[1],n,n[0]),n[0]="",0):0}function c(t,r,e,o){var c=0===e&&o===r.length?r:r.slice(e,o);if(void 0!==n&&n.stdout&&n.stdout.write&&t===i)return n.stdout.write(c);var a=c.lastIndexOf("\n");return a<0?(t[0]=t[0]+c,0):(t[0]=t[0]+c.slice(0,a+1|0),u(t),t[0]=t[0]+c.slice(a+1|0),0)}function a(n,t){return c(n,String.fromCharCode(t),0,1)}function s(n){return[i,[o,0]]}var f=void 0}).call(this,r(6))},function(module,__webpack_exports__,__webpack_require__){"use strict";function serializeFunction(n){return n.toString()}function deserializeFunction(funcStr){return eval("("+funcStr+")")}function serializeValueWithFunction(n){return JSON.stringify(n,function(n,t){return"function"==typeof t?t.toString():t})}function deserializeValueWithFunction(value){return JSON.parse(value,(key,value)=>"string"!=typeof value?value:"function"==value.substring(0,8)?eval("("+value+")"):value)}__webpack_require__.d(__webpack_exports__,"c",function(){return serializeFunction}),__webpack_require__.d(__webpack_exports__,"a",function(){return deserializeFunction}),__webpack_require__.d(__webpack_exports__,"d",function(){return serializeValueWithFunction}),__webpack_require__.d(__webpack_exports__,"b",function(){return deserializeValueWithFunction})},function(n,t,r){"use strict";(function(n,e){var i,o=r(7);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:e;var u=Object(o.a)(i);t.a=u}).call(this,r(9),r(10)(n))},function(n,t){var r,e,i=n.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(n){if(r===setTimeout)return setTimeout(n,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(n,0);try{return r(n,0)}catch(t){try{return r.call(null,n,0)}catch(t){return r.call(this,n,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(n){r=o}try{e="function"==typeof clearTimeout?clearTimeout:u}catch(n){e=u}}();var a,s=[],f=!1,h=-1;function l(){f&&a&&(f=!1,a.length?s=a.concat(s):h=-1,s.length&&v())}function v(){if(!f){var n=c(l);f=!0;for(var t=s.length;t;){for(a=s,s=[];++h<t;)a&&a[h].run();h=-1,t=s.length}a=null,f=!1,function(n){if(e===clearTimeout)return clearTimeout(n);if((e===u||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(n);try{e(n)}catch(t){try{return e.call(null,n)}catch(t){return e.call(this,n)}}}(n)}}function p(n,t){this.fun=n,this.array=t}function d(){}i.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new p(n,t)),1!==s.length||f||c(v)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(n){return[]},i.binding=function(n){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(n){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(n,t,r){"use strict";function e(n){var t,r=n.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,"a",function(){return e})},function(n,t,r){"use strict";(function(n){r.d(t,"a",function(){return e});r(2);function e(t){return void 0!==n?n.exit(t):0}}).call(this,r(6))},function(n,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"==typeof window&&(r=window)}n.exports=r},function(n,t){n.exports=function(n){if(!n.webpackPolyfill){var t=Object.create(n);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(n,t,r){"use strict";r.r(t);var e=r(1);
/** @license MIT License (c) copyright 2010-2016 original author or authors */function i(n){this.source=n}function o(n,t){if(n<0)throw new TypeError("n must be >= 0");var r=t.length;return 0===n||0===r?t:n>=r?[]:function(n,t,r){for(var e=new Array(r),i=0;i<r;++i)e[i]=t[n+i];return e}(n,t,r-n)}function u(n){return o(1,n)}function c(n,t){for(var r=t.length,e=new Array(r),i=0;i<r;++i)e[i]=n(t[i]);return e}function a(n,t,r){if(t<0)throw new TypeError("i must be >= 0");for(var e=r.length,i=new Array(e),o=0;o<e;++o)i[o]=t===o?n:r[o];return i}function s(n,t){if(n<0)throw new TypeError("i must be >= 0");var r=t.length;return 0===r||n>=r?t:1===r?[]:function(n,t,r){var e=new Array(r),i=void 0;for(i=0;i<n;++i)e[i]=t[i];for(i=n;i<r;++i)e[i]=t[i+1];return e}(n,t,r-1)}function f(n,t){for(var r=0,e=t.length;r<e;++r)if(n===t[r])return r;return-1}i.prototype.run=function(n,t){return this.source.run(n,t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */;
/** @license MIT License (c) copyright 2010-2016 original author or authors */
var h=function(n){return n},l=function(n,t){return n(t)};
/** @license MIT License (c) copyright 2016 original author or authors */
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function v(n,t){this._dispose=n,this._data=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function p(){this.disposable=void 0,this.disposed=!1,this._resolve=void 0;var n=this;this.result=new Promise(function(t){n._resolve=t})}v.prototype.dispose=function(){return this._dispose(this._data)},p.prototype.setDisposable=function(n){if(void 0!==this.disposable)throw new Error("setDisposable called more than once");this.disposable=n,this.disposed&&this._resolve(n.dispose())},p.prototype.dispose=function(){return this.disposed?this.result:(this.disposed=!0,void 0!==this.disposable&&(this.result=this.disposable.dispose()),this.result)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */;
/** @license MIT License (c) copyright 2010-2016 original author or authors */
var d=c,_=h;function g(n,t,r){var e,i=b(t);return null!==(e=i)&&"object"==typeof e&&"function"==typeof e.then?i.catch(function(t){r.error(n,t)}):i}function y(n,t){return A(new v(n,t))}function m(){return new v(_,void 0)}function w(n){return y(E,n)}function E(n){return Promise.all(d(b,n))}function b(n){try{return n.dispose()}catch(n){return Promise.reject(n)}}function T(){return new p}function A(n){return new v(x,function(n){return{disposed:!1,disposable:n,value:void 0}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(n))}function x(n){return n.disposed||(n.disposed=!0,n.value=b(n.disposable),n.disposable=void 0),n.value}function S(n){setTimeout(function(){throw n},0)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function L(n,t,r){this._run=n,this.value=t,this.sink=r,this.active=!0}function D(n,t,r){r.error(n,t)}function R(n,t,r){r.event(n,t)}function k(n,t,r){r.end(n,t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function P(n){return new i(new M(n))}function M(n){this.value=n}function N(n,t,r){r.event(n,t),r.end(n,void 0)}function C(){return U}function I(){}function B(n){return n.dispose()}L.event=function(n,t){return new L(R,n,t)},L.end=function(n,t){return new L(k,n,t)},L.error=function(n,t){return new L(D,n,t)},L.prototype.dispose=function(){this.active=!1},L.prototype.run=function(n){this.active&&this._run(n,this.value,this.sink)},L.prototype.error=function(n,t){if(!this.active)return S(t);this.sink.error(n,t)},M.prototype.run=function(n,t){return t.asap(new L(N,this.value,n))},I.prototype.run=function(n,t){var r=L.end(void 0,n);return t.asap(r),y(B,r)};var U=new i(new I);function F(){}F.prototype.run=function(){return m()};var O;
/** @license MIT License (c) copyright 2010-2016 original author or authors */new i(new F);function Y(n){this.array=n}function G(n,t,r){for(var e=0,i=t.length;e<i&&this.active;++e)r.event(n,t[e]);this.active&&r.end(n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function H(n){this.iterable=n}function W(n,t,r){for(var e=t.next();!e.done&&this.active;)r.event(n,e.value),e=t.next();r.end(n,e.value)}Y.prototype.run=function(n,t){return t.asap(new L(G,this.array,n))},O="function"==typeof Set&&"function"==typeof(new Set)["@@iterator"]?"@@iterator":"function"==typeof Symbol?Symbol.iterator:"_es6shim_iterator_",H.prototype.run=function(n,t){return t.asap(new L(W,this.iterable[O](),n))};var V=r(5);
/** @license MIT License (c) copyright 2010-2016 original author or authors */
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function j(n,t,r){try{r.event(n,t)}catch(t){r.error(n,t)}}function z(n,t,r){try{r.end(n,t)}catch(t){r.error(n,t)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function q(n){this.observable=n}function X(n,t){this.sink=n,this.scheduler=t}function J(n){return n.unsubscribe()}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function K(n){if(n instanceof i)return n;var t,r=function(n){var t=null;if(n){var r=n[V.a];if("function"==typeof r&&(!(t=r.call(n))||"function"!=typeof t.subscribe))throw new TypeError("invalid observable "+t)}return t}(n);if(null!=r)return function(n){return new i(new q(n))}(r);if(Array.isArray(n)||null!=(t=n)&&"number"==typeof t.length&&"function"!=typeof t)return function(n){return new i(new Y(n))}(n);if("function"==typeof n[O])return new i(new H(n));throw new TypeError("from(x) must be observable, iterable, or array-like: "+n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function $(n,t){this.period=n,this.value=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Q(n,t,r,e){this.time=n,this.period=t,this.task=r,this.scheduler=e,this.active=!0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Z(n){return Promise.resolve(n).then(nn)}function nn(n){try{return n.run()}catch(t){return n.error(t)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function tn(n,t){this.timer=n,this.timeline=t,this._timer=null,this._nextArrival=1/0;var r=this;this._runReadyTasksBound=function(){r._runReadyTasks(r.now())}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function rn(){}function en(n){this.f=n,this.active=!0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function on(){this.tasks=[]}function un(n,t,r){for(var e=t.events,i=0;i<e.length;++i){var o=e[i];o.active&&(n(o),o.period>=0&&o.active&&(o.time=o.time+o.period,cn(o,r)))}return r}function cn(n,t){var r=t.length;if(0!==r){var e=sn(n.time,t);e>=r?t.push(fn(n.time,[n])):n.time===t[e].time?t[e].events.push(n):t.splice(e,0,fn(n.time,[n]))}else t.push(fn(n.time,[n]))}function an(n,t){t.events=function(n,t){for(var r,e=t.length,i=new Array(e),o=0,u=0;u<e;++u)n(r=t[u])||(i[o]=r,++o);return i.length=o,i}(n,t.events)}function sn(n,t){for(var r,e,i=0,o=t.length;i<o;){if(n===(e=t[r=Math.floor((i+o)/2)]).time)return r;n<e.time?o=r:i=r+1}return o}function fn(n,t){return{time:n,events:t}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */q.prototype.run=function(n,t){var r=this.observable.subscribe(new X(n,t));if("function"==typeof r)return y(r);if(r&&"function"==typeof r.unsubscribe)return y(J,r);throw new TypeError("Observable returned invalid subscription "+String(r))},X.prototype.next=function(n){j(this.scheduler.now(),n,this.sink)},X.prototype.complete=function(n){z(this.scheduler.now(),n,this.sink)},X.prototype.error=function(n){this.sink.error(this.scheduler.now(),n)},$.prototype.run=function(n,t){return t.periodic(this.period,L.event(this.value,n))},Q.prototype.run=function(){return this.task.run(this.time)},Q.prototype.error=function(n){return this.task.error(this.time,n)},Q.prototype.dispose=function(){return this.scheduler.cancel(this),this.task.dispose()},tn.prototype.now=function(){return this.timer.now()},tn.prototype.asap=function(n){return this.schedule(0,-1,n)},tn.prototype.delay=function(n,t){return this.schedule(n,-1,t)},tn.prototype.periodic=function(n,t){return this.schedule(0,n,t)},tn.prototype.schedule=function(n,t,r){var e=this.now(),i=new Q(e+Math.max(0,n),t,r,this);return this.timeline.add(i),this._scheduleNextRun(e),i},tn.prototype.cancel=function(n){n.active=!1,this.timeline.remove(n)&&this._reschedule()},tn.prototype.cancelAll=function(n){this.timeline.removeAll(n),this._reschedule()},tn.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun(this.now())},tn.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},tn.prototype._scheduleNextRun=function(n){if(!this.timeline.isEmpty()){var t=this.timeline.nextArrival();null===this._timer?this._scheduleNextArrival(t,n):t<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival(t,n))}},tn.prototype._scheduleNextArrival=function(n,t){this._nextArrival=n;var r=Math.max(0,n-t);this._timer=this.timer.setTimer(this._runReadyTasksBound,r)},tn.prototype._runReadyTasks=function(n){this._timer=null,this.timeline.runTasks(n,nn),this._scheduleNextRun(this.now())},rn.prototype.now=Date.now,rn.prototype.setTimer=function(n,t){return t<=0?function(n){var t=new en(n);return Z(t),t}(n):setTimeout(n,t)},rn.prototype.clearTimer=function(n){return n instanceof en?n.cancel():clearTimeout(n)},en.prototype.run=function(){return this.active&&this.f()},en.prototype.error=function(n){throw n},en.prototype.cancel=function(){this.active=!1},on.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},on.prototype.isEmpty=function(){return 0===this.tasks.length},on.prototype.add=function(n){cn(n,this.tasks)},on.prototype.remove=function(n){var t=sn(n.time,this.tasks);if(t>=0&&t<this.tasks.length){var r=f(n,this.tasks[t].events);if(r>=0)return this.tasks[t].events.splice(r,1),!0}return!1},on.prototype.removeAll=function(n){for(var t=0,r=this.tasks.length;t<r;++t)an(n,this.tasks[t])},on.prototype.runTasks=function(n,t){for(var r=this.tasks,e=r.length,i=0;i<e&&r[i].time<=n;)++i;this.tasks=r.slice(i);for(var o=0;o<i;++o)this.tasks=un(t,r[o],this.tasks)};var hn=new tn(new rn,new on);function ln(n,t,r){this.fatalError=n,this.subscriber=t,this.disposable=r}function vn(n){this.disposable=n}function pn(n,t,r){if("function"==typeof t.error)try{t.error(n)}catch(n){r(n)}else r(n)}
/** @license MIT License (c) copyright 2010-2017 original author or authors */
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function dn(n,t,r){this.event=n,this.source=t,this.capture=r}function _n(n){var t=n.target;t.source.removeEventListener(t.event,n.addEvent,t.capture)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function gn(n){this.sink=n,this.events=[],this.active=!0}function yn(n,t,r){this.sink=n,this.events=r,this.time=t}function mn(n,t,r){this.time=n,this.value=t,this.sink=r}function wn(n,t,r){this.time=n,this.value=t,this.sink=r}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function En(n,t){this.event=n,this.source=t}function bn(n){var t=n.target;t.source.removeListener(t.event,n.addEvent)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Tn(n,t,r){var e;if("function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener)arguments.length<3&&(r=!1),e=new dn(n,t,r);else{if("function"!=typeof t.addListener||"function"!=typeof t.removeListener)throw new Error("source must support addEventListener/removeEventListener or addListener/removeListener");e=new En(n,t)}return new i(e)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function An(n){return function(n,t){return new Promise(function(r,e){!function(n,t,r,e){var i=T(),o=new xn(r,e,i);i.setDisposable(n.run(o,t))}(n,t,r,e)})}(n,hn)}function xn(n,t,r){this._end=n,this._error=t,this._disposable=r,this.active=!0}function Sn(n,t,r,e){Promise.resolve(r.dispose()).then(function(){n(e)},t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Ln(n){this.sink=n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Dn(n,t){this.p=n,this.source=t}function Rn(n,t){this.p=n,this.sink=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function kn(n,t,r){this.p=n,this.f=t,this.source=r}function Pn(n,t,r){this.p=n,this.f=t,this.sink=r}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Mn(n,t){this.f=n,this.source=t}function Nn(n,t){this.f=n,this.sink=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Cn(n,t){return new i(Mn.create(n,t.source))}function In(n,t){return new i(new Bn(n,t.source))}function Bn(n,t){this.source=t,this.f=n}function Un(n,t){this.sink=t,this.f=n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Fn(n,t){return On(In(n,t))}function On(n){return An(n.source)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Yn(n,t,r){this.step=n,this.seed=t,this.source=r}function Gn(n,t,r){this.step=n,this.seed=t,this.sink=r}function Hn(n,t,r){this.source=r,this.f=n,this.value=t}function Wn(n,t,r){this.f=n,this.value=t,this.sink=r}function Vn(n,t,r){return An(new jn(n,t,r.source))}function jn(n,t,r){this.source=r,this.f=n,this.value=t}function zn(n,t,r){this.f=n,this.value=t,this.sink=r}function qn(n,t){this.f=n,this.value=t}function Xn(n,t,r,e){this.f=n,this.sink=r,this.scheduler=e,this.active=!0;var i=this;Promise.resolve(this).then(function(n){return Jn(n,t)}).catch(function(n){i.sink.error(i.scheduler.now(),n)})}function Jn(n,t){var r=n.f;return Promise.resolve(r(t)).then(function(t){return function(n,t){if(t.done)return n.sink.end(n.scheduler.now(),t.value),t.value;if(n.sink.event(n.scheduler.now(),t.value),!n.active)return t.value;return Jn(n,t.seed)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(n,t)})}function Kn(n,t){this.f=n,this.value=t}function $n(n,t,r,e){this.f=n,this.sink=r,this.scheduler=e,this.active=!0;var i=t,o=this;Promise.resolve(this).then(function(n){return Qn(n,i)}).catch(function(n){o.sink.error(o.scheduler.now(),n)})}function Qn(n,t){if(n.sink.event(n.scheduler.now(),t),!n.active)return t;var r=n.f;return Promise.resolve(r(t)).then(function(t){return function(n,t){return n.active?Qn(n,t):n.value}
/** @license MIT License (c) copyright 2010-2014 original author or authors */(n,t)})}function Zn(n,t){this.f=n,this.args=t}function nt(n,t,r){this.iterator=n,this.sink=t,this.scheduler=r,this.active=!0;var e=this;Promise.resolve(this).then(tt).catch(function(n){e.sink.error(e.scheduler.now(),n)})}function tt(n,t){return n.active?rt(n,n.iterator.next(t)):t}function rt(n,t){return t.done?n.sink.end(n.scheduler.now(),t.value):Promise.resolve(t.value).then(function(t){return function(n,t){return n.sink.event(n.scheduler.now(),t),tt(n,t)}(n,t)},function(t){return function(n,t){return rt(n,n.iterator.throw(t))}(n,t)})}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function et(n,t){return new i(new it(n,t.source))}function it(n,t){this.f=n,this.source=t}function ot(n,t,r,e){this.f=n,this.sink=r,this.scheduler=e,this.active=!0,this.disposable=A(t.run(this,e))}function ut(n,t){return et(function(){return t},n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function ct(n,t){this.sink=t,this.index=n,this.active=!0,this.value=void 0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function at(n,t){switch(t.length){case 0:return n();case 1:return n(t[0]);case 2:return n(t[0],t[1]);case 3:return n(t[0],t[1],t[2]);case 4:return n(t[0],t[1],t[2],t[3]);case 5:return n(t[0],t[1],t[2],t[3],t[4]);default:return n.apply(void 0,t)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */ln.prototype.event=function(n,t){this.disposable.disposed||"function"!=typeof this.subscriber.next||this.subscriber.next(t)},ln.prototype.end=function(n,t){if(!this.disposable.disposed){var r=this.subscriber,e=this.fatalError;Promise.resolve(this.disposable.dispose()).then(function(){"function"==typeof r.complete&&r.complete(t)}).catch(function(n){pn(n,r,e)})}},ln.prototype.error=function(n,t){var r=this.subscriber,e=this.fatalError;Promise.resolve(this.disposable.dispose()).then(function(){pn(t,r,e)})},vn.prototype.unsubscribe=function(){this.disposable.dispose()},dn.prototype.run=function(n,t){function r(r){j(t.now(),r,n)}return this.source.addEventListener(this.event,r,this.capture),y(_n,{target:this,addEvent:r})},gn.prototype.event=function(n,t){this.active&&(0===this.events.length&&Z(new yn(this.sink,n,this.events)),this.events.push({time:n,value:t}))},gn.prototype.end=function(n,t){this.active&&this._end(new mn(n,t,this.sink))},gn.prototype.error=function(n,t){this._end(new wn(n,t,this.sink))},gn.prototype._end=function(n){this.active=!1,Z(n)},yn.prototype.run=function(){for(var n,t=this.events,r=this.sink,e=0,i=t.length;e<i;++e)n=t[e],this.time=n.time,r.event(n.time,n.value);t.length=0},yn.prototype.error=function(n){this.sink.error(this.time,n)},mn.prototype.run=function(){this.sink.end(this.time,this.value)},mn.prototype.error=function(n){this.sink.error(this.time,n)},wn.prototype.run=function(){this.sink.error(this.time,this.value)},wn.prototype.error=function(n){throw n},En.prototype.run=function(n,t){var r=new gn(n);function e(n){var e=arguments.length;if(e>1){for(var i=new Array(e),o=0;o<e;++o)i[o]=arguments[o];j(t.now(),i,r)}else j(t.now(),n,r)}return this.source.addListener(this.event,e),y(bn,{target:this,addEvent:e})},xn.prototype.event=function(n,t){},xn.prototype.end=function(n,t){this.active&&(this.active=!1,Sn(this._end,this._error,this._disposable,t))},xn.prototype.error=function(n,t){this.active=!1,Sn(this._error,this._error,this._disposable,t)},Ln.prototype.event=function(n,t){return this.sink.event(n,t)},Ln.prototype.end=function(n,t){return this.sink.end(n,t)},Ln.prototype.error=function(n,t){return this.sink.error(n,t)},Dn.create=function(n,t){return t instanceof Dn?new Dn(function(n,t){return function(r){return n(r)&&t(r)}}(t.p,n),t.source):new Dn(n,t)},Dn.prototype.run=function(n,t){return this.source.run(new Rn(this.p,n),t)},Rn.prototype.end=Ln.prototype.end,Rn.prototype.error=Ln.prototype.error,Rn.prototype.event=function(n,t){(0,this.p)(t)&&this.sink.event(n,t)},kn.prototype.run=function(n,t){return this.source.run(new Pn(this.p,this.f,n),t)},Pn.prototype.event=function(n,t){var r=this.f;(0,this.p)(t)&&this.sink.event(n,r(t))},Pn.prototype.end=Ln.prototype.end,Pn.prototype.error=Ln.prototype.error,Mn.create=function(n,t){return t instanceof Mn?new Mn(function(n,t){return function(r){return n(t(r))}}(n,t.f),t.source):t instanceof Dn?new kn(t.p,n,t.source):new Mn(n,t)},Mn.prototype.run=function(n,t){return this.source.run(new Nn(this.f,n),t)},Nn.prototype.end=Ln.prototype.end,Nn.prototype.error=Ln.prototype.error,Nn.prototype.event=function(n,t){var r=this.f;this.sink.event(n,r(t))},Bn.prototype.run=function(n,t){return this.source.run(new Un(this.f,n),t)},Un.prototype.end=Ln.prototype.end,Un.prototype.error=Ln.prototype.error,Un.prototype.event=function(n,t){(0,this.f)(t),this.sink.event(n,t)},Yn.prototype.run=function(n,t){return this.source.run(new Gn(this.step,this.seed,n),t)},Gn.prototype.error=Ln.prototype.error,Gn.prototype.event=function(n,t){var r=this.step(this.seed,t);this.seed=r.seed,this.sink.event(n,r.value)},Gn.prototype.end=function(n){this.sink.end(n,this.seed)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,Hn.prototype.run=function(n,t){return w([t.asap(L.event(this.value,n)),this.source.run(new Wn(this.f,this.value,n),t)])},Wn.prototype.event=function(n,t){var r=this.f;this.value=r(this.value,t),this.sink.event(n,this.value)},Wn.prototype.error=Ln.prototype.error,Wn.prototype.end=Ln.prototype.end,jn.prototype.run=function(n,t){return this.source.run(new zn(this.f,this.value,n),t)},zn.prototype.event=function(n,t){var r=this.f;this.value=r(this.value,t),this.sink.event(n,this.value)},zn.prototype.error=Ln.prototype.error,zn.prototype.end=function(n){this.sink.end(n,this.value)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,qn.prototype.run=function(n,t){return new Xn(this.f,this.value,n,t)},Xn.prototype.dispose=function(){this.active=!1},Kn.prototype.run=function(n,t){return new $n(this.f,this.value,n,t)},$n.prototype.dispose=function(){this.active=!1},Zn.prototype.run=function(n,t){return new nt(this.f.apply(void 0,this.args),n,t)},nt.prototype.dispose=function(){this.active=!1},it.prototype.run=function(n,t){return new ot(this.f,this.source,n,t)},ot.prototype.error=Ln.prototype.error,ot.prototype.event=function(n,t){this.active&&this.sink.event(n,t)},ot.prototype.end=function(n,t){this.active&&(g(n,this.disposable,this.sink),this._startNext(n,t,this.sink))},ot.prototype._startNext=function(n,t,r){try{this.disposable=this._continue(this.f,t,r)}catch(t){r.error(n,t)}},ot.prototype._continue=function(n,t,r){return n(t).source.run(r,this.scheduler)},ot.prototype.dispose=function(){return this.active=!1,this.disposable.dispose()}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,ct.prototype.event=function(n,t){this.active&&(this.value=t,this.sink.event(n,this))},ct.prototype.end=function(n,t){this.active&&(this.active=!1,this.sink.end(n,{index:this.index,value:t}))},ct.prototype.error=Ln.prototype.error;var st=c,ft=u;function ht(n,t){var r=t.length;return 0===r?C():1===r?Cn(n,t[0]):new i(function(n,t){return new vt(n,st(lt,t))}(n,t))}function lt(n){return n.source}function vt(n,t){this.f=n,this.sources=t}function pt(n,t,r,e){this.sink=r,this.disposables=n,this.sinks=t,this.f=e;var i=t.length;this.awaiting=i,this.values=new Array(i),this.hasValue=new Array(i);for(var o=0;o<i;++o)this.hasValue[o]=!1;this.activeCount=t.length}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function dt(n,t){return function(n){return ht(n,ft(arguments))}(l,n,t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function _t(n,t){this.transducer=n,this.source=t}function gt(n,t){this.xf=n,this.sink=t}function yt(n){this.time=-1/0,this.sink=n}function mt(n){this.tx=n}function wt(n){this.tx=n}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Et(){this.head=null,this.length=0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function bt(n,t){return Tt(h,n,t)}function Tt(n,t,r){return new i(new At(n,t,r.source))}function At(n,t,r){this.f=n,this.concurrency=t,this.source=r}function xt(n,t,r,e,i){this.f=n,this.concurrency=t,this.sink=e,this.scheduler=i,this.pending=[],this.current=new Et,this.disposable=A(r.run(this,i)),this.active=!0}function St(n,t,r){this.prev=this.next=null,this.time=n,this.outer=t,this.sink=r,this.disposable=void 0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Lt(n,t){return Tt(n,1/0,t)}function Dt(n){return bt(1/0,n)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Rt(n,t){return Tt(n,1,t)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */vt.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e),o=new Array(e),u=new pt(i,o,n,this.f),c=0;c<e;++c)r=o[c]=new ct(c,u),i[c]=this.sources[c].run(r,t);return w(i)},pt.prototype.error=Ln.prototype.error,pt.prototype.event=function(n,t){var r=t.index,e=this._updateReady(r);this.values[r]=t.value,0===e&&this.sink.event(n,at(this.f,this.values))},pt.prototype._updateReady=function(n){return this.awaiting>0&&(this.hasValue[n]||(this.hasValue[n]=!0,this.awaiting-=1)),this.awaiting},pt.prototype.end=function(n,t){g(n,this.disposables[t.index],this.sink),0==--this.activeCount&&this.sink.end(n,t.value)},_t.prototype.run=function(n,t){var r,e=this.transducer(new yt(n));return this.source.run(new gt("function"==typeof(r=e)["@@transducer/step"]?new mt(r):new wt(r),n),t)},gt.prototype.event=function(n,t){var r=this.xf.step(n,t);return this.xf.isReduced(r)?this.sink.end(n,this.xf.getResult(r)):r},gt.prototype.end=function(n,t){return this.xf.result(t)},gt.prototype.error=function(n,t){return this.sink.error(n,t)},yt.prototype["@@transducer/init"]=yt.prototype.init=function(){},yt.prototype["@@transducer/step"]=yt.prototype.step=function(n,t){return isNaN(n)||(this.time=Math.max(n,this.time)),this.sink.event(this.time,t)},yt.prototype["@@transducer/result"]=yt.prototype.result=function(n){return this.sink.end(this.time,n)},mt.prototype.step=function(n,t){return this.tx["@@transducer/step"](n,t)},mt.prototype.result=function(n){return this.tx["@@transducer/result"](n)},mt.prototype.isReduced=function(n){return null!=n&&n["@@transducer/reduced"]},mt.prototype.getResult=function(n){return n["@@transducer/value"]},wt.prototype.step=function(n,t){return this.tx.step(n,t)},wt.prototype.result=function(n){return this.tx.result(n)},wt.prototype.isReduced=function(n){return null!=n&&n.__transducers_reduced__},wt.prototype.getResult=function(n){return n.value},Et.prototype.add=function(n){null!==this.head&&(this.head.prev=n,n.next=this.head),this.head=n,++this.length},Et.prototype.remove=function(n){--this.length,n===this.head&&(this.head=this.head.next),null!==n.next&&(n.next.prev=n.prev,n.next=null),null!==n.prev&&(n.prev.next=n.next,n.prev=null)},Et.prototype.isEmpty=function(){return 0===this.length},Et.prototype.dispose=function(){if(this.isEmpty())return Promise.resolve();var n=[],t=this.head;for(this.head=null,this.length=0;null!==t;)n.push(t.dispose()),t=t.next;return Promise.all(n)},At.prototype.run=function(n,t){return new xt(this.f,this.concurrency,this.source,n,t)},xt.prototype.event=function(n,t){this._addInner(n,t)},xt.prototype._addInner=function(n,t){this.current.length<this.concurrency?this._startInner(n,t):this.pending.push(t)},xt.prototype._startInner=function(n,t){try{this._initInner(n,t)}catch(t){this.error(n,t)}},xt.prototype._initInner=function(n,t){var r=new St(n,this,this.sink);r.disposable=function(n,t,r,e){return n(t).source.run(r,e)}(this.f,t,r,this.scheduler),this.current.add(r)},xt.prototype.end=function(n,t){this.active=!1,g(n,this.disposable,this.sink),this._checkEnd(n,t)},xt.prototype.error=function(n,t){this.active=!1,this.sink.error(n,t)},xt.prototype.dispose=function(){return this.active=!1,this.pending.length=0,Promise.all([this.disposable.dispose(),this.current.dispose()])},xt.prototype._endInner=function(n,t,r){this.current.remove(r),g(n,r,this),0===this.pending.length?this._checkEnd(n,t):this._startInner(n,this.pending.shift())},xt.prototype._checkEnd=function(n,t){!this.active&&this.current.isEmpty()&&this.sink.end(n,t)},St.prototype.event=function(n,t){this.sink.event(Math.max(n,this.time),t)},St.prototype.end=function(n,t){this.outer._endInner(Math.max(n,this.time),t,this)},St.prototype.error=function(n,t){this.outer.error(Math.max(n,this.time),t)},St.prototype.dispose=function(){return this.disposable.dispose()};var kt=function(n,t,r){for(var e=t,i=0,o=r.length;i<o;++i)e=n(e,r[i],i);return e};function Pt(n){var t=n.length;return 0===t?C():1===t?n[0]:new i(function(n){return new Nt(kt(Mt,[],n))}(n))}function Mt(n,t){var r=t.source;return r instanceof Nt?n.concat(r.sources):n.concat(r)}function Nt(n){this.sources=n}function Ct(n,t,r){this.sink=r,this.disposables=n,this.activeCount=t.length}function It(n,t,r){return new i(new Ut(n,t.source,c(Bt,r)))}function Bt(n){return n.source}function Ut(n,t,r){this.f=n,this.sampler=t,this.sources=r}function Ft(n){this.sink=n,this.hasValue=!1}function Ot(n,t,r){this.f=n,this.sinks=t,this.sink=r,this.active=!1}function Yt(n){return n.hasValue}function Gt(n){return n.value}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Ht(n){this._capacity=n||32,this._length=0,this._head=0}Nt.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e),o=new Array(e),u=new Ct(i,o,n),c=0;c<e;++c)r=o[c]=new ct(c,u),i[c]=this.sources[c].run(r,t);return w(i)},Ct.prototype.error=Ln.prototype.error,Ct.prototype.event=function(n,t){this.sink.event(n,t.value)},Ct.prototype.end=function(n,t){g(n,this.disposables[t.index],this.sink),0==--this.activeCount&&this.sink.end(n,t.value)}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,Ut.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e+1),o=new Array(e),u=new Ot(this.f,o,n),c=0;c<e;++c)r=o[c]=new Ft(u),i[c]=this.sources[c].run(r,t);return i[c]=this.sampler.run(u,t),w(i)},Ft.prototype.event=function(n,t){this.value=t,this.hasValue=!0,this.sink._notify(this)},Ft.prototype.end=function(){},Ft.prototype.error=Ln.prototype.error,Ot.prototype._notify=function(){this.active||(this.active=this.sinks.every(Yt))},Ot.prototype.event=function(n){this.active&&this.sink.event(n,at(this.f,c(Gt,this.sinks)))},Ot.prototype.end=Ln.prototype.end,Ot.prototype.error=Ln.prototype.error,Ht.prototype.push=function(n){var t=this._length;this._checkCapacity(t+1),this[this._head+t&this._capacity-1]=n,this._length=t+1},Ht.prototype.shift=function(){var n=this._head,t=this[n];return this[n]=void 0,this._head=n+1&this._capacity-1,this._length--,t},Ht.prototype.isEmpty=function(){return 0===this._length},Ht.prototype.length=function(){return this._length},Ht.prototype._checkCapacity=function(n){this._capacity<n&&this._ensureCapacity(this._capacity<<1)},Ht.prototype._ensureCapacity=function(n){var t=this._capacity;this._capacity=n;var r=this._head+this._length;r>t&&function(n,t,r,e,i){for(var o=0;o<i;++o)r[o+e]=n[o+t],n[o+t]=void 0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(this,0,this,t,r&t-1)};var Wt=c;function Vt(n,t){return 0===t.length?C():1===t.length?Cn(n,t[0]):new i(new zt(n,Wt(jt,t)))}function jt(n){return n.source}function zt(n,t){this.f=n,this.sources=t}function qt(n,t,r,e){this.f=n,this.sinks=r,this.sink=e,this.buffers=t}function Xt(n){return n.shift()}function Jt(n){this.source=n}function Kt(n,t){this.sink=n,this.scheduler=t,this.current=null,this.ended=!1}function $t(n,t,r,e){this.min=n,this.max=t,this.outer=r,this.sink=e,this.disposable=m()}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Qt(n,t){return new i(Dn.create(n,t.source))}function Zt(n,t){return new i(new nr(n,t.source))}function nr(n,t){this.equals=n,this.source=t}function tr(n,t){this.equals=n,this.sink=t,this.value=void 0,this.init=!0}function rr(n,t){return n===t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function er(n,t){return ir(0,n,t)}function ir(n,t,r){return t<=n?C():new i(or(n,t,r.source))}function or(n,t,r){return r instanceof Mn?function(n,t,r){return Mn.create(r.f,or(n,t,r.source))}(n,t,r):r instanceof ur?function(n,t,r){return n+=r.min,t=Math.min(t+r.min,r.max),new ur(n,t,r.source)}(n,t,r):new ur(n,t,r)}function ur(n,t,r){this.source=r,this.min=n,this.max=t}function cr(n,t,r,e){this.sink=r,this.skip=n,this.take=t,this.disposable=e}function ar(n,t){this.p=n,this.source=t}function sr(n,t,r){this.p=n,this.sink=t,this.active=!0,this.disposable=r}function fr(n,t){this.p=n,this.source=t}function hr(n,t){this.p=n,this.sink=t,this.skipping=!0}function lr(n,t){this.p=n,this.source=t}function vr(n,t){this.p=n,this.sink=t,this.skipping=!1}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function pr(n,t){return new i(new _r(n.source,t.source))}function dr(n,t){return new i(new gr(n.source,t.source))}function _r(n,t){this.maxSignal=n,this.source=t}function gr(n,t){this.minSignal=n,this.source=t}function yr(n,t){this.value=n,this.sink=t}function mr(n,t,r){this.min=n,this.max=t,this.sink=r}function wr(n,t,r){this.value=1/0,this.sink=t,this.disposable=n.run(this,r)}function Er(n,t,r){this.value=1/0,this.sink=t,this.disposable=n.run(this,r)}function br(){}
/** @license MIT License (c) copyright 2010-2016 original author or authors */function Tr(n,t){this.dt=n,this.source=t}function Ar(n,t,r){this.dt=n,this.sink=t,this.scheduler=r}function xr(n){this.source=n}function Sr(n){this.sink=n}function Lr(n,t){return t instanceof Mn?function(n,t){return Mn.create(t.f,Lr(n,t.source))}(n,t):t instanceof Dr?function(n,t){return new Dr(Math.max(n,t.period),t.source)}(n,t):new Dr(n,t)}function Dr(n,t){this.period=n,this.source=t}function Rr(n,t){this.time=0,this.period=n,this.sink=t}function kr(n,t){this.dt=n,this.source=t}function Pr(n,t,r,e){this.dt=n,this.sink=r,this.scheduler=e,this.value=void 0,this.timer=null,this.disposable=t.run(this,e)}function Mr(n,t){this.debounce=n,this.value=t}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Nr(n){return Cr(P(n))}function Cr(n){return new i(new Ir(n.source))}function Ir(n){this.source=n}function Br(n,t){this.sink=n,this.scheduler=t,this.queue=Promise.resolve();var r=this;this._eventBound=function(n){r.sink.event(r.scheduler.now(),n)},this._endBound=function(n){r.sink.end(r.scheduler.now(),n)},this._errorBound=function(n){r.sink.error(r.scheduler.now(),n)}}
/** @license MIT License (c) copyright 2010-2016 original author or authors */
function Ur(n){this.sink=n,this.active=!0}zt.prototype.run=function(n,t){for(var r,e=this.sources.length,i=new Array(e),o=new Array(e),u=new Array(e),c=new qt(this.f,u,o,n),a=0;a<e;++a)u[a]=new Ht,r=o[a]=new ct(a,c),i[a]=this.sources[a].run(r,t);return w(i)},qt.prototype.event=function(n,t){var r=this.buffers,e=r[t.index];if(e.push(t.value),1===e.length()){if(!function(n){for(var t=0,r=n.length;t<r;++t)if(n[t].isEmpty())return!1;return!0}
/** @license MIT License (c) copyright 2010-2016 original author or authors */(this.buffers))return;!function(n,t,r,e){e.event(t,at(n,Wt(Xt,r)))}(this.f,n,r,this.sink),function(n,t){for(var r=0,e=n.length;r<e;++r)if(n[r].isEmpty()&&!t[r].active)return!0;return!1}(this.buffers,this.sinks)&&this.sink.end(n,void 0)}},qt.prototype.end=function(n,t){this.buffers[t.index].isEmpty()&&this.sink.end(n,t.value)},qt.prototype.error=Ln.prototype.error,Jt.prototype.run=function(n,t){var r=new Kt(n,t);return w([r,this.source.run(r,t)])},Kt.prototype.event=function(n,t){this._disposeCurrent(n),this.current=new $t(n,1/0,this,this.sink),this.current.disposable=t.source.run(this.current,this.scheduler)},Kt.prototype.end=function(n,t){this.ended=!0,this._checkEnd(n,t)},Kt.prototype.error=function(n,t){this.ended=!0,this.sink.error(n,t)},Kt.prototype.dispose=function(){return this._disposeCurrent(this.scheduler.now())},Kt.prototype._disposeCurrent=function(n){if(null!==this.current)return this.current._dispose(n)},Kt.prototype._disposeInner=function(n,t){t._dispose(n),t===this.current&&(this.current=null)},Kt.prototype._checkEnd=function(n,t){this.ended&&null===this.current&&this.sink.end(n,t)},Kt.prototype._endInner=function(n,t,r){this._disposeInner(n,r),this._checkEnd(n,t)},Kt.prototype._errorInner=function(n,t,r){this._disposeInner(n,r),this.sink.error(n,t)},$t.prototype.event=function(n,t){n<this.max&&this.sink.event(Math.max(n,this.min),t)},$t.prototype.end=function(n,t){this.outer._endInner(Math.max(n,this.min),t,this)},$t.prototype.error=function(n,t){this.outer._errorInner(Math.max(n,this.min),t,this)},$t.prototype._dispose=function(n){this.max=n,g(n,this.disposable,this.sink)},nr.prototype.run=function(n,t){return this.source.run(new tr(this.equals,n),t)},tr.prototype.end=Ln.prototype.end,tr.prototype.error=Ln.prototype.error,tr.prototype.event=function(n,t){this.init?(this.init=!1,this.value=t,this.sink.event(n,t)):this.equals(this.value,t)||(this.value=t,this.sink.event(n,t))},ur.prototype.run=function(n,t){var r=T(),e=new cr(this.min,this.max-this.min,n,r);return r.setDisposable(this.source.run(e,t)),r},cr.prototype.end=Ln.prototype.end,cr.prototype.error=Ln.prototype.error,cr.prototype.event=function(n,t){this.skip>0?this.skip-=1:0!==this.take&&(this.take-=1,this.sink.event(n,t),0===this.take&&(this.disposable.dispose(),this.sink.end(n,t)))},ar.prototype.run=function(n,t){var r=T(),e=new sr(this.p,n,r);return r.setDisposable(this.source.run(e,t)),r},sr.prototype.end=Ln.prototype.end,sr.prototype.error=Ln.prototype.error,sr.prototype.event=function(n,t){if(this.active){var r=this.p;this.active=r(t),this.active?this.sink.event(n,t):(this.disposable.dispose(),this.sink.end(n,t))}},fr.prototype.run=function(n,t){return this.source.run(new hr(this.p,n),t)},hr.prototype.end=Ln.prototype.end,hr.prototype.error=Ln.prototype.error,hr.prototype.event=function(n,t){if(this.skipping){var r=this.p;if(this.skipping=r(t),this.skipping)return}this.sink.event(n,t)},lr.prototype.run=function(n,t){return this.source.run(new vr(this.p,n),t)},vr.prototype.event=function(n,t){if(!this.skipping){var r=this.p;this.skipping=r(t),this.sink.event(n,t),this.skipping&&this.sink.end(n,t)}},vr.prototype.end=Ln.prototype.end,vr.prototype.error=Ln.prototype.error,_r.prototype.run=function(n,t){var r=new yr(-1/0,n),e=new Er(this.maxSignal,n,t);return w([r,e,this.source.run(new mr(r,e,n),t)])},gr.prototype.run=function(n,t){var r=new wr(this.minSignal,n,t),e=new yr(1/0,n);return w([r,e,this.source.run(new mr(r,e,n),t)])},yr.prototype.error=Ln.prototype.error,yr.prototype.event=br,yr.prototype.end=br,yr.prototype.dispose=br,mr.prototype.event=function(n,t){n>=this.min.value&&n<this.max.value&&this.sink.event(n,t)},mr.prototype.error=Ln.prototype.error,mr.prototype.end=Ln.prototype.end,wr.prototype.event=function(n){n<this.value&&(this.value=n)},wr.prototype.end=br,wr.prototype.error=Ln.prototype.error,wr.prototype.dispose=function(){return this.disposable.dispose()},Er.prototype.event=function(n,t){n<this.value&&(this.value=n,this.sink.end(n,t))},Er.prototype.end=br,Er.prototype.error=Ln.prototype.error,Er.prototype.dispose=function(){return this.disposable.dispose()},Tr.prototype.run=function(n,t){var r=new Ar(this.dt,n,t);return w([r,this.source.run(r,t)])},Ar.prototype.dispose=function(){var n=this;this.scheduler.cancelAll(function(t){return t.task.sink===n.sink})},Ar.prototype.event=function(n,t){this.scheduler.delay(this.dt,L.event(t,this.sink))},Ar.prototype.end=function(n,t){this.scheduler.delay(this.dt,L.end(t,this.sink))},Ar.prototype.error=Ln.prototype.error,xr.prototype.run=function(n,t){return this.source.run(new Sr(n),t)},Sr.prototype.end=Ln.prototype.end,Sr.prototype.error=Ln.prototype.error,Sr.prototype.event=function(n,t){this.sink.event(n,{time:n,value:t})}
/** @license MIT License (c) copyright 2010-2016 original author or authors */,Dr.prototype.run=function(n,t){return this.source.run(new Rr(this.period,n),t)},Rr.prototype.event=function(n,t){n>=this.time&&(this.time=n+this.period,this.sink.event(n,t))},Rr.prototype.end=Ln.prototype.end,Rr.prototype.error=Ln.prototype.error,kr.prototype.run=function(n,t){return new Pr(this.dt,this.source,n,t)},Pr.prototype.event=function(n,t){this._clearTimer(),this.value=t,this.timer=this.scheduler.delay(this.dt,new Mr(this,t))},Pr.prototype._event=function(n,t){this._clearTimer(),this.sink.event(n,t)},Pr.prototype.end=function(n,t){this._clearTimer()&&(this.sink.event(n,this.value),this.value=void 0),this.sink.end(n,t)},Pr.prototype.error=function(n,t){this._clearTimer(),this.sink.error(n,t)},Pr.prototype.dispose=function(){return this._clearTimer(),this.disposable.dispose()},Pr.prototype._clearTimer=function(){return null!==this.timer&&(this.timer.dispose(),this.timer=null,!0)},Mr.prototype.run=function(n){this.debounce._event(n,this.value)},Mr.prototype.error=function(n,t){this.debounce.error(n,t)},Mr.prototype.dispose=function(){},Ir.prototype.run=function(n,t){return this.source.run(new Br(n,t),t)},Br.prototype.event=function(n,t){var r=this;this.queue=this.queue.then(function(){return r._event(t)}).catch(this._errorBound)},Br.prototype.end=function(n,t){var r=this;this.queue=this.queue.then(function(){return r._end(t)}).catch(this._errorBound)},Br.prototype.error=function(n,t){var r=this;this.queue=this.queue.then(function(){return r._errorBound(t)}).catch(S)},Br.prototype._event=function(n){return n.then(this._eventBound)},Br.prototype._end=function(n){return Promise.resolve(n).then(this._endBound)},Ur.prototype.event=function(n,t){this.active&&this.sink.event(n,t)},Ur.prototype.end=function(n,t){this.active&&(this.disable(),this.sink.end(n,t))},Ur.prototype.error=function(n,t){this.disable(),this.sink.error(n,t)},Ur.prototype.disable=function(){return this.active=!1,this.sink}
/** @license MIT License (c) copyright 2010-2016 original author or authors */;var Fr=function(n,t){return new i(new Gr(n,t.source))};function Or(n){this.value=n}function Yr(n,t,r){r.error(n,t)}function Gr(n,t){this.f=n,this.source=t}function Hr(n,t,r,e){this.f=n,this.sink=new Ur(r),this.scheduler=e,this.disposable=t.run(this,e)}Or.prototype.run=function(n,t){return t.asap(new L(Yr,this.value,n))},Gr.prototype.run=function(n,t){return new Hr(this.f,this.source,n,t)},Hr.prototype.event=function(n,t){j(n,t,this.sink)},Hr.prototype.end=function(n,t){z(n,t,this.sink)},Hr.prototype.error=function(n,t){var r=this.sink.disable();g(n,this.disposable,this.sink),this._startNext(n,t,r)},Hr.prototype._startNext=function(n,t,r){try{this.disposable=this._continue(this.f,t,r)}catch(t){r.error(n,t)}},Hr.prototype._continue=function(n,t,r){return n(t).source.run(r,this.scheduler)},Hr.prototype.dispose=function(){return this.disposable.dispose()};var Wr=function(n,t){this.source=n,this.sink=t,this.disposed=!1};function Vr(n,t,r){try{r.event(n,t)}catch(t){r.error(n,t)}}function jr(n,t,r){try{r.end(n,t)}catch(t){r.error(n,t)}}Wr.prototype.dispose=function(){if(!this.disposed)return this.disposed=!0,0===this.source.remove(this.sink)&&this.source._dispose()};var zr=function(n){return n.dispose()},qr={dispose:function(){}},Xr=function(n){this.source=n,this.sinks=[],this._disposable=qr};Xr.prototype.run=function(n,t){return 1===this.add(n)&&(this._disposable=this.source.run(this,t)),new Wr(this,n)},Xr.prototype._dispose=function(){var n=this._disposable;return this._disposable=qr,Promise.resolve(n).then(zr)},Xr.prototype.add=function(n){return this.sinks=function(n,t){for(var r=t.length,e=new Array(r+1),i=0;i<r;++i)e[i]=t[i];return e[r]=n,e}(n,this.sinks),this.sinks.length},Xr.prototype.remove=function(n){var t=f(n,this.sinks);return t>=0&&(this.sinks=s(t,this.sinks)),this.sinks.length},Xr.prototype.event=function(n,t){var r=this.sinks;if(1===r.length)return r[0].event(n,t);for(var e=0;e<r.length;++e)Vr(n,t,r[e])},Xr.prototype.end=function(n,t){for(var r=this.sinks,e=0;e<r.length;++e)jr(n,t,r[e])},Xr.prototype.error=function(n,t){for(var r=this.sinks,e=0;e<r.length;++e)r[e].error(n,t)};var Jr=function(n){var t=n.source;return t instanceof Xr?n:new n.constructor(new Xr(t))};
/** @license MIT License (c) copyright 2010-2016 original author or authors */i.of=P,i.empty=C,i.from=K,i.prototype.subscribe=function(n){
/** @license MIT License (c) copyright 2010-2016 original author or authors */
return function(n,t){if(Object(n)!==n)throw new TypeError("subscriber must be an object");var r=T(),e=new ln(S,n,r);return r.setDisposable(t.source.run(e,hn)),new vn(r)}(n,this)},i.prototype[V.a]=function(){return this},i.prototype.thru=function(n){return function(n,t){return n(t)}(n,this)},i.prototype.observe=i.prototype.forEach=function(n){return Fn(n,this)},i.prototype.drain=function(){return On(this)},i.prototype.loop=function(n,t){return function(n,t,r){return new i(new Yn(n,t,r.source))}(n,t,this)},i.prototype.scan=function(n,t){return function(n,t,r){return new i(new Hn(n,t,r.source))}(n,t,this)},i.prototype.reduce=function(n,t){return Vn(n,t,this)},i.prototype.concat=function(n){return ut(this,n)},i.prototype.startWith=function(n){return function(n,t){return ut(P(n),t)}(n,this)},i.prototype.map=function(n){return Cn(n,this)},i.prototype.ap=function(n){return dt(this,n)},i.prototype.constant=function(n){return function(n,t){return Cn(function(){return n},t)}(n,this)},i.prototype.tap=function(n){return In(n,this)},i.prototype.transduce=function(n){return function(n,t){return new i(new _t(n,t.source))}(n,this)},i.prototype.chain=function(n){return Lt(n,this)},i.prototype.flatMap=i.prototype.chain,i.prototype.join=function(){return Dt(this)},i.prototype.continueWith=function(n){return et(n,this)},i.prototype.flatMapEnd=i.prototype.continueWith,i.prototype.concatMap=function(n){return Rt(n,this)},i.prototype.mergeConcurrently=function(n){return bt(n,this)},i.prototype.merge=function(){return Pt(function(n,t){var r=t.length,e=new Array(r+1);e[0]=n;for(var i=0;i<r;++i)e[i+1]=t[i];return e}(this,arguments))},i.prototype.combine=function(n){return ht(n,a(this,0,arguments))},i.prototype.sampleWith=function(n){return function(n,t){return new i(new Ut(h,n.source,[t.source]))}(n,this)},i.prototype.sample=function(n){return It(n,this,u(arguments))},i.prototype.zip=function(n){return Vt(n,a(this,0,arguments))},i.prototype.switchLatest=function(){return new i(new Jt(this.source))},i.prototype.switch=i.prototype.switchLatest,i.prototype.filter=function(n){return Qt(n,this)},i.prototype.skipRepeats=function(){return Zt(rr,this)},i.prototype.skipRepeatsWith=function(n){return Zt(n,this)},i.prototype.take=function(n){return er(n,this)},i.prototype.skip=function(n){return function(n,t){return ir(n,1/0,t)}(n,this)},i.prototype.slice=function(n,t){return ir(n,t,this)},i.prototype.takeWhile=function(n){return function(n,t){return new i(new ar(n,t.source))}(n,this)},i.prototype.skipWhile=function(n){return function(n,t){return new i(new fr(n,t.source))}(n,this)},i.prototype.skipAfter=function(n){return function(n,t){return new i(new lr(n,t.source))}(n,this)},i.prototype.until=function(n){return pr(n,this)},i.prototype.takeUntil=i.prototype.until,i.prototype.since=function(n){return dr(n,this)},i.prototype.skipUntil=i.prototype.since,i.prototype.during=function(n){return function(n,t){return pr(Dt(n),dr(n,t))}(n,this)},i.prototype.delay=function(n){return function(n,t){return n<=0?t:new i(new Tr(n,t.source))}(n,this)},i.prototype.timestamp=function(){return new i(new xr(this.source))},i.prototype.throttle=function(n){return function(n,t){return new i(Lr(n,t.source))}(n,this)},i.prototype.debounce=function(n){return function(n,t){return new i(new kr(n,t.source))}(n,this)},i.prototype.awaitPromises=function(){return Cr(this)},i.prototype.await=i.prototype.awaitPromises,i.prototype.recoverWith=function(n){return Fr(n,this)},i.prototype.flatMapError=i.prototype.recoverWith,i.prototype.multicast=function(){return Jr(this)};var Kr=[0];function $r(n){var t=[n,(Kr[0]+=1,Kr[0])];return t.tag=248,t}var Qr=$r("Exception-WonderLog.Check_fail"),Zr=function(n){throw new Error(n)};function ne(n){return console.warn(n),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.warn(n)}(n)}function te(n){return console.log(n),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.debug(n)}(n)}function re(n){return console.error(n),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.error(n)}(n)}function ee(n){return console.trace(),function(n){"undefined"!=typeof window&&void 0!==window.wonder_console&&window.wonder_console.trace(n)}(n),0}function ie(n){return JSON.stringify(n)}function oe(n){return ne(String(n)+"")}function ue(n,t,r){return"\n  Debug:\n\n  description\n  "+String(n)+"\n\n  params\n  "+String(t)+"\n\n  "}function ce(n,t){return t?e.a(n,0):0}function ae(n,t){return t?(te(e.a(n,0)),ee(ae)):0}function se(n,t,r){var e=JSON.stringify(t);return"\n  DebugJson:\n\n  description\n  "+String(n)+"\n\n  variable value\n  "+String(e)+"\n  "}function fe(n,t){return t?(te(e.a(n,0)),ee(fe)):0}function he(n,t,r,e,i){return"\n  Fatal:\n\n  title\n  "+String(n)+"\n\n  description\n  "+String(t)+"\n\n  reason\n  "+String(r)+"\n\n  solution\n  "+String(e)+"\n\n  params\n  "+String(i)+"\n\n   "}function le(n){return e.a(Zr,n)}function ve(n,t,r,e,i){return"\n  Error:\n\n  title\n  "+String(n)+"\n\n  description\n  "+String(t)+"\n\n  reason\n  "+String(r)+"\n\n  solution\n  "+String(e)+"\n\n  params\n  "+String(i)+"\n\n   "}function pe(n){return re(n),ee(pe)}function de(n,t){return"expect "+String(n)+", but actual "+String(t)}var _e=function(n){return"undefined"!=typeof window&&void 0!==window.fake_self_wonder?window.fake_self_wonder:self};function ge(n,t){return t.postMessage(n),0}var ye=r(0);function me(n){return void 0!==n}var we=[];function Ee(n){if(void 0===n){var t=[we,0];return t.tag=256,t}if(null!==n&&n[0]===we){var r=n[1]+1|0,e=[we,r];return e.tag=256,e}return n}function be(n){return null==n?void 0:Ee(n)}function Te(n){return void 0===n?void 0:Ee(n)}function Ae(n){if(null!==n&&n[0]===we){var t=n[1];return 0===t?void 0:[we,t-1|0]}return n}function xe(n,t){if(t in n)return Ee(n[t])}function Se(n){return void 0!==n}function Le(n){if(void 0!==n)return Ae(n);throw new Error("getExn")}function De(n,t,r){for(var e=t,i=0,o=r.length-1|0;i<=o;++i)e=n(e,r[i]);return e}function Re(n,t,r){return r[n]=t,r}var ke=function(n){return{}},Pe=function(n,t){return xe(t,n)},Me=function(n,t){return t[n]},Ne=function(n){for(var t={},r=n;;){var e=r;if(!e)return t;var i=e[0];t[i[0]]=i[1],r=e[1]}};function Ce(n,t){var r=Me(n,t);return[me(r),r]}function Ie(n,t){return n<t?-1:n===t?0:1}function Be(n,t){return n===t?0:n<t?-1:1}var Ue=r(2);function Fe(n,t){for(var r in n)t(r)}function Oe(n,t){for(;;){var r=t,e=n;if(e===r)return 0;var i=typeof e,o=typeof r,u=0;switch(i){case"boolean":if("boolean"===o)return F=r,e?F?0:1:F?-1:0;u=1;break;case"function":if("function"===o)throw[Ue.e,"compare: functional value"];u=1;break;case"number":if("number"===o)return Ie(e,r);u=1;break;case"string":return"string"===o?Be(e,r):1;case"undefined":return-1;default:u=1}if(1===u)switch(o){case"string":return-1;case"undefined":return 1;default:if("boolean"===i)return 1;if("boolean"===o)return-1;if("function"===i)return 1;if("function"===o)return-1;if("number"===i)return null===r||256===r.tag?1:-1;if("number"===o)return null===e||256===e.tag?-1:1;if(null===e)return 256===r.tag?1:-1;if(null===r)return 256===e.tag?-1:1;var c=0|e.tag,a=0|r.tag;if(250===c){n=e[0];continue}if(250===a){t=r[0];continue}if(256===c)return 256===a?Ie(e[1],r[1]):-1;if(248===c)return Ie(e[1],r[1]);if(251===c)throw[Ue.e,"equal: abstract value"];if(c!==a)return c<a?-1:1;var s=0|e.length,f=0|r.length;if(s===f){if(!Array.isArray(e)){var h=e,l=r,v=[void 0],p=[void 0],d=function(n,t){var r=n[2],e=n[1];if(!e.hasOwnProperty(t)||Oe(n[0][t],e[t])>0){var i=r[0];return void 0!==i&&t>=i?0:(r[0]=t,0)}return 0},_=function(n){return function(t){return d(n,t)}}([h,l,p]),g=function(n){return function(t){return d(n,t)}}([l,h,v]);Fe(h,_),Fe(l,g);var y=v[0],m=p[0];return void 0!==y?void 0!==m?Be(y,m):-1:void 0!==m?1:0}for(var w=e,E=r,b=0,T=s;;){var A=b;if(A===T)return 0;var x=Oe(w[A],E[A]);if(0!==x)return x;b=A+1|0}}else if(s<f)for(var S=e,L=r,D=0,R=s;;){var k=D;if(k===R)return-1;var P=Oe(S[k],L[k]);if(0!==P)return P;D=k+1|0}else for(var M=e,N=r,C=0,I=f;;){var B=C;if(B===I)return 1;var U=Oe(M[B],N[B]);if(0!==U)return U;C=B+1|0}}}var F}function Ye(n,t){for(;;){var r=t,e=n;if(e===r)return!0;var i=typeof e;if("string"===i||"number"===i||"boolean"===i||"undefined"===i||null===e)return!1;var o=typeof r;if("function"===i||"function"===o)throw[Ue.e,"equal: functional value"];if("number"===o||"undefined"===o||null===r)return!1;var u=0|e.tag,c=0|r.tag;if(250!==u)if(250!==c){if(248===u)return e[1]===r[1];if(251===u)throw[Ue.e,"equal: abstract value"];if(u!==c)return!1;if(256===u)return e[1]===r[1];var a=0|e.length;if(a!==(0|r.length))return!1;if(!Array.isArray(e)){var s=e,f=r,h=[!0],l=function(n,t){return function(r){return n.hasOwnProperty(r)?0:(t[0]=!1,0)}}(f,h),v=function(n,t,r){return function(e){return n.hasOwnProperty(e)&&Ye(t[e],n[e])?0:(r[0]=!1,0)}}(s,f,h);return Fe(s,l),h[0]&&Fe(f,v),h[0]}for(var p=e,d=r,_=0,g=a;;){var y=_;if(y===g)return!0;if(!Ye(p[y],d[y]))return!1;_=y+1|0}}else t=r[0];else n=e[0]}}function Ge(n,t){return!Ye(n,t)}function He(n,t){return Oe(n,t)>=0}function We(n,t){return Oe(n,t)>0}function Ve(n,t){return Oe(n,t)<0}$r("Caml_js_exceptions.Error");function je(n,t){if(n)return 0;throw[Qr,t]}function ze(n,t){try{t()}catch(t){throw new Error(JSON.stringify(n))}}function qe(n,t){return t?e.a(n,0):0}function Xe(n,t,r){return t?(e.a(n,r),r):r}function Je(n){return je(!0===n,"expect to be true, but actual is false")}function Ke(n){return je(!1===n,"expect to be false, but actual is true")}var $e=function(n){return null!=n};function Qe(n){return je(e.a($e,n),"expect exist, but actual not")}function Ze(n){return je(Se(n),"expect exist, but actual not")}function ni(n,t,r){return je(Ye(t,r),function(n,t){return'"expect to be '+String(t)+", but actual is "+String(n)+'"'}(t,r))}function ti(n,t,r){return je(Ge(t,r),function(n,t){return'"expect not to be '+String(t)+", but actual is "+String(n)+'"'}(t,r))}function ri(n,t,r){return je(We(t,r),"expect "+String(t)+" > "+String(r)+", but actual isn't")}function ei(n,t,r){return je(He(t,r),"expect "+String(t)+" >= "+String(r)+", but actual isn't")}function ii(n,t,r){return je(Ve(t,r),"expect "+String(t)+" < "+String(r)+", but actual isn't")}function oi(n,t,r){return je(Oe(t,r)<=0,"expect "+String(t)+" <= "+String(r)+", but actual isn't")}var ui=[function(n,t){return ni(0,n,t)},function(n,t){return ni(0,n,t)},function(n,t){return ni(0,n,t)},function(n,t){return ti(0,n,t)},function(n,t){return ti(0,n,t)},function(n,t){return ri(0,n,t)},function(n,t){return ri(0,n,t)},function(n,t){return ei(0,n,t)},function(n,t){return ei(0,n,t)},function(n,t){return ii(0,n,t)},function(n,t){return ii(0,n,t)},function(n,t){return oi(0,n,t)},function(n,t){return oi(0,n,t)}];var ci=[void 0,!1];function ai(n){return n[1]}function si(n,t){for(var r=0,e=t.length-1|0;r<=e;++r)n(t[r]);return 0}function fi(n,t){for(var r=0,e=t.length-1|0;r<=e;++r)n(t[r],r);return 0}function hi(n,t,r){for(var e=t,i=0,o=r.length-1|0;i<=o;++i)e=n(e,r[i],i);return e}var li=De,vi=function(n){var t=n.source;return!!t.event&&!!t.source};function pi(n){return 0!==n.length?li(function(n,t){return e.a(vi,n),n.concat(t)},ye.b(n,0),n.slice(1)):P(1)}function di(n,t){return qe(function(n){var r=t.length;return ze(de("stream count >= 2","is "+String(r)),function(n){return ui[7](r,2)}),ze("the first stream should be fromEvent stream",function(n){return je(!0===e.a(vi,ye.b(t,0)),"expect to be true, but actual is false")}),ze("only the first stream should be fromEvent stream",function(n){return si(function(n){return je(!1===e.a(vi,n),"expect to be false, but actual is true")},t.slice(1))})},ai(ci)),li(function(t,r){return Rt(function(t){return e.b(r,t,n)},t)},e.b(ye.b(t,0),void 0,n),t.slice(1))}function _i(n){return Cn(function(n){return e.a(n,0)},P(n))}function gi(n,t){for(var r=[],e=n;e<=t;++e)r.push(e);return r}function yi(n,t){return t.push(n),t}function mi(n,t,r){return Xe(function(r){var e=ie(n);return ze(de("find "+String(t)+" in "+String(e),"not"),function(n){return Qe(r)})},ai(ci),n.find(r))}function wi(n){return qe(function(t){return ze(de("data exist(get by getExn)","not"),function(t){return Ze(n)})},ai(ci)),Le(n)}function Ei(n){return null===n||void 0===n}var bi=wi,Ti=Ye;function Ai(n){return void 0!==n?Ae(n):le(he("throwJobFlagsShouldBeDefined","jobFlags should be defined","","",""))}var xi=mi;function Si(n,t){var r=n[3],i=n[0];return li(function(n,o){var u=o[0],c=function(n,t){return xi(n,t,function(n){return Ti(n[0],t)})}(r,u),a=e.b(t,u,i);return yi(e.a(a,c[1]),n)},[],n[1])}var Li=r(3);r(8);var Di=Math.imul||function(n,t){return((n>>16)*(t|=0)<<16)+(65535&n)*t|0};$r("Pervasives.Exit");Li.f,Li.g,Li.e;Li.a,Li.d,Li.d;function Ri(n,t,r,i){return function(n,t,r,e){var i=n[1];return li(function(n,o){return yi(di(r,Si([t,o,r,i],e)),n)},[],n[0])}([n,t],e.a(r[0],0),i,r[1])}var ki=[void 0];var Pi=Ne;var Mi=function(n){return parseInt(n,16)};function Ni(n){var t=n[0];return qe(function(n){return ze(de("gl exist","not"),function(n){return Ze(t)})},ai(ci)),wi(t)}function Ci(n,t,r){var e=r[5];return void 0!==e&&e===t?r:1===1?(function(n,t){t?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST)}(n,t),[r[0],r[1],r[2],r[3],r[4],t,r[6],r[7],r[8]]):void 0}function Ii(n,t){return n[0]=t,t}function Bi(n){return wi(n[0])}function Ui(n,t,r){return _i(function(n){return function(n){n.commit()}(Ni(Bi(r)[4])),t})}function Fi(n){return null===n||void 0===n}function Oi(n,t,r){return hi(function(t,r,e){return void 0===r?t:n(t,r,e)},t,r)}function Yi(n,t,r){return r[n]=t,r}function Gi(n,t){return t[n]=void 0,t}var Hi=function(n){return[]},Wi=function(n,t){return t[n]},Vi=function(n,t){var r=t[n];return Fi(r)?void 0:Ee(r)},ji=function(n){return n.length},zi=function(n){return n.filter(function(n){return void 0!==n})},qi=Oi;function Xi(n){return n<<4}function Ji(n){return Di(n,3)}function Ki(n){return 0+Di(n<<4,Float32Array.BYTES_PER_ELEMENT)|0}function $i(n){return n<<2}function Qi(n){return Ki(n)+Di(Di(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function Zi(n){return Di(n,3)}function no(n){return Qi(n)+Di(n<<2,Float32Array.BYTES_PER_ELEMENT)|0}function to(n){return n<<4}function ro(n,t){return[new Float32Array(n,0,Xi(t)),new Float32Array(n,Ki(t),Ji(t)),new Float32Array(n,Qi(t),$i(t)),new Float32Array(n,no(t),Zi(t))]}function eo(n,t){return t[n]}function io(n,t){return t[n]}function oo(n,t){return t[n]}function uo(n,t){return t[n]}function co(n,t){return[t[n],t[n+1|0],t[n+2|0]]}function ao(n,t,r){return ze(de("not exceed bound","exceed"),function(i){return ui[9](n,e.a(r,t))})}function so(n,t,r){return qe(function(t){return ao(n,r,function(n){return n.length})},ai(ci)),r[n]=t,r}function fo(n,t,r){return qe(function(t){return ao(n,r,function(n){return n.length})},ai(ci)),r[n]=t,r}function ho(n,t,r,e){return n[r]=t[e],0}function lo(n,t,r,e){for(var i=t[0],o=n[0],u=n[1],c=t[1],a=r-1|0;c<=a;++c)e(o,i,u,c),u=u+1|0;return u}function vo(n,t,r){return lo(n,t,r,ho)}function po(n,t){return le(he(n,"unknown browser","","","browser: "+String(t)))}var _o="\nprecision mediump float;\n\nattribute vec2 a_position;\nattribute vec3 a_color;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_projectionMat;\n\nvarying vec3 v_color;\nvarying vec2 v_texCoord;\n\nvoid main() {\n  gl_Position = u_projectionMat * vec4(a_position, 0, 1);\n  v_color = a_color;\n  v_texCoord = a_texCoord;\n}\n    ",go="\nprecision mediump float;\n\nvarying vec3 v_color;\nvarying vec2 v_texCoord;\n\nuniform sampler2D u_sampler2D;\n\nvoid main() {\n  vec4 sample = texture2D(u_sampler2D, v_texCoord);\n\n  //gl_FragColor = vec4(v_color.xyz * sample.xyz, sample.x * vColor.a );\n  gl_FragColor = vec4(v_color * sample.xyz, sample.w);\n}\n    ";function yo(n,t){return t.push(n),t}function mo(n){return qe(function(t){return ze(de("data exist(get by getExn)","not"),function(t){return Ze(n)})},!0),Le(n)}function wo(n){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Eo(n,t,r){return n.shaderSource(r,t),n.compileShader(r),ce(function(e){if(!1===n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r),o=String(i)+"";ae(function(n){return ue("shader info log",o)},!0);var u=String(t)+"";return ae(function(n){return ue("glsl source",u)},!0)}return 0},!0),r}function bo(n,t,r,e){var i=Eo(r,n,r.createShader(r.VERTEX_SHADER)),o=Eo(r,t,r.createShader(r.FRAGMENT_SHADER));return r.attachShader(e,i),r.attachShader(e,o),r.bindAttribLocation(e,0,"a_position"),function(n,t){t.linkProgram(n),ce(function(r){if(!1===t.getProgramParameter(n,t.LINK_STATUS)){var e=t.getProgramInfoLog(n);return le(he("link program error",String(e)+"","","",""))}return 0},!0)}(e,r),r.deleteShader(i),r.deleteShader(o),e}function To(n){return mo(n[3])}function Ao(n){return n[0]}function xo(n){return n[7]}function So(n){return n[6][0]}function Lo(n){return n[4][0]}function Do(n){return n[4][1]}function Ro(n,t){return Di(n,1e3)+t|0}function ko(n){var t=n[1];return Pe(t[0],t[2])}function Po(n){var t=n[1];return Pe(t[1],t[3])}function Mo(n){return Se(Po(n))}function No(n,t,r){var e=n.RGB,i=n.RGBA,o=n.TEXTURE_2D;return li(function(t,r){var u;switch(r[2]){case 0:u=e;break;case 1:u=i;break;case 2:u=le(he("createCustomTextures","unknown image type. type should be jpg or png.","","",""))}var c=n.createTexture();return n.bindTexture(o,c),n.texParameteri(o,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texImage2D(o,0,u,u,n.UNSIGNED_BYTE,r[0]),Re(r[1],c,t)},r,t)}function Co(n,t){return Me(n,t[1][5])}function Io(n,t){return li(function(n,t){return yo(t,n)},t,n)}function Bo(n){return[].concat.apply([],n)}function Uo(n){return n.length/2|0}function Fo(n,t){var r=n[2];return t.bindBuffer(t.ARRAY_BUFFER,n[0]),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n[1]),t.DYNAMIC_DRAW),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,n[3],t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,null),t}function Oo(n,t,r){var e=To(r),i=li(function(n,t){var r=t[5],e=n[5],i=n[4],o=n[3],u=n[2],c=n[1],a=n[0],s=r.length;if(0!==s){var f=c+(s<<1)|0;return[yo([t[0],t[1],s,c],a),f,u.concat(t[2]),o.concat(t[3]),i.concat(t[4]),e.concat(r)]}return[a,0,u,o,i,e]},[[],0,[],[],[],[]],t);return function(n,t,r){r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),r.DYNAMIC_DRAW)}(e[4],i[5],Fo([e[3],i[4],e[8],2],Fo([e[2],i[3],e[7],3],Fo([e[1],i[2],e[6],2],n)))),[r,i[0]]}function Yo(n,t,r,e,i){return[yo(t,yo(n,e[0])),Io(r,e[1]),Io(i,e[2])]}function Go(n,t){var r=t[8][0];return r[0][r[1]]=n,[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],[[r[0],r[1]+1|0]]]}function Ho(n){var t=n[8][0];return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],[[t[0],t[1]-1|0]]]}function Wo(n,t){var r=function(n){var t=n[8][0];if(!(t[1]<=0))return li(function(n,t){var r=n[1],e=n[0],i=e[t];return[e,[r[0]+i[0]|0,r[1]+i[1]|0]]},[t[0],[0,0]],function(n,t){for(var r=[],e=n;e<=t;++e)r.push(e);return r}(0,t[1]-1|0))[1]}(t);if(void 0!==r){var e=r;return[n[0]+e[0]|0,n[1]+e[1]|0,n[2],n[3]]}return n}function Vo(n){return[n[0],n[1],n[2],n[3]]}function jo(n){return[n[0],n[1]]}function zo(n,t,r){var e=n[3],i=n[2],o=n[1],u=n[0],c=Ao(r)[1],a=Lo(r),s=a[2],f=Uo(s),h=r[4],l=r[4][0];return[r[0],r[1],r[2],r[3],[[l[0],l[1],Io([u,o,u,o+e,u+i,o,u+i,o+e],s),Io(Bo([t,t,t,t]),a[3]),Io(Bo([c,c,c,c]),a[4]),Io([f,f+1|0,f+2|0,f+3|0,f+2|0,f+1|0],a[5])],h[1]],r[5],r[6],r[7],r[8]]}function qo(n,t,r){var e=Vi(Ro(t,r),n[5]);return void 0!==e?e:0}function Xo(n,t){var r=n[4];return Vi(t,r)}function Jo(n,t,r){Xo(t,r);var e=Xo(t,r);return void 0!==e?e:r==="\t".charCodeAt(0)?n[1]:r===" ".charCodeAt(0)?n[0]:void 0}function Ko(n,t){var r,e=Xo(n," ".charCodeAt(0));if(void 0!==e)r=e;else{var i=function(n){return li(function(t,r){return void 0!==t?t:Xo(n,r.charCodeAt(0))},void 0,["m","w"])}(n);r=void 0!==i?i:function(n){return zi(n[4])[0]}(n)}return[r,["\t".charCodeAt(0),[0,0,0,0],0,0,Di(t,r[4])]]}function $o(n){return ji(n[4])>0}function Qo(n,t,r,i,o,u,c,a,s){if(!e.a(c,n))return[i,i,0];for(var f=0,h=0,l=0,v=void 0,p=!1,d=i,_=Math.min(t.length,o)-1|0;d<=_;++d){if(!p){var g=t.charCodeAt(d),y=e.b(a,n,g);if(void 0!==y){var m=y,w=m[1],E=v,b=((f=f+(void 0!==E?e.c(s,n,E[0],m[0]):0)|0)+m[4]|0)+r|0,T=f+w[2]|0;if(T>u||b>u)0===l&&(l=1,h=T),p=!0;f=b,h=T,v=m}l=l+1|0}}return void 0!==v&&(h=h+v[2]|0),[i,i+l|0,h]}function Zo(n,t,r,e){var i=n.indexOf(t,r);return-1===i||i>e?e:i}function nu(n){return/\s/.test(n)}function tu(n,t,r,e){return function(n,t,r,e,i,o,u,c,a){for(var s=[],f=o;e<i&&e<t.length;){let o=Zo(t,"\n",e,i);for(;e<o&&nu(t.charAt(e));)e++;let h=Qo(n,t,r,e,o,f,u,c,a),l=e+(h[1]-h[0]),v=l+"\n".length;if(l<o){for(;l>e&&!nu(t.charAt(l));)l--;if(l===e)v>e+"\n".length&&v--,l=v;else for(v=l;l>e&&nu(t.charAt(l-"\n".length));)l--}l>=e&&s.push(Qo(n,t,r,e,l,f,u,c,a)),e=v}return s}(n,t,r[0],r[2],r[3],r[1],$o,function(n,t){return Jo(e,n,t)},qo)}function ru(n,t,r){return(n-Di(r.length,t)|0)/2|0}function eu(n,t,r,e){var i=r[0],o=r[1][1],u=o[3],c=o[2],a=i[0]+n,s=i[1]+t;return Io([a,s,a,s+u,a+c,s,a+c,s+u],e)}function iu(n,t,r,e){var i=n[1][1],o=i[1],u=i[0],c=u/t,a=o/r,s=(u+i[2]|0)/t,f=(o+i[3]|0)/r;return Io([c,a,c,f,s,a,s,f],e)}function ou(n,t){return Io([n,n+1|0,n+2|0,n+3|0,n+2|0,n+1|0],t)}function uu(n,t,r,e){var i=n[1],o=n[0],u=Ao(e)[0],c=Bo([u,u,u,u]),a=ko(e);if(void 0!==a){var s=a,f=function(n,t,r,e){var i=t[4],o=t[3],u=t[0],c=Ko(r,t[2]),a=tu(r,n,[o,u,0,n.length],c),s=r[0],f=li(function(n,t){return Math.max(n,t[2],u)},0,a);return hi(function(t,e,u){for(var a=e[2],h=t[0],l=void 0,v=t[1],p=t[2],d=e[0],_=e[1]-1|0;d<=_;++d){var g=n.charCodeAt(d),y=Jo(c,r,g);if(void 0!==y){var m,w,E=y;switch(m=void 0!==l?v=v+qo(r,l[0],E[0])|0:v,i){case 0:w=m;break;case 1:w=m+((f-a|0)/2|0)|0;break;case 2:w=m+(f-a|0)|0}yo([[w+E[2]|0,p+E[3]|0],E,d,u],h),v=(v+E[4]|0)+o|0,l=E}}return[h,0,p+s|0,l]},[[],0,ru(t[1],s,a),void 0],a)[0]}(t,[n[2],n[3],4,0,r],s),h=Lo(e),l=li(function(n,t){var r=n[0],e=Uo(r);return[eu(o,i,t,r),Io(c,n[1]),iu(t,s[2],s[3],n[2]),ou(e,n[3])]},[h[2],h[3],h[4],h[5]],f),v=e[4],p=e[4][0];return[e[0],e[1],e[2],e[3],[[p[0],p[1],l[0],l[1],l[2],l[3]],v[1]],e[5],e[6],e[7],e[8]]}return le(he("getLayoutData","impossible to create font: not find fnt file","","",""))}function cu(n,t,r,e){var i=t[3],o=t[2],u=t[1],c=t[0],a=n[3],s=n[2],f=n[1],h=n[0],l=function(n,t){var r=Pe(n,Do(t));return void 0!==r?r:[1,Ee(Co(n,t)),[],[],[],[]]}(r,e),v=l[2],p=Uo(v),d=[l[0],l[1],Io([h,f,h,f+a,h+s,f,h+s,f+a],v),Io([1,1,1,1,1,1,1,1,1,1,1,1],l[3]),Io([c,u,c,i,o,u,o,i],l[4]),Io([p,p+1|0,p+2|0,p+3|0,p+2|0,p+1|0],l[5])],_=e[4];return[e[0],e[1],e[2],e[3],[_[0],Re(r,d,e[4][1])],e[5],e[6],e[7],e[8]]}function au(n,t){var r=n[0],e=n[1],i=t[1],o=t[0],u=r+n[2],c=e+n[3];return r<=o&&o<=u&&e<=i&&i<=c}function su(n){var t=xo(n);return!!t[1]&&t[0]}function fu(n,t,r,e){var i,o,u,c=r[0],a=t[0];if(n[0]){var s=a+t[2],f=(i=n[1][0],u=s,Ve(i,o=a)?o:We(i,u)?u:i),h=(r[1]-c)*((f-a)/(s-a))+c;return r[2]?Math.round(h):h}return function(n,t,r){var e=Vi(n,r[6][2][1]);return void 0!==e?e:t}(n[2],n[3],e)}function hu(n,t,r,e){var i=t[3],o=t[2],u=t[1],c=t[0],a=n[0],s=a[3],f=a[2],h=a[1],l=a[0],v=Ao(e)[5],p=v[3],d=v[2],_=xo(e),g=_[2],y=au(a,jo(g))?_[1]?[!0,d,p]:[!1,d,p]:[!1,v[0],v[1]],m=y[0],w=e[6][2][0],E=fu([m,g,w,r[0]],a,[c,u,o,i],e),b=(E-c)/(u-c),T=E.toFixed(o?0:i),A=zo(a,y[1],e),x=uu(a,T,1,zo([l,h,f*b,s],y[2],A));return[function(n){var t=n[6],r=n[6][2];return[n[0],n[1],n[2],n[3],n[4],n[5],[t[0],t[1],[n[6][2][0]+1|0,r[1]]],n[7],n[8]]}(function(n,t,r){return Yi(n,t,r[6][2][1]),r}(w,E,uu([l+f,h,n[1],s],r[1],0,x))),m,E]}function lu(n,t,r,e){var i=n[3],o=n[1],u=n[0],c=Ao(e)[4],a=c[3],s=c[2],f=xo(e),h=i*c[4],l=i*c[5],v=[u,o,l,l],p=e[6][1][0],d=function(n,t,r){var e=Vi(n,r[6][1][1]);return void 0!==e?e:t}(p,t,e),_=au(v,jo(f[2])),g=_&&su(e)?!d:d,y=g||_?[a,s]:[c[1],c[0]],m=function(n,t,r){return Yi(n,t,r[6][1][1]),r}(p,g,e),w=zo(v,y[1],m),E=g?zo([Math.round(.5*(u+(u+l)-h)),Math.round(.5*(o+(o+l)-h)),h,h],y[0],w):w;return[function(n){var t=n[6],r=n[6][1];return[n[0],n[1],n[2],n[3],n[4],n[5],[t[0],[n[6][1][0]+1|0,r[1]],t[2]],n[7],n[8]]}(uu([u+l,o,n[2]-l,i],r,1,E)),g]}function vu(n,t,r,e){var i=n[2],o=Ao(e)[1],u=n[0]+.5*i,c=n[1]+.5*n[3],a=i/2,s=Lo(e),f=s[2],h=Uo(f),l=Yo(u,c,t,[f,s[3],s[4]],o),v=function(n,t,r,e){for(;;){var i=e,o=n,u=r,c=t,a=i[3],s=i[2],f=i[1],h=i[0],l=o[7],v=o[6],p=o[5],d=o[4],_=o[3],g=o[2],y=o[1],m=o[0];if(!(c<=l))return[h,f,s,a];var w=Yo(m+p*Math.cos(c),y+p*Math.sin(c),g,[h,f,s],_),E=0!==c?yo(d,yo(u-1|0,yo(u+0|0,a))):a;e=[w[0],w[1],w[2],E],r=u+1|0,t=c+v,n=[m,y,g,_,d,p,v,l]}}([u,c,t,o,h+0|0,a,2*Math.PI/r,2*Math.PI+.1],0,h+1|0,[l[0],l[1],l[2],s[5]]),p=e[4],d=e[4][0];return[e[0],e[1],e[2],e[3],[[d[0],d[1],v[0],v[1],v[2],v[3]],p[1]],e[5],e[6],e[7],e[8]]}function pu(n,t,r,e){var i=Ao(e)[3],o=i[6],u=i[5],c=xo(e)[2],a=function(n,t,r){var e=Pe(t,So(r)[0]);return void 0!==e?e:n}(n,r,e),s=hi(function(n,t,r){var i=n[2],a=n[1],s=Vo(Wo(t[0],e)),f=s[3],h=s[1],l=s[0],v=f/2*u,p=f/2*o,d=2*v,_=2*v,g=2*p,y=2*p,m=[l,h,d,_],w=[l,h,g,y],E=function(n,t){var r=n[2],e=n[0]+.5*r,i=n[1]+.5*n[3],o=r/2;return Math.sqrt(Math.pow(t[0]-e,2)+Math.pow(t[1]-i,2))<=o}(w,jo(c)),b=E&&su(e);return[yo([l,h,s[2],f,t[1],v,p,d,_,g,y,m,w],n[0]),void 0!==a?a:b?r:void 0,void 0!==i?i:E?r:void 0]},[[],void 0,void 0],t),f=s[1];return[s[0],void 0!==f?f:a,s[2]]}function du(n,t,r,e){return uu(Vo(Wo(n,e)),t,r,e)}function _u(n,t,r,e){return cu(Vo(Wo(n,e)),t,r,e)}function gu(n,t,r){return function(n,t,r){var e,i=Ao(r)[2],o=i[2],u=xo(r);return e=au(n,jo(u[2]))?su(r)?[!0,o]:u[1]?[!1,o]:[!1,i[1]]:[!1,i[0]],[uu(n,t,1,zo(n,e[1],r)),e[0]]}(Vo(Wo(n,r)),t,r)}function yu(n,t,r){return zo(Vo(Wo(n,r)),t,r)}var mu=function(n,t,r,e){qe(function(r){return ze(de("defaultSelectIndex < radioButton count","not"),function(r){return ui[9](t,n.length)})},!0);var i=Ao(e)[3],o=i[4],u=i[3],c=i[2],a=i[1],s=i[0],f=pu(t,n,r,e),h=f[2],l=f[1];return Re(r,l,So(e)[0]),[hi(function(n,t,r){var e,i=t[9],f=t[5],v=t[1],p=t[0],d=l===r;e=d?[u,c]:void 0!==h&&h===r?[u,c]:[a,s];var _=vu(t[12],e[1],o,n),g=d?vu([Math.round(.5*(p+(p+i)-2*f)),Math.round(.5*(v+(v+t[10])-2*f)),t[7],t[8]],e[0],o,_):_;return uu([p+i,v,t[2]-i,t[3]],t[4],1,g)},e,f[0]),l]};function wu(n,t,r,e){return lu(Vo(Wo(n,e)),t,r,e)}function Eu(n,t,r,e){return function(n,t,r,e){var i=hu([n[0],n[1]],[t[0],t[1],!0,0],[r[0],r[1]],e);return[i[0],i[1],i[2]]}([Vo(Wo(n[0],e)),n[1]],[t[0],t[1]],[r[0],r[1]],e)}function bu(n,t,r,e){return function(n,t,r,e){return hu([n[0],n[1]],[t[0],t[1],!1,t[2]],[r[0],r[1]],e)}([Vo(Wo(n[0],e)),n[1]],[t[0],t[1],t[2]],[r[0],r[1]],e)}function Tu(n){var t=n.createBuffer();return n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,new Float32Array([]),n.DYNAMIC_DRAW),t}function Au(n){return t=0,r=n[0],e=n[1],i=0,o=-1,u=1,c=wo(),a=1/(t-r),s=1/(e-i),f=1/(o-u),c[0]=-2*a,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*s,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*f,c[11]=0,c[12]=(t+r)*a,c[13]=(i+e)*s,c[14]=(u+o)*f,c[15]=1,c;var t,r,e,i,o,u,c,a,s,f}function xu(n,t,r){return n.useProgram(t),function(n,t,r){n.uniformMatrix4fv(n.getUniformLocation(t,"u_projectionMat"),!1,Au(r))}(n,t,r),n.uniform1i(n.getUniformLocation(t,"u_sampler2D"),0),0}function Su(n){return[[0,void 0,[],[],[],[]],ke(0)]}function Lu(n){var t=Lo(n),r=Do(n);return[n,Bo([[t],li(function(n,t){var r=Uo(n[0])+n[1]|0;return[t[2],r,yo([t[0],t[1],t[2],t[3],t[4],t[5].map(function(n){return n+r|0})],n[2])]},[t[2],0,[]],function(n){for(var t=Object.keys(n),r=t.length,e=new Array(r),i=0,o=r-1|0;i<=o;++i)e[i]=n[t[i]];return e}(r))[2]])]}function Du(n,t,r){var i=e.a(t[0],r);!function(n){var t=n.getExtension("OES_vertex_array_object");null==t||t.bindVertexArrayOES(null)}(n);var o=Lu(function(n,t){var r=To(t);return[t[0],t[1],t[2],[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],[be(n.getParameter(n.CURRENT_PROGRAM)),n.getParameter(n.ELEMENT_ARRAY_BUFFER_BINDING),n.getParameter(n.ARRAY_BUFFER_BINDING),be(n.getParameter(n.TEXTURE_BINDING_2D)),n.isEnabled(n.DEPTH_TEST),n.isEnabled(n.BLEND)]],t[4],t[5],t[6],t[7],t[8]]}(n,i)),u=Oo(n,o[1],o[0]),c=u[0],a=To(c);return n.useProgram(a[0]),function(n){n.disable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA)}(n),e.b(t[1],function(n,t){var r=mo(To(t)[9]),e=r[3],i=r[0];return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r[1]),n.bindBuffer(n.ARRAY_BUFFER,r[2]),void 0!==i&&n.useProgram(Ae(i)),void 0!==e&&n.bindTexture(n.TEXTURE_2D,Ae(e)),r[4]?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),r[5]?n.enable(n.BLEND):n.disable(n.BLEND),t}(n,function(n,t,r){var e=To(r)[5];return si(function(t){var r=t[0]?mo(t[1]):e;return n.bindTexture(n.TEXTURE_2D,r),n.drawElements(n.TRIANGLES,t[2],n.UNSIGNED_SHORT,t[3]),0},t),r}(n,u[1],c)),r)}function Ru(n){return n[5][0]}function ku(n,t,r,i,o){var u=i[1],c=i[0];return!Mo(e.a(c,o))?o:Du(n,[c,u],function(n,t,r){var i=e.a(t,r),o=Ru(i);return void 0!==o?Ae(o)(mo(i[5][1]),n,r):r}(r,c,function(n,t,r){var i=e.a(t[0],r),o=i[6],u=i[6][1],c=i[6][2];return e.b(t[1],[i[0],i[1],i[2],i[3],Su(),i[5],[o[0],[0,u[1]],[0,c[1]]],n,i[8]],r)}(t,[c,u],o)))}function Pu(n){return[[[1,1,1],[0,0],[[.35,.1,.1],[.4,.1,.1],[.5,.1,.1]],[[.3,.3,.3],[.15,.15,.15],[.33,.33,.33],[.18,.18,.18],9,.6,1],[[.3,.3,.3],[.15,.15,.15],[.33,.33,.33],[.18,.18,.18],1.4,2],[[.16,.16,.16],[0,.3,.6],[.19,.19,.19],[0,.3,.7]]],["fnt","bitmap",ke(0),ke(0),[],ke(0)],void 0,void 0,Su(),[void 0,void 0,{label:du,image:_u,button:gu,box:yu,radioButton:mu,checkbox:wu,sliderInt:Eu,sliderFloat:bu,beginGroup:Go,endGroup:Ho}],[[ke(0)],[0,Hi(0)],[0,Hi(0)]],[!1,!1,[0,0],[0,0]],[[[],0]]]}function Mu(n){return wi(n).data}function Nu(n,t,r){return _i(function(n){var e,i=Bi(r),o=Mu(t),u=(e=function(n){return{alpha:n[0],depth:n[1],stencil:n[2],antialias:n[3],premultipliedAlpha:n[4],preserveDrawingBuffer:n[5]}}(o.contextConfig),o.canvas.getContext("webgl",e));return i[4]=function(n,t){return[Ee(n),t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}(u,i[4]),Ii(r,i),t})}function Cu(n,t){var r;switch(n){case"element_index_uint":r=function(n){return null!=n.getExtension("OES_element_index_uint")||(le(he("_getExtension","not support OES_element_index_uint extension","","","")),!1)}(t);break;case"instanced_arrays":r=t.getExtension("ANGLE_instanced_arrays");break;default:r=t.getExtension(n)}return null==r?void 0:Ee(r)}function Iu(n,t,r){return function(n,t){var r=n.VERTEX_SHADER,e=n.FRAGMENT_SHADER,i=n.HIGH_FLOAT,o=n.MEDIUM_FLOAT,u=n.getShaderPrecisionFormat(r,i),c=n.getShaderPrecisionFormat(r,o),a=n.getShaderPrecisionFormat(e,i),s=n.getShaderPrecisionFormat(e,o),f=u.precision>0&&a.precision>0,h=c.precision>0&&s.precision>0;return f?[t[0],t[1],0,t[3]]:h?(oe("not support highp, using mediump instead"),[t[0],t[1],1,t[3]]):(oe("not support highp and mediump, using lowp instead"),[t[0],t[1],2,t[3]])}(n,function(n,t,r){return Xe(function(n){var r=wi(n[3]);return ze(de("maxTextureUnit:"+String(r)+" >= textureCountPerMaterial:"+String(t),"not"),function(n){return ui[7](r,t)})},ai(ci),[r[0],r[1],r[2],n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)])}(n,t,r))}function Bu(n,t,r){return Iu(n,t,function(n,t){return[Cu("instanced_arrays",n),Cu("element_index_uint",n),t[2],t[3]]}(n,r))}var Uu=Se;function Fu(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t);return e[3]=Bu(Ni(e[4]),i.bufferData.textureCountPerMaterial,e[3]),Ii(r,e),t})}function Ou(n,t,r){return[t[0]-r[0],t[1]-r[1],t[2]-r[2]]}function Yu(n,t){var r=t[2],e=t[1],i=t[0],o=n[2],u=n[1],c=n[0];return[u*r-e*o,o*i-r*c,c*e-i*u]}function Gu(n,t){var r=n[0],e=n[1],i=n[2],o=n[4],u=n[5],c=n[6],a=n[8],s=n[9],f=n[10],h=f*u-c*s,l=-f*e+i*s,v=c*e-i*u,p=-f*o+c*a,d=f*r-i*a,_=-c*r+i*o,g=s*o-u*a,y=-s*r+e*a,m=u*r-e*o,w=r*h+e*p+i*g;return 0!==w?(w=1/w,t[0]=h*w,t[1]=l*w,t[2]=v*w,t[3]=p*w,t[4]=d*w,t[5]=_*w,t[6]=g*w,t[7]=y*w,t[8]=m*w,t):new Float32Array([0,0,0,0,0,0,0,0,0])}var Hu=function(n,t){var r=t[1];return Re(r[0],n,r[2]),t},Wu=function(n,t){var r=t[1];return Re(r[1],n,r[3]),t},Vu=function(n,t){var r=t[1];return[t[0],[r[0],r[1],r[2],r[3],n,r[5]],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]};var ju=Pu,zu=function(n,t,r){if(!Mo(r))return r;var e=bo(_o,go,n,n.createProgram()),i=Tu(n),o=Tu(n),u=Tu(n),c=function(n){var t=n.createBuffer();return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array([]),n.DYNAMIC_DRAW),t}(n),a=function(n,t){var r=n.createTexture(),e=n.TEXTURE_2D;n.bindTexture(e,r),n.texParameteri(e,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(e,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(e,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(e,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var i=n.RGBA;return n.texImage2D(e,0,i,i,n.UNSIGNED_BYTE,t),r}(n,function(n){return mo(Po(n))}(r));xu(n,e,t);var s=r[1],f=r[1];return[r[0],[f[0],f[1],f[2],f[3],f[4],No(n,s[4],s[5])],r[2],[e,i,o,u,c,a,n.getAttribLocation(e,"a_position"),n.getAttribLocation(e,"a_color"),n.getAttribLocation(e,"a_texCoord"),void 0],r[4],r[5],r[6],r[7],r[8]]},qu=function(n,t,r){var e=r[5];return function(n){return[n[0],n[1],n[2],n[3],n[4],n[5],[[ke(0)],[0,Hi(0)],[0,Hi(0)]],n[7],[[[],0]]]}([r[0],r[1],r[2],r[3],r[4],[Ee(t),Ee(n),e[2]],r[6],r[7],r[8]])};function Xu(n){return wi(n[26])}function Ju(n,t,r){var i=new ImageData(new Uint8ClampedArray(n[0]),n[1],n[2]),o=Xu(r)[0];return 1!==o?0!==o?po("_createImageBitmap",o):function(n,t){return createImageBitmap(n,t)}(i,{imageOrientation:!0===e.a(t,r)?"flipY":"none"}):function(n){return createImageBitmap(n)}(i)}function Ku(n){return n[27]}function $u(n){return!1}function Qu(n,t,r){var e=Mu(t).imguiData;if(Ei(e.fntData)||Ei(e.bitmapImageData))return P(t);var i=Bi(r);return Cn(function(n){return t},Nr(Ju(bi(e.bitmapImageData),$u,i).then(function(n){var t,i,o,u,c,a,s,f,h,l,v=Bi(r),p=Hu(JSON.parse(bi(e.fntData)),(t=JSON.parse(e.setting),i=Wu(n,Ku(v)),o=t.buttonSetting,u=t.radioButtonSetting,c=t.checkboxSetting,a=t.sliderSetting,s=[o.buttonColor,o.hoverButtonColor,o.clickButtonColor],f=[u.radioButtonOuterColor,u.radioButtonInnerColor,u.radioButtonOuterColorHover,u.radioButtonInnerColorHover,u.radioButtonCircleSegments,u.radioButtonInnerRadius,u.radioButtonOuterRadius],h=[c.checkboxOuterColor,c.checkboxInnerColor,c.checkboxOuterColorHover,c.checkboxInnerColorHover,c.checkboxInnerSizeRatio,c.checkboxOuterSizeRatio],l=[a.sliderBackgroundColor,a.sliderFillColor,a.sliderBackgroundColorHover,a.sliderFillColorHover],function(n,t){return[n,t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}([t.textColor,t.fontTexUvForWhite,s,f,h,l],i)));return v[27]=p,Promise.resolve(Ii(r,v))})).concat(Nr(Vn(function(n,t){return yi(t,n)},[],Pt(e.customTextureSourceDataArr.map(function(n){var t=n[2],r=n[1];return Nr(Ju(n[0],$u,i).then(function(n){return Promise.resolve([n,r,t])}))}))).then(function(n){var t=Bi(r);return t[27]=zu(Ni(t[4]),[e.canvasWidth,e.canvasHeight],Vu(n,t[27])),Promise.resolve(Ii(r,t))}))))}function Zu(n,t,r){return _i(function(n){var e,i,o,u,c,a=Bi(r);return a[4]=Ci(Ni(e=a[4]),!0,(i=Ni(e),o=2,void 0!==(c=(u=e)[4])&&c===o?u:(function(n,t){switch(t){case 0:return n.enable(n.CULL_FACE),n.cullFace(n.FRONT_AND_BACK),0;case 1:return n.disable(n.CULL_FACE),0;case 2:return n.enable(n.CULL_FACE),n.cullFace(n.BACK),0;case 3:n.enable(n.CULL_FACE),n.cullFace(n.FRONT)}}(i,o),[u[0],u[1],u[2],u[3],o,u[5],u[6],u[7],u[8]]))),Ii(r,a),t})}function nc(n){return Ai(n)[0]}var tc=2147483647,rc=-2147483648;function ec(n){return n>tc?tc:n<rc?rc:Math.floor(n)}var ic=ec,oc=/^\#([0-9a-f]{6})$/i;function uc(n){return le(he("convert16HexToRGBA","color should be #xxxxxx, but actual is "+String(n),"","",""))}function cc(n,t){return function(n,t,r){var e=r[3],i=t[3],o=t[2],u=t[1],c=t[0],a=0;if(void 0!==e){var s=e;if(s[0]===c&&s[1]===u&&s[2]===o&&s[3]===i)return r;a=1}else a=1;if(1===a)return n.clearColor(c,u,o,i),[r[0],r[1],r[2],[c,u,o,i],r[4],r[5],r[6],r[7],r[8]]}(Ni(t),function(n){var t=oc.exec(n);if(null!==t){var r=ye.b(t,1);if(null==r)return uc(n);var i=ic(e.a(Mi,r));return[(i>>>16&255)/255,(i>>>8&255)/255,(255&i)/255,1]}return uc(n)}(nc(n)),t)}function ac(n,t,r){return _i(function(e){var i=Bi(r);return i[4]=cc(n,i[4]),Ii(r,i),t})}function sc(n,t){var r=t.pop();return void 0!==r?r:n.createBuffer()}function fc(n,t){return sc(n,t[6])}function hc(n,t,r){var e=Vi(n,t);return void 0!==e?yi(Ae(e),r):r}function lc(n,t){return[t[0],t[1],t[2],t[3],t[4],hc(n,t[2],hc(n,t[1],hc(n,t[0],t[5]))),hc(n,t[3],t[6]),t[7]]}function vc(n,t){var r=Vi(n,t[4]);return void 0!==r?[t[0],t[1],t[2],t[3],t[4],t[5],t[6],yi(Ae(r),t[7])]:t}var pc=Gi;function dc(n,t){return[pc(n,t[0]),pc(n,t[1]),pc(n,t[2]),pc(n,t[3]),t[4],t[5],t[6],t[7]]}function _c(n,t){return[t[0],t[1],t[2],t[3],pc(n,t[4]),t[5],t[6],t[7]]}function gc(n,t,r){var e=t[1],i=t[0];return li(function(n,t){return e(t,i(t,n))},r,n)}function yc(n,t){return gc(n,[lc,dc],t)}function mc(n,t,r){return _i(function(n){var e,i,o=Bi(r),u=Mu(t);return o[23]=(e=u.sourceInstanceNeedDisposeVboBufferArr,i=yc(u.geometryNeedDisposeVboBufferArr,o[23]),gc(e,[vc,_c],i)),Ii(r,o),t})}function wc(n,t){var r=Wi(n,t);return[me(r),r]}function Ec(n,t,r){var e=wc(n,r);if(e[0])return e[1];var i,o=(i=t,function(n,t){return t.subarray(n,n+16|0)}(to(n),i));return Yi(n,o,r),o}function bc(n,t,r){var e=r[1],i=wc(n,e);if(i[0])return i[1];var o=function(n,t,r,e){return i=Gu(e(n,t,r[0]),r[1]),o=i[1],u=i[2],c=i[5],i[1]=i[3],i[2]=i[6],i[3]=o,i[5]=i[7],i[6]=u,i[7]=c,i;var i,o,u,c}(n,t,[r[0],new Float32Array([1,0,0,1,0,0,1,0,0])],Ec);return Yi(n,o,e),o}function Tc(n,t,r,i){return t[1].includes(t[0])?void 0!==i?i|e.a(r,n):e.a(r,n):i}function Ac(n,t,r){return _i(function(e){var i=Bi(r),o=Ni(i[4]);return i[4]=function(n,t,r){var e=function(n,t,r){var e=r[1],i=t[3],o=t[2],u=t[1],c=t[0],a=0;if(void 0!==e){var s=e;if(s[0]===c&&s[1]===u&&s[2]===o&&s[3]===i)return r;a=1}else a=1;if(1===a)return n.colorMask(c,u,o,i),[r[0],[c,u,o,i],r[2],r[3],r[4],r[5],r[6],r[7],r[8]]}(n,[!0,!0,!0,!0],r);return n.clear(t),e}(o,function(n,t){var r=Tc(n,["STENCIL_BUFFER",t],function(n){return n.STENCIL_BUFFER_BIT},Tc(n,["DEPTH_BUFFER",t],function(n){return n.DEPTH_BUFFER_BIT},Tc(n,["COLOR_BUFFER",t],function(n){return n.COLOR_BUFFER_BIT},void 0)));return void 0!==r?r:le(he("_getBit","should find bit","","","flags:"+String(t)))}(o,Ai(n)),i[4]),Ii(r,i),t})}function xc(n){return n<<0}function Sc(n){return n<<0}function Lc(n){return 0+Di(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function Dc(n){return n<<0}function Rc(n){return Lc(n)+Di(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function kc(n){return n<<0}function Pc(n){return Rc(n)+Di(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function Mc(n){return n<<0}function Nc(n){return Pc(n)+Di(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}var Cc=oo;function Ic(n){return 429496729!==n}function Bc(n,t){return[new Uint32Array(n,0,xc(t)),new Uint32Array(n,Lc(t),Sc(t)),new Uint32Array(n,Rc(t),Dc(t)),new Uint32Array(n,Pc(t),kc(t)),new Uint32Array(n,Nc(t),Mc(t))]}var Uc=Vi;var Fc=Yi;function Oc(n,t,r){return void 0!==Uc(t,r)?r:Fc(t,n.createTexture(),r)}function Yc(n,t,r){return li(function(t,r){return Oc(n,r,t)},r,t)}var Gc=Yc;function Hc(n){return wi(n[1])}function Wc(n){return Hc(n)[1]}function Vc(n){return n[2]}function jc(n){return wi(n[3])}function zc(n){return wi(n[6])}function qc(n,t){return 0===t?n.UNSIGNED_BYTE:1===t?n.UNSIGNED_SHORT_5_6_5:2===t?n.UNSIGNED_SHORT_4_4_4_4:n.UNSIGNED_SHORT_5_5_5_1}function Xc(n){return Di(n,Di(Uint8Array.BYTES_PER_ELEMENT,8))}var Jc=Xc;function Kc(n){return 1}function $c(n){return Di(n,1)}function Qc(n){return Di(n,1)}function Zc(n){return Di(n,1)}function na(n){return Di(n,1)}function ta(n){return 0+Di(Di(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ra(n){return Di(n,1)}function ea(n){return Di(n,1)}function ia(n){return ta(n)+Di(Di(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function oa(n){return Di(n,1)}function ua(n){return Di(n,1)}function ca(n){return ia(n)+Di(Di(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function aa(n){return Di(n,1)}function sa(n){return Di(n,1)}function fa(n){return ca(n)+Di(Di(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ha(n){return Di(n,1)}function la(n){return Di(n,1)}function va(n){return fa(n)+Di(Di(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function pa(n){return Di(n,1)}function da(n){return Di(n,1)}function _a(n){return va(n)+Di(Di(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ga(n){return Di(n,1)}function ya(n){return _a(n)+Di(Di(n,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ma(n){return Di(n,1)}var wa=Kc,Ea=$c;function ba(n,t){return[new Uint8Array(n,0,Qc(t)),new Uint8Array(n,ta(t),na(t)),new Uint8Array(n,ia(t),ea(t)),new Uint8Array(n,ca(t),ua(t)),new Uint8Array(n,fa(t),sa(t)),new Uint8Array(n,va(t),la(t)),new Uint8Array(n,_a(t),da(t)),new Uint8Array(n,ya(t),ga(t))]}function Ta(n){return wi(n[15])}var Aa=Vi,xa=Yi;function Sa(n,t){return eo(Zc(n),t)}function La(n,t){return eo(ra(n),t)}function Da(n,t){return eo(oa(n),t)}function Ra(n,t){return eo(aa(n),t)}function ka(n,t){return eo(Ea(n),t)}function Pa(n,t){return 1===eo(ma(n),t)}function Ma(n,t){return eo(ha(n),t)}function Na(n,t){return eo(pa(n),t)}var Ca=function(n,t){return Lt(function(n){var r=n[3];return Cn(function(n){return function(n,t,r){var e=Ta(r);return xa(n,t,e[8]),r}(r,n,t)},Nr(Ju([n[0],n[1],n[2]],function(n){return function(n,t){return Pa(n,wi(Ta(t)[7]))}(r,n)},t)))},K(n))};function Ia(n){return Di(n,1)}function Ba(n,t){return Jc(n)+0|0}function Ua(n){return Di(n,1)}function Fa(n){return Di(n,1)}function Oa(n,t){return(Jc(n)+0|0)+Di(Di(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Ya(n){return Di(n,1)}function Ga(n){return Di(n,1)}function Ha(n,t){return Oa(n,t)+Di(Di(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Wa(n){return Di(n,1)}function Va(n){return Di(n,1)}function ja(n,t){return Ha(n,t)+Di(Di(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function za(n){return Di(n,1)}function qa(n){return Di(n,1)}function Xa(n,t){return ja(n,t)+Di(Di(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Ja(n){return Di(n,1)}function Ka(n){return Di(n,1)}function $a(n,t){return Xa(n,t)+Di(Di(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function Qa(n){return Di(n,1)}function Za(n){return Di(n,1)}function ns(n,t){return $a(n,t)+Di(Di(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function ts(n){return Di(n,1)}function rs(n,t){return ns(n,t)+Di(Di(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function es(n){return Di(n,1)}function is(n){return Di(n,1)}function os(n,t){return rs(n,t)+Di(Di(t,1),Uint8Array.BYTES_PER_ELEMENT)|0}function us(n){return Di(n,1)}function cs(n){return Di(n,1)}function as(n,t){return os(n,t)+Di(Di(t,1),Uint16Array.BYTES_PER_ELEMENT)|0}function ss(n){return Di(n,1)}var fs=Kc,hs=$c;function ls(n,t,r){return[new Uint8Array(n,Ba(t),Ia(r)),new Uint8Array(n,Oa(t,r),Fa(r)),new Uint8Array(n,Ha(t,r),Ga(r)),new Uint8Array(n,ja(t,r),Va(r)),new Uint8Array(n,Xa(t,r),qa(r)),new Uint8Array(n,$a(t,r),Ka(r)),new Uint8Array(n,ns(t,r),Za(r)),new Uint8Array(n,rs(t,r),ts(r)),new Uint16Array(n,os(t,r),is(r)),new Uint16Array(n,as(t,r),cs(r))]}function vs(n){return wi(n[16])}function ps(n,t){return _i(function(r){var e=Bi(t),i=e[1],o=Mu(n).textureData,u=jc(i),c=function(n){return wi(n[4])}(i);return Ii(t,function(n,t,r,e){var i=ba(n,t);e[15]=[Ee(i[0]),Ee(i[1]),Ee(i[2]),Ee(i[3]),Ee(i[4]),Ee(i[5]),Ee(i[6]),Ee(i[7]),Hi(0),Hi(0),Hi(0)];var o=ls(n,t,r);return e[16]=[Ee(o[0]),Ee(o[1]),Ee(o[2]),Ee(o[3]),Ee(o[4]),Ee(o[5]),Ee(o[6]),Ee(o[7]),Ee(o[8]),Ee(o[9]),void 0,Hi(0),Hi(0)],e}(o.buffer,u,c,e))})}function ds(n,t){return _i(function(r){var e=Bi(t),i=Mu(n).textureData.arrayBufferViewSourceTextureData.sourceMap;return Ii(t,function(n,t){var r=vs(t),e=ye.a(t);return e[16]=[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],n,r[11],r[12]],e}(i,e))})}function _s(n,t){return _i(function(r){var e=Bi(t),i=Mu(n).textureData,o=Ta(e),u=vs(e);return e[15]=[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],Gc(Ni(e[4]),gi(0,i.basicSourceTextureData.index-1|0),o[9]),o[10]],e[16]=[u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],Gc(Ni(e[4]),gi(0,i.arrayBufferViewSourceTextureData.index-1|0),u[11]),u[12]],e})}function gs(n,t,r){var e=Bi(r),i=Mu(t).textureData;return Nr(Fn(function(n){return Ii(r,n),0},pi([ps(t,r),Ca(i.basicSourceTextureData.needAddedImageDataArray,e),ds(t,r),_s(t,r)])).then(function(n){return Promise.resolve(t)}))}function ys(n){return qe(function(t){return ze(de("data##renderData exist","not"),function(t){return Qe(n.renderData)})},ai(ci)),!0===n.renderData.isRender}function ms(n,t){return t.drawElements(n[0],n[3],n[1],0),0}function ws(n,t,r){var e=n[2],i=n[1],o=Pe(i,e);if(void 0!==o)return Ae(o);var u=t(n[0],i,r);return Re(i,u,e),u}function Es(n,t,r){return r.getAttribLocation(n,t)}function bs(n,t,r){return r.getUniformLocation(n,t)}function Ts(n,t,r,e){return ws([n,t,r],Es,e)}function As(n,t,r,e){return ws([n,t,r],bs,e)}function xs(n,t,r){return Yi(n,t,r[0]),r}function Ss(n,t,r){return Yi(n,t,r[1]),r}function Ls(n){return null!==n}var Ds=Wi;function Rs(n,t){return Ds(n,t[5][9])}function ks(n,t,r){return Rs(t,r)?n.UNSIGNED_INT:n.UNSIGNED_SHORT}function Ps(n,t,r){return Rs(t,r)?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT}function Ms(n,t,r){return n.shaderSource(r,t),n.compileShader(r),ce(function(e){if(!1===n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r),o=String(i)+"";ae(function(n){return ue("shader info log",o)},ai(ci));var u=String(t)+"";return ae(function(n){return ue("glsl source",u)},ai(ci))}return 0},ai(ci)),r}function Ns(n,t,r,e){var i=Ms(r,n,r.createShader(r.VERTEX_SHADER)),o=Ms(r,t,r.createShader(r.FRAGMENT_SHADER));return r.attachShader(e,i),r.attachShader(e,o),r.bindAttribLocation(e,0,"a_position"),function(n,t){t.linkProgram(n),ce(function(r){if(!1===t.getProgramParameter(n,t.LINK_STATUS)){var e=t.getProgramInfoLog(n);return le(he("link program error",String(e)+"","","",""))}return 0},ai(ci))}(e,r),r.deleteShader(i),r.deleteShader(o),e}function Cs(n,t,r){return function(n,t,r){var e=r[4],i=e[1];return void 0!==i&&t===Ae(i)?r:(e[1]=Ee(t),n.useProgram(t),r)}(n,function(n,t){return Xe(function(n){return ze(de("program exist","not"),function(t){return Qe(n)})},ai(ci),Wi(n,t[0]))}(t,r[4]),r)}function Is(n,t,r,e){var i=t[1],o=t[0],u=wc(o,i);if(u[0])return u[1];var c=r(n,t[2],e);return Yi(o,c,i),c}function Bs(n,t,r){var e=function(n,t){return sc(n,t[5])}(n,r[1]);return n.bindBuffer(n.ARRAY_BUFFER,e),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e}function Us(n,t,r,e){return function(n,t,r,e){var i=t[1],o=t[0],u=wc(o,i);if(u[0])return u[1];var c=r[0](n,r[1](o,e),e);return Yi(o,c,i),c}(n,[t[0],t[1]],[Bs,r],e)}function Fs(n){return n<<0}function Os(n){return n<<0}function Ys(n){return 0+Di(n<<0,Uint8Array.BYTES_PER_ELEMENT)|0}function Gs(n){return n<<0}function Hs(n,t){return eo(Gs(n),t)}function Ws(n,t,r){switch(Hs(t,r[9][0])){case 0:return n.POINTS;case 1:return n.LINES;case 2:return n.LINE_LOOP;case 3:return n.LINE_STRIP;case 4:return n.TRIANGLES;case 5:return n.TRIANGLE_STRIP;case 6:return n.TRIANGLE_FAN}}function Vs(n,t,r){var e=fc(n,r[1]);return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),e}function js(n,t,r){var e=fc(n,r[1]);return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),e}function zs(n){return Di(n,3)}function qs(n){return n<<1}function Xs(n){return 0+Di(Di(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function Js(n){return Xs(n)+Di(n<<1,Float32Array.BYTES_PER_ELEMENT)|0}function Ks(n){return n<<0}function $s(n){return Js(n)+Di(Di(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function Qs(n){return n<<0}function Zs(n){return $s(n)+Di(n<<0,Uint16Array.BYTES_PER_ELEMENT)|0}function nf(n){return n<<1}function tf(n){return Zs(n)+Di(n<<0,Uint32Array.BYTES_PER_ELEMENT)|0}function rf(n){return n<<1}function ef(n,t){return tf(n)+Di(t<<1,Uint32Array.BYTES_PER_ELEMENT)|0}function of(n){return n<<1}function uf(n,t){return ef(n,t)+Di(t<<1,Uint32Array.BYTES_PER_ELEMENT)|0}function cf(n){return n<<1}function af(n,t){return uf(n,t)+Di(t<<1,Uint32Array.BYTES_PER_ELEMENT)|0}function sf(n){return n<<1}function ff(n,t){return Xe(function(n){var t=n[1],r=n[0];return ze(de("has info data","not"),function(n){return Qe(r),Qe(t)}),ze(de("endIndex >= startIndex","is "+String(t)),function(n){return ui[7](t,r)})},ai(ci),[oo(n,t),oo(n+1|0,t)])}function hf(n,t,r){var e,i,o,u=ff(n,r);return e=t,i=u[0],o=u[1],e.subarray(i,o)}function lf(n,t){var r,e,i,o,u,c,a,s=t[5];return r=sf(n),e=s[3],i=s[8],a=ff(r,i),o=e,u=a[0],c=a[1],o.subarray(u,c)}function vf(n,t){var r,e,i,o,u,c,a,s=t[5];return r=sf(n),e=s[4],i=s[8],a=ff(r,i),o=e,u=a[0],c=a[1],o.subarray(u,c)}function pf(n,t){var r=ff(sf(n),t[5][8]);return r[1]-r[0]|0}function df(n,t){return r=sf(n),(e=ff(r,t))[1]>e[0];var r,e}function _f(n,t){return t[n]}function gf(n,t){return[n[t],n[t+1|0],n[t+2|0]]}function yf(n,t,r){return r[t]=r[t]+n[0],r[t+1|0]=r[t+1|0]+n[1],r[t+2|0]=r[t+2|0]+n[2],r}function mf(n,t){return function(n){for(var t=n.length,r=0,e=n;;){var i=r;if(i>=t)return e;var o=e[i],u=e[i+1|0],c=e[i+2|0],a=Math.sqrt(o*o+u*u+c*c);0===a?(e[i]=0,e[i+1|0]=0,e[i+2|0]=0):(e[i]=o/a,e[i+1|0]=u/a,e[i+2|0]=c/a),r=i+3|0}}(function(r,e,i){for(;;){var o=i,u=e;if(u>=r)return o;var c=Di(_f(u,t),3),a=Di(_f(u+1|0,t),3),s=Di(_f(u+2|0,t),3),f=gf(n,c),h=gf(n,a),l=Yu(Ou(0,gf(n,s),h),Ou(0,f,h));i=yf(l,s,yf(l,a,yf(l,c,o))),e=u+3|0}}(function(n){return n.length}(t),0,new Float32Array(n.length)))}function wf(n,t){var r=t[5];return hf(sf(n),r[0],r[5])}function Ef(n,t){var r,e;return(r=n,e=t[5],df(r,e[7]))?function(n,t){var r=t[5];return hf(sf(n),r[2],r[7])}(n,t):function(n,t){var r=Rs(n,t);return mf(wf(n,t),r?vf(n,t):lf(n,t))}(n,t)}function bf(n,t){return Xe(function(n){return ze(de("instance attribute send record exist","not"),function(t){return Qe(n)})},ai(ci),Wi(n,t[1]))}function Tf(n,t){var r=t[5];return hf(sf(n),r[1],r[6])}function Af(n){switch(n){case"vec2":return 2;case"vec3":return 3;default:return le(he("getBufferSizeByType","invalide type_: "+String(n),"","",""))}}function xf(n,t,r){var e,i,o;return(i=!0,(e=t)>=(o=r).length||Ge(o[e],i))?(n.enableVertexAttribArray(t),r[t]=!0,0):0}function Sf(n,t,r){return n.uniformMatrix3fv(t,!1,r),0}function Lf(n,t,r){return n.uniformMatrix4fv(t,!1,r),0}var Df=Vi;function Rf(n,t,r){var e=r[2],i=r[1],o=r[0],u=Ce(t,n);return u[0]?function(n,t,r,e){var i=!1;return n[0]!==t&&(n[0]=t,i=!0),n[1]!==r&&(n[1]=r,i=!0),n[2]!==e&&(n[2]=e,i=!0),i}(u[1],o,i,e):(Re(t,[o,i,e],n),!0)}function kf(n,t,r){var e=Ce(t,n);return!(e[0]&&e[1]===r)&&(Re(t,r,n),!0)}function Pf(n,t,r,e){return kf(t,r[0],e)?(n.uniform1f(r[1],e),0):0}function Mf(n,t,r,e){return kf(t,r[0],e)?(n.uniform1i(r[1],e),0):0}function Nf(n,t,r,e){qe(function(n){return ze(de("valueArr.length === 3","not"),function(n){return ui[0](e.length,3)})},ai(ci));var i=ye.b(e,0),o=ye.b(e,1),u=ye.b(e,2);return Rf(t,r[0],[i,o,u])?(n.uniform3f(r[1],i,o,u),0):0}function Cf(n,t,r,e){return Rf(t,r[0],e)?(n.uniform3f(r[1],e[0],e[1],e[2]),0):0}function If(n){switch(n){case"mat3":return Sf;case"mat4":return Lf;default:return le(he("getSendNoCachableDataByType","unknown type:"+String(n),"","",""))}}function Bf(n){switch(n){case"float":return Pf;case"float3":return Nf;case"sampler2D":return Mf;case"vec3":return Cf;default:return le(he("getSendCachableDataByType","unknown type:"+String(n),"","",""))}}function Uf(n,t){return Xe(function(n){return ze(de("uniform send record exist","not"),function(t){return Qe(n)})},ai(ci),Wi(n,t))}function Ff(n,t,r){return[yi([n[0],r,If(n[1])],t[0]),t[1],t[2],t[3],t[4],t[5],t[6]]}function Of(n,t){return Uf(n,t[3])}function Yf(n,t,r){return[t[0],yi([n[0],n[1],n[2],r,Bf(n[3])],t[1]),t[2],t[3],t[4],t[5],t[6]]}function Gf(n,t,r){return[t[0],yi([n[0],n[1],n[2],r,Mf],t[1]),t[2],t[3],t[4],t[5],t[6]]}function Hf(n){return[n[6],n[7],n[8],n[12],n[13],n[14],[[(t=n[22],t[0][0])]]];var t}function Wf(n){return[n[3][10],n[0],n[12],n[13]]}function Vf(n,t,r,e){var i=r[1],o=r[0],u=o[3],c=t[1],a=t[0],s=0;switch(n){case 0:return Us(a,[c,o[0]],i[0],e);case 1:return Us(a,[c,o[2]],i[2],e);case 2:return Us(a,[c,o[1]],i[1],e);case 3:return Rs(c,e)?function(n,t,r,e){return Is(n,[t[0],t[1],r],js,e)}(a,[c,u],i[4](c,e),e):function(n,t,r,e){return Is(n,[t[0],t[1],r],Vs,e)}(a,[c,u],i[3](c,e),e);case 4:case 5:s=1}if(1===s)return le(he("_getOrCreateBuffer","unknown buffer: "+String(n),"","",""))}var jf=function(n,t,r,e){var i,o,u=e[1],c=[[u[0],u[1],u[2],u[3]],[wf,Tf,Ef,lf,vf]],a=t[1],s=[n,a];return si(function(t){var i=Vf(t[2],s,c,e);return t[3](n,[t[1],t[0]],i,r)},(i=t[0],o=e[3],Xe(function(n){return ze(de("attribute send record exist","not"),function(t){return Qe(n)})},ai(ci),Wi(i,o[0])))),e};function zf(n,t,r,e){var i,o,u=t[1];return si(function(t){return t[4](n,t[0],[t[1],t[2]],t[3](u,r))},(i=t[0],o=e[3],Uf(i,o[4]))),e}function qf(n,t,r,e){var i=t[2],o=t[1],u=Cs(n,i,e),c=Wf(u),a=jf(n,[i,t[4]],c,u),s=Hf(a);!function(n,t,r){var e=r[0],i=t[1];si(function(t){var r=t[0];return Ls(r)?t[2](n,r,t[1](i,e)):0},Of(t[0],r[1][3]))}(n,[i,t[0]],[s,a]);var f=a[3],h=f[11],l=0;if(void 0!==h){var v=h;if(v[0]===o&&v[1]===i)return a;l=1}else l=1;if(1===l)return f[11]=[o,i],r(n,o,zf(n,[i,o],Hf(a),a))}function Xf(n,t,r,e){return ms([Ws(n,t,e),ks(n,r,e),Ps(0,r,e),pf(r,e)],n)}function Jf(n){return n<<0}function Kf(n,t){return oo(n<<0,t)}function $f(n,t,r){return fo(n<<0,t,r)}var Qf=Di;function Zf(n,t,r){return Di(n,r)+t|0}function nh(n){return Di(n,3)}function th(n){return 0+Di(Jf(n),Uint32Array.BYTES_PER_ELEMENT)|0}function rh(n){return Di(n,3)}function eh(n,t){return th(n)+Di(Di(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function ih(n){return n<<0}function oh(n,t){return eh(n)+Di(Qf(n,t),Uint32Array.BYTES_PER_ELEMENT)|0}function uh(n){return n<<0}function ch(n){return n<<0}function ah(n,t){return oh(n,t)+Di(n<<0,Uint8Array.BYTES_PER_ELEMENT)|0}function sh(n){return n<<0}function fh(n){return n<<0}function hh(n,t){return ah(n,t)+Di(n<<0,Uint8Array.BYTES_PER_ELEMENT)|0}function lh(n){return n<<0}var vh=Qf;function ph(n,t){return oo(Zf(n[0],n[1],n[2]),t)}function dh(n,t){return eo(uh(n),t)}var _h=ph;function gh(n){return 255!==n}function yh(n,t,r){var e=Vi(n,r);return void 0!==e&&Ae(e)===t}function mh(n){return n}function wh(n,t,r,e){return Ve(n,t)?e[0](n,r):e[1](function(n,t){return Xe(function(n){return ze(de("index should >= 0","is "+String(n)),function(t){return ui[7](n,0)})},ai(ci),n-t|0)}(n,t),r)}function Eh(n,t,r,e){var i=e[1],o=e[0];qe(function(n){return ze(de("unit should >= 0","is "+String(t)),function(n){return ui[7](t,0)})},ai(ci));var u=Uc(r,i);if(void 0!==u){if(yh(t,r,o))return e;var c=function(n,t,r){return qe(function(e){return ze(de("not cached",""),function(e){return Ke(yh(n,t,r))})},ai(ci)),Yi(n,t,r)}(t,r,o),a=n.TEXTURE_2D;return n.activeTexture(n.TEXTURE0+t|0),n.bindTexture(a,Ae(u)),[c,i]}return e}function bh(n,t){var r=t[2],e=r[10];return Eh(t[0],t[1],n,[e[10],e[9]]),r}function Th(n,t){var r=t[2],e=r[11];return Eh(t[0],t[1],n,[e[12],e[11]]),r}function Ah(n){return n.width}function xh(n){return n.height}function Sh(n,t){switch(t){case 0:return n.CLAMP_TO_EDGE;case 1:return n.MIRRORED_REPEAT;case 2:return n.REPEAT}}function Lh(n,t){switch(t){case 0:return n.RGB;case 1:return n.RGBA;case 2:return n.ALPHA;case 3:return n.LUMINANCE;case 4:return n.LUMINANCE_ALPHA;case 5:return n.RGB_S3TC_DXT1;case 6:return n.RGBA_S3TC_DXT1;case 7:return n.RGBA_S3TC_DXT3;case 8:return n.RGBA_S3TC_DXT5}}function Dh(n,t){switch(t){case 0:return n.NEAREST;case 1:return n.LINEAR;case 2:return n.NEAREST_MIPMAP_NEAREST;case 3:return n.LINEAR_MIPMAP_NEAREST;case 4:return n.NEAREST_MIPMAP_LINEAR;case 5:return n.LINEAR_MIPMAP_LINEAR}}function Rh(n){return 0==(n&(n-1|0))&&0!==n&&1!==n}function kh(n,t){switch(n){case 0:case 2:case 4:return t.NEAREST;case 1:case 3:case 5:return t.LINEAR}}function Ph(n){return n>=2}function Mh(n,t,r,i){var o,u,c,a,s,f=t[9],h=t[5],l=t[4],v=n[0],p=(o=t[0],u=t[1],!!Rh(o)&&Rh(u));return e.c(i[1],v,t[8],r[1]),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,v.NONE),function(n,t,r,e){var i=e[3],o=e[2];r?(n.texParameteri(t,n.TEXTURE_WRAP_S,e[0]),n.texParameteri(t,n.TEXTURE_WRAP_T,e[1]),n.texParameteri(t,n.TEXTURE_MAG_FILTER,Dh(n,o)),n.texParameteri(t,n.TEXTURE_MIN_FILTER,Dh(n,i))):(n.texParameteri(t,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(t,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(t,n.TEXTURE_MAG_FILTER,kh(o,n)),n.texParameteri(t,n.TEXTURE_MIN_FILTER,kh(i,n)))}(v,f,p,[t[2],t[3],l,h]),e.c(i[0],v,[f,t[6],t[7]],n[2]),p&&(Ph(l)||Ph(h))&&v.generateMipmap(f),c=n[1],a=0,s=r[0],so($c(c),a,s),0}function Nh(n,t,r,e){return 1===e(n,r)}var Ch=function(n,t,r){return function(n,t){var r=t[3];return n.texImage2D(t[0],t[1],r,r,t[4],t[2]),0}(n,[t[0],0,r,t[1],t[2]])};function Ih(n,t){return eo(hs(n),t)}function Bh(n,t,r,e){return function(n,t,r){var e=r[1],i=r[0],o=t[3];return qe(function(n){return ze(de("width/height shouldn't be 0","width is "+String(i)+"; height is "+String(e)),function(n){return ui[3](i,0),ui[3](e,0)})},ai(ci)),n.texImage2D(t[0],t[1],o,i,e,0,o,t[4],t[2]),0}(n,[t[0],0,e,t[1],t[2]],r)}function Uh(n,t,r){var e,i,o=r[0],u=r[1],c=Aa(t,o[10]);if(void 0!==c){var a=(e=t,i=o[8],io(us(e),i)),s=function(n,t){return io(ss(n),t)}(t,o[9]),f=Sh(n,function(n,t){return eo(Ua(n),t)}(t,o[0])),h=Sh(n,function(n,t){return eo(Ya(n),t)}(t,o[1])),l=function(n,t){return eo(Wa(n),t)}(t,o[2]),v=function(n,t){return eo(za(n),t)}(t,o[3]),p=Lh(n,function(n,t){return eo(Ja(n),t)}(t,o[4])),d=qc(n,function(n,t){return eo(Qa(n),t)}(t,o[5])),_=function(n,t){return 1===eo(es(n),t)}(t,o[7]),g=n.TEXTURE_2D,y=[a,s];return Mh([n,t,Ae(c)],[a,s,f,h,l,v,p,d,_,g],[o[6],u],[function(n,t,r){return Bh(n,t,y,r)},o[13]]),[o,u]}return[o,u]}function Fh(n,t){var r=t[1],e=r[21],i=r[10];return function(n,t){return Nh(n,wa(0),t[6],ka)}(n,i)&&function(n,t,r){var e=r[0],i=r[1],o=Aa(t,e[8]);if(void 0!==o){var u=Ae(o);return Mh([n,t,u],[Ah(u),xh(u),Sh(n,Sa(t,e[0])),Sh(n,La(t,e[1])),Da(t,e[2]),Ra(t,e[3]),Lh(n,Ma(t,e[4])),qc(n,Na(t,e[5])),Pa(t,e[7]),n.TEXTURE_2D],[e[6],i],[Ch,e[11]]),[e,i]}}(t[0],n,[i,e]),r}function Oh(n,t){var r=t[1],e=r[21],i=r[11];return function(n,t){return Nh(n,fs(0),t[6],Ih)}(n,i)&&Uh(t[0],n,[i,e]),r}function Yh(n,t,r){return wh(t,r[11][14],[n,r],[Fh,Oh])}function Gh(n){return wi(n[2])}function Hh(n,t,r){var e=r[1],i=r[0],o=n[2],u=n[0];if(gh(o)){var c=function(n,t,r,e){return r([n,t,Gh(e[1])],e[0])}(n[1],o,t,[i,e]);return[i,e,Yh(u,c,function(n,t,r,e){return qe(function(n){return ze(de("unit should >= 0","is "+String(t)),function(n){return ui[7](t,0)})},ai(ci)),wh(r,e[11][14],[n,t,e],[bh,Th])}(u,o,c,r[2]))]}return r}function Wh(n,t,r){var e=r[7];return Hh([n,t,dh(t,e[3])],_h,[e[2],r[19],r])[2]}function Vh(n,t,r){return qf(n,t,Wh,r)}var jh=Ci;function zh(n,t,r){return Xe(function(n){return ze(de("shaderIndex should exist","not"),function(t){return ui[3](n,429496729)})},ai(ci),t(n,r))}function qh(n,t){return!!n&&Uu(t[0])}var Xh=Wi;function Jh(n){return qh((t=n[19],wi(t[0]))[0],n[16]);var t}var Kh=Di;function $h(n){return n<<0}function Qh(n,t){return 0+Di(Di(n,t),Uint32Array.BYTES_PER_ELEMENT)|0}var Zh=Di;function nl(n){return n<<0}var tl=Wi;function rl(n,t,r,e){var i=Zh(n,t);return Xe(function(n){var t=n[1],r=n[0];return ze(de("endIndex should <= objectInstanceTransformCollections->length","not"),function(n){return ui[11](t,e.length)}),ze(de("endIndex + 1 should >= startIndex","not"),function(n){return ui[7](t+1|0,r)})},ai(ci),[i,i+(r-1|0)|0])}function el(n,t,r){for(var e=n[3],i=t,o=rl(n[0],n[1],n[2],e),u=o[0],c=o[1];u<=c;++u)i=r(i,oo(u,e));return i}function il(n,t){var r,e=t[15],i=tl(n,e[0]);return[i,[n,(r=t[19],wi(r[1])[0]),i,e[1]]]}function ol(n,t,r,e){var i=t[4],o=t[3],u=t[2],c=r(n,[t[0],t[1],u,o,i],e);Xf(n,o,i,c);var a=Of(u,c[3]),s=Ws(n,o,c),f=ks(n,i,c),h=Ps(0,i,c),l=pf(i,c),v=il(t[5],c),p=Hf(c);return function(n,t){for(var r=n[3],e=rl(n[0],n[1],n[2],r),i=e[0],o=e[1];i<=o;++i)t(oo(i,r))}(v[1],function(t){return si(function(r){var e=r[0];return Ls(e)?r[2](n,e,r[1](t,p)):0},a),ms([s,f,h,l],n),0}),c}function ul(n,t,r,e){var i=Vi(n,e);if(void 0!==i){var o=i;return o.length>=r?e:(o.push(t),e)}return Yi(n,[t],e)}function cl(n,t,r){return ul(n.length,n,t,r)}function al(n,t){var r=Vi(n,t);if(void 0!==r){var e=r;return 0!==e.length?Te(e.pop()):void 0}}function sl(n,t,r){var e=function(n,t){return sc(n,t[7])}(n,r[1]);return n.bindBuffer(n.ARRAY_BUFFER,e),n.bufferData(n.ARRAY_BUFFER,t,n.DYNAMIC_DRAW),e}function fl(n){return qe(function(t){return ze(de("capacity should be a multiplier of 4","is "+String(n)),function(t){return ui[0](n%4,0)})},ai(ci)),n/4|0}function hl(n,t,r){var e=Vi(n,r);return void 0!==e?Ae(e):t}function ll(n,t,r){var e=t[1],i=n[1],o=Vi(i,e);if(void 0!==o)return Ae(o);var u=sl(n[0],hl(i,n[2],t[0]),r);return Yi(i,u,e),u}function vl(n,t,r,e){var i=r[1],o=hl(n,t,r[0]),u=Vi(n,i);if(void 0!==u)return Ae(u);var c=(a=fl(o),s=e[2],al(a,s[0]));if(void 0!==c)return Ae(c);var a,s,f=new Float32Array(fl(o));return Yi(n,f,i),f}function pl(n,t,r,e){for(var i=r[2],o=t[0],u=n[2],c=n[1],a=n[0],s=hl(c,n[3],i),f=!1;s<u;)s<<=1,f=!0;if(f){!function(n,t,r){Yi(n,t,r)}(c,s,i),a.deleteBuffer(o);var h=sl(a,s,e);Yi(c,h,r[0]);var l=new Float32Array(fl(s));return Yi(c,l,r[1]),[h,l]}return[o,t[1]]}var dl=Yi;function _l(n,t){return function(n,t){return 1===eo(nl(n),t)}(n,t[2])}function gl(n,t,r){return[r[0],r[1],r[2],r[3],r[4],dl(n,t,r[5])]}function yl(n,t){var r=t[5];return Ec(n,r[0],r[1])}function ml(n,t){var r=t[5];return bc(n,r[0],[r[1],r[2]])}function wl(n,t,r,e){var i=e[1],o=e[0];return fi(function(t,e){return function(n,t,r){var e=t[0],i=e[0],o=n[0];return o.vertexAttribPointer(i,e[1],o.FLOAT,!1,t[1],e[2](t[2])),n[1].vertexAttribDivisorANGLE(i,1),xf(o,i,r[0]),r}(n,[t,r,e],o)},bf(t,i[3])),i}function El(n,t,r,e){var i=t[2],o=i[2],u=i[1],c=i[0],a=t[1],s=a[0],f=t[0],h=f[0],l=n[1],v=ll([h,l,s],[c,u],e),p=vl(l,s,[c,o],e),d=pl([h,l,Di(a[4],a[1]),s],[v,p],[u,o,c],e),_=d[1],g=Hf(e);return function(n,t,r,e,i){el(n,i,function(n,i){return r(i,t,e,n)})}(a[3],_,r,g,r(n[0],_,g,0)),function(n,t,r,e){var i,o,u;return i=n[0],o=r[1],u=r[2],i.bindBuffer(i.ARRAY_BUFFER,u),i.bufferSubData(i.ARRAY_BUFFER,0,o),wl(n,t,r[0],[e[0],e[1]])}([h,f[1]],f[2],[a[2],_,d[0]],[Wf(e),e])}function bl(n,t,r,e){var i=t[2],o=t[1],u=t[0],c=u[0],a=n[1];if(function(n,t){var r=Vi(n,t);return void 0!==r&&r}(a,e[15][5])){!function(n,t){n.bindBuffer(n.ARRAY_BUFFER,t)}(c,ll([c,a,o[0]],[i[0],i[1]],e));var s=Wf(e);return wl([c,u[1]],u[2],o[2],[s,e])}var f=El(n,t,r,e),h=ye.a(f);return h[15]=gl(a,!0,f[15]),h}function Tl(n){var t=n[1],r=n[15];return[r[3],t[4],r[4]]}function Al(n,t,r,e){var i,o=(i=e[16],qe(function(n){return ze(de("extensionInstancedArrays exist","not"),function(n){return Ze(i[0])})},ai(ci)),wi(i[0])),u=il(r[0],e),c=0|u[0]+1;return[[n,o,t],[r[1],r[2],r[3],u[1],c],Tl(e)]}function xl(n,t,r,e){var i=r[1],o=t[0],u=o[5],c=o[4],a=o[3],s=o[2],f=o[0],h=function(n,t,r,e){return r(n,t,e)}(n,[f,o[1],s,a,c],r[0],e),l=Al(n,s,[u,t[1],t[2],t[3]],h),v=l[0],p=v[1],d=v[0],_=_l(u,h[15])?bl([f,u],l,i,h):function(n,t,r,e){var i=ye.a(e);return El(n,t,r,(i[15]=gl(n[1],!1,e[15]),i))}([f,u],l,i,h);return function(n,t){t.drawElementsInstancedANGLE(n[0],n[3],n[1],0,n[4])}([Ws(d,a,_),ks(d,c,_),Ps(0,c,_),pf(c,_),l[1][4]],p),function(n,t,r){return si(function(n){return t.vertexAttribDivisorANGLE(n[0],0),0},bf(n,r[3])),r}(s,p,_)}function Sl(n,t,r,e){return vo([t,e],[yl(n,r),0],16)}function Ll(n,t,r,e){return Sl(n,t,r,e),e+16|0}function Dl(n,t,r){return Jh(r)?function(n,t,r){return xl(n,[t,4096,64,64],[Vh,Ll],r)}(n,t,r):function(n,t,r){return ol(n,t,Vh,r)}(n,t,r)}function Rl(n,t){return Kf(n,t[7][0])}function kl(n,t,r){var e,i;return jh(n,(e=t,i=r[7][4],0===eo(sh(e),i)),r[18]),r}function Pl(n){return n[21][2]}function Ml(n){return wi(n[18])}function Nl(n){return wi(n[20])}function Cl(n){return wi(n[1])}function Il(n){return wi(n[2])}function Bl(n){return n[0][0][0]}function Ul(n){return mh(jc(n[1]))}function Fl(n){return wi(n[12])}function Ol(n){return wi(Fl(n)[0])}function Yl(n){return wi(Fl(n)[3])}function Gl(n){return wi(Fl(n)[4])}function Hl(n){return wi(Fl(n)[5])}function Wl(n){return wi(n[13])}function Vl(n){return wi(Wl(n)[0])}function jl(n){return wi(Wl(n)[5])}function zl(n){return wi(Wl(n)[6])}function ql(n,t,r){var e=r[0];return 1!==e?0!==e?le(he("setFlipY","unknown browser","","","")):0:(n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t),0)}function Xl(n){return wi(n[19])}function Jl(n){return wi(n[2])}function Kl(n){return wi(n[0])}function $l(n){return wi(n[1])}function Ql(n){return wi(n[2])}function Zl(n){var t,r=n[1],e=n[3],i=n[4],o=n[5],u=n[6],c=n[8],a=n[11],s=n[22],f=n[23],h=n[24],l=n[30],v=wi(n[17]),p=Ml(n),d=Fl(n),_=Wl(n),g=function(n){return wi(n[14])}(n),y=Xl(n),m=Nl(n),w=Ta(n),E=vs(n),b=function(n){return wi(n[25])}(n),T=Xu(n);return[[[Bl(n)]],f,s,c,u,[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9]],Pl(n),[Ol(n),wi(d[1]),wi(d[2]),Yl(n),Gl(n),Hl(n)],[Vl(n),wi(_[1]),wi(_[2]),wi(_[3]),wi(_[4]),jl(n),zl(n)],[g[0]],[wi(w[0]),wi(w[1]),wi(w[2]),wi(w[3]),wi(w[4]),wi(w[5]),wi(w[6]),wi(w[7]),w[8],w[9],w[10],ql],[wi(E[0]),wi(E[1]),wi(E[2]),wi(E[3]),wi(E[4]),wi(E[5]),wi(E[6]),wi(E[7]),wi(E[8]),wi(E[9]),wi(E[10]),E[11],E[12],ql,Ul(n)],[y[0],y[3],y[4],Jl(y),(t=y,wi(t[1]))],[m[0],m[3],m[4],m[5],m[6],m[7],m[8],Il(m),Cl(m)],[v[0],v[4],v[5]],[Kl(a),$l(a),Ql(a),a[3],a[4],a[5]],e,h,i,[r[0],[Wc(r)],Vc(r)],[b[0]],[T[0]],l,o]}function nv(n,t){var r=function(n){return n[21][0]}(t);if(void 0!==r){var e=r;return function(n,t,r){var e=t[5],i=t[4],o=t[3],u=t[2],c=t[1];li(function(t,r){var a=Cc(r,c),s=Cc(r,u),f=zh(s,Rl,t),h=Cc(r,o),l=Cc(r,i),v=Cc(r,e),p=kl(n,s,t);if(Ic(v))return Dl(n,[a,s,f,h,l,v],p);var d=Vh(n,[a,s,f,h,l],p);return Xf(n,h,l,d),d},r,t[0])}(n,[e[0],e[1],e[2],e[3],e[4],e[5]],Zl(t)),t}return t}function tv(n,t,r){return _i(function(n){var e=Bi(r);if(ys(Mu(t))){var i=Ni(e[4]);return Ii(r,nv(i,e)),t}return t})}var rv=r(4);function ev(n){return n[29][0]}function iv(n,t){var r=t[29];return t[29]=[n,r[1],r[2]],t}function ov(n){return n[29][1]}function uv(n,t){var r=t[29];return t[29]=[r[0],n,r[2]],t}function cv(n){return n[29][2]}var av=Go,sv=Ho,fv=Ku;function hv(n,t){return t[27]=n,t}function lv(n,t,r,e){return hv(du(n,t,r,fv(e)),e)}function vv(n,t,r,e){return hv(_u(n,t,r,fv(e)),e)}function pv(n,t,r){var e=gu(n,t,fv(r));return[hv(e[0],r),e[1]]}function dv(n,t,r){return hv(yu(n,t,fv(r)),r)}function _v(n,t,r,e){var i=mu(n,t,r,fv(e));return[hv(i[0],e),i[1]]}function gv(n,t,r,e){var i=wu(n,t,r,fv(e));return[hv(i[0],e),i[1]]}function yv(n,t,r,e){var i=Eu([n[0],n[1]],[t[0],t[1]],[r[0],r[1]],fv(e));return[hv(i[0],e),i[1],i[2]]}function mv(n,t,r,e){var i=bu([n[0],n[1]],[t[0],t[1],t[2]],[r[0],r[1]],fv(e));return[hv(i[0],e),i[1],i[2]]}function wv(n,t){return hv(av(n,fv(t)),t)}function Ev(n){return hv(sv(fv(n)),n)}function bv(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t).imguiData,o=Ei(i.imguiFunc)||Ei(i.customData)?Ku(e):qu(rv.b(bi(i.customData)),rv.a(bi(i.imguiFunc)),Ku(e));e[27]=o;var u=ku(Ni(e[4]),i.ioData,function(n){return n[28][0]}(e),[fv,hv],e);return Ii(r,u),t})}function Tv(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t).viewportData;return e[4]=function(n,t,r){var e=r[8],i=t[3],o=t[2],u=t[1],c=t[0],a=0;if(void 0!==e){var s=e;if(s[0]===c&&s[1]===u&&s[2]===o&&s[3]===i)return r;a=1}else a=1;if(1===a)return n.viewport(c,u,o,i),[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],[c,u,o,i]]}(Ni(e[4]),i,e[4]),Ii(r,e),t})}function Av(n,t,r){return[new Float32Array(n,0,zs(t)),new Float32Array(n,Xs(t),qs(t)),new Float32Array(n,Js(t),zs(t)),new Uint16Array(n,$s(t),Ks(t)),new Uint32Array(n,Zs(t),Qs(t)),new Uint32Array(n,tf(t),nf(r)),new Uint32Array(n,ef(t,r),rf(r)),new Uint32Array(n,uf(t,r),of(r)),new Uint32Array(n,af(t,r),cf(r))]}function xv(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t),o=i.geometryData,u=o.buffer,c=o.indicesTypeMap,a=i.bufferData.geometryPointCount,s=i.bufferData.geometryCount;return Ii(r,function(n,t,r,e){var i=Av(n,t[0],t[1]);return e[18]=[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],r],e}(u,[a,s],c,e)),t})}function Sv(n,t,r){return[new Uint32Array(n,0,Kh(t,r)),new Uint8Array(n,Qh(t,r),$h(t))]}function Lv(n,t,r){return _i(function(n){var e=Bi(r),i=e[1],o=Mu(t).sourceInstanceData,u=function(n,t,r,e){var i=Sv(n,t,r),o=e[11];return e[11]=[o[0],Ee(i[0]),Ee(i[1]),o[3],o[4],o[5]],e}(o.buffer,Hc(i)[0],Wc(i),e),c=u[11];return u[11]=[o.objectInstanceTransformIndexMap,c[1],c[2],c[3],c[4],c[5]],Ii(r,u),t})}function Dv(n,t,r,e){return ze(de(n,"not"),function(n){var r=Vi(t,e);return void 0!==r?Ke(li(function(n,t){var r=n[0];return void 0!==Vi(t,r)?[r,!0]:[Yi(t,!0,r),n[1]]},[Hi(0),!1],r)[1]):0})}function Rv(n){return Di(n,3)}function kv(n){return Di(n,3)}function Pv(n){return 0+Di(Di(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function Mv(n){return n<<0}function Nv(n){return Pv(n)+Di(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function Cv(n){return n<<0}function Iv(n){return Nv(n)+Di(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function Bv(n){return n<<0}function Uv(n){return Iv(n)+Di(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function Fv(n){return n<<0}function Ov(n){return Uv(n)+Di(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function Yv(n){return n<<0}function Gv(n,t){return[new Float32Array(n,0,kv(t)),new Float32Array(n,Pv(t),Mv(t)),new Float32Array(n,Nv(t),Cv(t)),new Float32Array(n,Iv(t),Bv(t)),new Float32Array(n,Uv(t),Fv(t)),new Float32Array(n,Ov(t),Yv(t))]}function Hv(n,t){return[new Uint8Array(n,0,Fs(t)),new Uint8Array(n,Ys(t),Os(t))]}function Wv(n,t,r){return[new Uint32Array(n,0,Jf(t)),new Float32Array(n,th(t),nh(t)),new Uint32Array(n,eh(t),vh(t,r)),new Uint8Array(n,oh(t,r),ih(t)),new Uint8Array(n,ah(t,r),ch(t)),new Float32Array(n,hh(t,r),fh(t))]}function Vv(n){return Di(n,3)}function jv(n){return Di(Jf(n),Uint32Array.BYTES_PER_ELEMENT)}function zv(n){return Di(n,3)}function qv(n){return Di(Jf(n),Uint32Array.BYTES_PER_ELEMENT)+Di(Di(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function Xv(n){return n<<0}function Jv(n){return qv(n)+Di(Di(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function Kv(n){return Di(n,3)}function $v(n){return Di(n,3)}function Qv(n){return n<<0}function Zv(n,t){return Jv(n)+Di(n<<0,Float32Array.BYTES_PER_ELEMENT)|0}function np(n){return n<<0}function tp(n,t){return Zv(n)+Di(Qf(n,t),Uint32Array.BYTES_PER_ELEMENT)|0}function rp(n){return n<<0}function ep(n){return n<<0}function ip(n,t){return tp(n,t)+Di(n<<0,Uint8Array.BYTES_PER_ELEMENT)|0}function op(n){return n<<0}var up=Qf;function cp(n,t,r){return[new Uint32Array(n,0,Jf(t)),new Float32Array(n,jv(t),Vv(t)),new Float32Array(n,qv(t),zv(t)),new Float32Array(n,Jv(t),Xv(t)),new Uint32Array(n,Zv(t),up(t,r)),new Uint8Array(n,tp(t,r),np(t)),new Uint8Array(n,ip(t,r),ep(t))]}function ap(n,t){return eo(rp(n),t)}function sp(n,t){return eo(op(n),t)}var fp=ph;function hp(n){return Di(n,3)}function lp(n){return n<<0}function vp(n){return Di(n,3)}function pp(n){return 0+Di(Di(n,3),Float32Array.BYTES_PER_ELEMENT)|0}function dp(n){return n<<0}function _p(n,t){return[new Float32Array(n,0,vp(t)),new Float32Array(n,pp(t),dp(t))]}function gp(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t).renderData.camera;return e[21][2]=null==i?void 0:[i.vMatrix,i.pMatrix,i.position],Ii(r,e),t})}function yp(n,t,r){return _i(function(n){var e=Bi(r),i=function(n,t){var r=t[29];return t[29]=[r[0],r[1],n],t}(Mu(t).customData,e);return Ii(r,i),t})}function mp(n,t){return Qt(function(t){return t.data.operateType===nc(n)},Tn("message",t))}function wp(n,t){return Cn(function(n){return Ee(n)},mp(n,t))}function Ep(n,t,r){return wp(n,e.a(_e,0))}function bp(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t),o=i.transformData.buffer,u=i.bufferData.transformCount;return Ii(r,function(n,t,r){var e=ro(n,t);return r[17]=[e[0],e[1],e[2],e[3],Hi(0),Hi(0)],r}(o,u,e)),t})}function Tp(n,t,r){return wp(n,e.a(_e,0))}function Ap(n,t,r){return _i(function(n){var r,e,i=Mu(t);return r=ci,e=i.isDebug,r[1]=e,t})}function xp(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t),o=i.gpuData,u=i.memoryData,c=i.instanceBufferData;return e[1]=[[o.useHardwareInstance],[c.sourceInstanceCount,c.objectInstanceCountPerSourceInstance],i.bufferData.textureCountPerMaterial,i.bufferData.basicSourceTextureCount,i.bufferData.arrayBufferViewSourceTextureCount,i.bufferData.directionLightCount,i.bufferData.pointLightCount,[u.maxBigTypeArrayPoolSize]],Ii(r,e),t})}function Sp(n,t,r){return _i(function(n){var e=Bi(r),i=e[1],o=Mu(t).pointLightData,u=o.buffer,c=zc(i);return Ii(r,function(n,t){var r=Nl(t);return t[20]=[r[0],r[1],n.renderLightArr,r[3],r[4],r[5],r[6],r[7],r[8]],t}(o,function(n,t,r,e){var i=Gv(n,t);return e[20]=[r,void 0,void 0,i[0],i[1],i[2],i[3],i[4],i[5]],e}(u,c,o.index,e))),t})}function Lp(n,t){return Le(Pe(n,t[0]))}function Dp(n,t,r,e){return[n[0],n[1],t,r[0],r[1],e]}function Rp(n,t,r){return _i(function(n){var e=Bi(r);return e[7][0]=function(n,t){var r=Lp("highp_fragment",t)[0],e=n[2];if(void 0===e)return r;switch(e){case 0:return Lp("highp_fragment",t)[0];case 1:return Lp("mediump_fragment",t)[0];case 2:return Lp("lowp_fragment",t)[0]}}(e[3],e[10]),Ii(r,e),t})}function kp(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t).renderData.geometryData.indicesTypeMap,o=Ml(e);return e[18]=[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],i],Ii(r,e),t})}function Pp(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t).renderData.sourceInstance,o=e[11];return e[11]=[i.objectInstanceTransformIndexMap,o[1],o[2],o[3],o[4],o[5]],Ii(r,e),t})}function Mp(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t),o=i.basicMaterialData;e[12]=[void 0,void 0,void 0,void 0,void 0,void 0,o.index,o.disposedIndexArray,o.isSourceInstanceMap];var u=i.lightMaterialData;return e[13]=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,u.index,u.disposedIndexArray,u.isSourceInstanceMap],Ii(r,e),t})}function Np(n,t,r){var e=r[8],i=ap(t,e[5]);return Hh([n,t,sp(t,e[6])],fp,Hh([n,t,i],fp,[e[4],r[19],r]))[2]}function Cp(n,t,r){return qf(n,t,Np,r)}function Ip(n,t,r,e){return Sl(n,t,r,e),vo([t,e+16|0],[ml(n,r),0],9),9+(e+16|0)|0}function Bp(n,t,r){return Jh(r)?function(n,t,r){return xl(n,[t,6400,112,100],[Cp,Ip],r)}(n,t,r):function(n,t,r){return ol(n,t,Cp,r)}(n,t,r)}function Up(n,t){return Kf(n,t[8][0])}function Fp(n,t){var r=function(n){return n[21][1]}(t);if(void 0!==r){var e=r;return function(n,t,r){var e=t[5],i=t[4],o=t[3],u=t[2],c=t[1];li(function(t,r){var a=Cc(r,c),s=Cc(r,u),f=zh(s,Up,t),h=Cc(r,o),l=Cc(r,i),v=Cc(r,e);if(Ic(v))return Bp(n,[a,s,f,h,l,v],t);var p=Cp(n,[a,s,f,h,l],t);return Xf(n,h,l,p),p},r,t[0])}(n,[e[0],e[1],e[2],e[3],e[4],e[5]],Zl(t)),t}return t}function Op(n,t,r){return _i(function(n){var e=Bi(r);if(ys(Mu(t))){var i=Ni(e[4]);return Ii(r,Fp(i,e)),t}return t})}function Yp(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t),o=i.meshRendererData.buffer,u=i.bufferData.meshRendererCount;return Ii(r,function(n,t,r){var e=Hv(n,t);return r[14]=[e[0],e[1]],r}(o,u,e)),t})}function Gp(n){return n[0]}function Hp(n){return n[1]}function Wp(n,t,r){return wp(n,e.a(_e,0))}function Vp(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t).pointLightData,o=Nl(e);return e[20]=[i.index,i.positionMap,i.renderLightArr,o[3],o[4],o[5],o[6],o[7],o[8]],Ii(r,e),t})}var jp=function(n,t,r,i){var o=i[2],u=i[1],c=t[0],a=Gp(u);return r[2](c,e.d(r[0],c,[n,r[4](c,[t[1],t[2]],[a,e.a(r[3],a),Hp(u)],o)],r[1],o),i[0]),o};function zp(n,t,r,e){var i=e[1],o=t[1],u=t[0];return qe(function(n){return ze(de("not dispose any material before init","do"),function(n){return Je(function(n){return 0===n.length}(i))})},ai(ci)),li(function(t,e){return r(n,[e,Xh(e,u),o],t)},e[2],gi(0,e[0]-1|0))}function qp(n,t,r){return[t[0],t[1],yi([n[1],r,If(n[0])],t[2]),t[3],t[4],t[5],t[6]]}function Xp(n,t,r){return[t[0],t[1],t[2],t[3],yi([n[0],n[1],n[2],r],t[4]),t[5],t[6]]}function Jp(n,t,r){var e,i,o,u,c,a=r[3];return i=t,u=wc(e=n,o=a),c=u[1],u[0]?c.includes(i)||yi(i,c):Yi(e,[i],o),Xe(function(t){var r=t[3];return Dv("material should only use the same shaderIndex once",n,0,r)},ai(ci),r)}function Kp(n){for(var t="",r=0,e=n.length-1|0;r<=e;++r)t+=ye.b(n,r)[0];return t}function $p(n,t,r,e){return Ns(r[0],r[1],n,function(n,t,r){return Yi(n,r,t[0]),r}(t,e,n.createProgram()))}function Qp(n,t,r,e){var i=t[1],o=t[0],u=n[0];!function(n,t,r){Re(n,t,r[2])}(n[1],u,e[0]);var c=r[0](i,r[1],[e[2],e[5]]),a=$p(o,u,[c[0],c[1]],e[1]),s=r[2]([o,u,a],i,[e[3],e[4]]);return r[3](o,[a,u,i],s),u}function Zp(n,t,r,e){var i=e[0],o=t[1],u=Kp(o),c=function(n,t){var r=t[2];return Pe(n,r)}(u,i);if(void 0!==c){var a=c;return Jp(a,n,i),a}var s,f,h=(f=(s=i)[0],s[0]=f+1|0,Xe(function(n){return ze(de("not equal default shader index:"+String(429496729)+" ","equal"),function(t){return ui[3](n,429496729)})},ai(ci),f)),l=Jp(h,n,i);return Qp([h,u],[t[0],o],[r[0],r[1],r[2],r[3]],[l,e[1],e[2],e[3],e[4],e[5]])}function nd(n,t,r,e){return Zp(n,[t[0],t[1]],[r[0],r[1],r[2],r[3]],[e[0],e[1],e[2],e[3],e[4],e[5]])}function td(n){return le(he("getHandle","unknown handle name: "+String(n),"","",""))}function rd(n,t,r){return[t[0],t[1],t[2],t[3],t[4],yi([n,r[0],r[1]],t[5]),t[6]]}function ed(n,t,r){return Yi(n,r,t),0}function id(n,t){var r=n[3],e=n[1],i=n[0];switch(i){case"instance_mMatrix":return rd(e,t,[yl,Lf]);case"instance_normalMatrix":return rd(e,t,[ml,Sf]);case"mMatrix":return Ff([e,r],t,yl);case"normalMatrix":return Ff([e,r],t,ml);default:return le(he("addModelSendData","unknow field:"+String(i),"","",""))}}function od(n){return wi(n[0])[0]}function ud(n){return wi(n[0])[1]}function cd(n){return wi(n[0])[2]}function ad(n,t){var r=n[3],e=n[1],i=n[0];switch(i){case"pMatrix":return qp([r,e],t,ud);case"position":return function(n,t,r){return[t[0],t[1],t[2],yi([n[0],n[1],n[2],r,Bf(n[3])],t[3]),t[4],t[5],t[6]]}([n[4],n[2],e,r],t,cd);case"vMatrix":return qp([r,e],t,od);default:return le(he("_addCameraSendData","unknow field:"+String(i),"","",""))}}function sd(n,t){return r=n,e=t[1][1],co(rh(r),e);var r,e}function fd(n,t){return r=n,e=t[1][5],uo(lh(r),e);var r,e}function hd(n,t){return dh(n,t[1][3])}function ld(n,t){return r=n,e=t[2][1],co(Kv(r),e);var r,e}function vd(n,t){return r=n,e=t[2][2],co($v(r),e);var r,e}function pd(n,t){return r=n,e=t[2][3],uo(Qv(r),e);var r,e}function dd(n,t){return ap(n,t[2][5])}function _d(n,t){return sp(n,t[2][6])}function gd(n,t){var r=n[4],e=n[3],i=n[2],o=n[1],u=n[0],c=0;switch(u){case"shininess":return Yf([r,i,o,e],t,pd);case"diffuseColor":case"specularColor":c=1;break;case"diffuseMap":case"specularMap":c=2;break;default:return le(he("_addLightMaterialSendData","unknow field:"+String(u),"","",""))}switch(c){case 1:return function(n,t,r){var e=t[3],i=t[2],o=t[1],u=t[0];switch(n){case"diffuseColor":return Yf([u,o,i,e],r,ld);case"specularColor":return Yf([u,o,i,e],r,vd);default:throw[Ue.f,["HandleMaterialUniformConfigDataService.re",36,2]]}}(u,[r,i,o,e],t);case 2:return function(n,t,r){var e=t[3],i=t[2],o=t[1],u=t[0];switch(n){case"diffuseMap":return Gf([u,o,i,e],r,dd);case"specularMap":return Gf([u,o,i,e],r,_d);default:return le(he("_addLightMaterialSendData","unknow field:"+String(n),"","",""))}}(u,[r,i,o,e],t)}}function yd(n){return void 0!==n?Ae(n):ke(0)}function md(n,t,r){var e=t[8],i=r[5];return function(n,t,r){Yi(n,r,t)}(n,t[3],r[0]),function(n,t,r){Yi(n,r,t)}(n,t[4],r[1]),function(n,t,r){Yi(n,r,t)}(n,t[5],r[2]),function(n,t,r){Yi(n,r,t)}(n,t[6],r[3]),function(n,t,r){Yi(n,r,t)}(n,t[7],r[4]),ed(n,e,i),ed(n,e,i),function(n,t,r){Yi(n,r,t)}(n,t[9],r[6]),0}function wd(n,t,r,e){var i=e[1],o=e[0],u=t[1],c=t[0];return li(function(n,t){var e=t[2];if(Ei(e))return n;var a=bi(e);return r([c,u,o,i],n,a[0])},[[],[],[],[],[],[],[]],n)}function Ed(n,t,r,e){var i=e[1],o=e[0],u=t[1],c=yd(function(n,t){return Vi(n,t[1])}(u,i));return[md(u,o,r(t[2],n,t[0],[c,yd(Df(u,o[2]))])),Ss(u,c,i)]}function bd(n,t,r){var e=n[3],i=n[2],o=n[1],u=n[0];return Ei(r)?t:li(function(n,t){var r=t[3],c=t[2],a=t[1],s=t[0];switch(r){case"basicMaterial":return function(n,t){var r=n[4],e=n[3],i=n[2],o=n[1],u=n[0];switch(u){case"alpha":return Yf([r,i,o,e],t,fd);case"color":return Yf([r,i,o,e],t,sd);case"map":return Gf([r,i,o,e],t,hd);default:return le(he("_addBasicMaterialSendData","unknow field:"+String(u),"","",""))}}([a,As(o,s,i,u),s,c,e],n);case"camera":return ad([a,As(o,s,i,u),s,c,e],n);case"model":return id([a,As(o,s,i,u),s,c,e],n);default:return le(he("_readUniforms","unknow from:"+String(r),"","",""))}},t,bi(r))}function Td(n,t,r,e){return wd(n,[t,r],bd,[e[0],e[1]])}function Ad(n,t,r){return Ed(n,[t[0],t[1],t[2]],Td,r)}function xd(n,t,r,e){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r),0}function Sd(n,t,r,e){var i=t[1];return function(n){return-1!==n}(i)?(n.bindBuffer(n.ARRAY_BUFFER,r),n.vertexAttribPointer(i,t[0],n.FLOAT,!1,0,0),xf(n,i,e[0]),0):0}function Ld(n,t){return[t[0],yi([Ts(n[1],n[2],n[3],n[0]),4,function(n){return n<<4}],t[1])]}function Dd(n,t){return[yi([Ts(n[1],n[2],n[5],n[0]),Af(n[4]),n[3],Sd],t[0]),t[1]]}function Rd(n,t){return[yi([0,0,n,xd],t[0]),t[1]]}function kd(n,t,r,e){var i=t[1],o=t[0];return li(function(n,t){var u=t[2];if(Ei(u))return n;var c=bi(u);return r([o,i,e],n,c[1])},[[],[]],n)}function Pd(n,t,r,e){return Yi(n,e[0],r[0]),Yi(n,e[1],r[1]),r}function Md(n,t,r,e){var i=e[1],o=n[1],u=yd(function(n,t){return Vi(n,t[0])}(o,i));return[Pd(o,0,e[0],r(t,n[0],n[2],u)),xs(o,u,i)]}function Nd(n,t,r){var e=n[2],i=n[1],o=n[0];return Ei(r)?t:li(function(n,t){var r=t[2],u=t[1],c=t[0];if(!Ei(c)&&!Ei(r)){var a=bi(c),s=bi(r);return u>=5?Ld([o,i,a,e],n):Dd([o,i,a,u,s,e],n)}return Rd(u,n)},t,bi(r))}function Cd(n,t,r,e){return kd(n,[t,r],Nd,e)}function Id(n,t,r){return Md(n,t,Cd,r)}function Bd(n,t,r,e){return nd(n,[t[0],t[1]],[r,td,Id,Ad],[e[2],e[3],e[4],e[5],e[6],e[7]])}var Ud="void main(void){\n",Fd="}\n";function Od(n,t){return t.indexOf(n)>-1}function Yd(n,t){var r=n[0],e=n[1],i=n[2],o=n[3],u=n[4],c=n[5],a=t[0],s=t[1],f=t[2],h=t[3],l=t[4],v=t[5];return n[0]=r+a,n[1]=e+s,n[2]=i+f,n[3]=o+h,n[4]=u+l,n[5]=c+v,n}function Gd(n,t){return n[5]+t}function Hd(n,t){var r=n[2];return r+"\n"+function(n,t,r,e){return n.reduce(function(n,i){var o=i[2];if(Ei(o))return n;var u=bi(o)[0];return Ei(u)?n:n+bi(u).filter(function(n){var i=n[0];return!(!Od(i,t)&&!Od(i,r))||Od(i,e)}).reduce(function(n,t){var r=function(n){return"float3"===n?"vec3":n}(t[2]);return n+"uniform "+String(r)+" "+String(t[0])+";\n"},"")},"")}(t,r,n[4],n[5])}function Wd(n){return n[0]+(n[1]+(n[2]+(n[3]+(n[4]+n[5]))))}function Vd(n,t,r,i){return li(function(n,t){var o=t[1];return Ei(o)?n:li(function(n,t){return function(n,t,r,i){var o=t[1],u=t[0],c=n[1],a=n[0];switch(u){case"fs":return[a,Yd(c,Lp(o,i))];case"fs_function":return[a,Yd(c,e.a(r,o))];case"vs":return[Yd(a,Lp(o,i)),c];case"vs_function":return[Yd(a,e.a(r,o)),c];default:return le(he("buildGLSLSource","unknown glsl type: "+String(u),"","","name: "+String(o)))}}(n,[t[0],t[1]],r,i)},n,bi(o))},[n[0],n[1]],t)}function jd(n,t,r){var e=r[0][0],i=["","","","","",""],o=["","","","","",""];i[5]=i[5]+Ud,o[5]=o[5]+Ud;var u=wi(e);i[0]=u+i[0],o[0]=u+o[0];var c=Vd([i,o],n,t,r[1]),a=c[1],s=c[0];return s[5]=Gd(s,Fd),a[5]=Gd(a,Fd),s[2]="\n"+(function(n){return n.reduce(function(n,t){var r=t[2];if(Ei(r))return n;var e=bi(r)[1];return Ei(e)?n:n+bi(e).reduce(function(n,t){var r=t[2],e=t[0];if(!Ei(e)&&!Ei(r)){var i=bi(e),o=bi(r);return n+"attribute "+String(o)+" "+String(i)+";\n  "}return n},"")},"")}(n)+s[2]),s[2]=Hd(s,n),a[2]=Hd(a,n),[Wd(s),Wd(a)]}function zd(n,t){return mi(t,n,function(t){return t[0]===n})}function qd(n,t){return fe(function(n){return se("staticBranchs",t)},ai(ci)),le(he("_getMaterialShaderLibDataArrByStaticBranch","unknown name:"+String(n),"","",""))}function Xd(n,t,r){var e=t[1];return yi(zd(n[0]?n[1]?ye.b(e,1):ye.b(e,2):ye.b(e,0),t[0]),r)}function Jd(n,t,r,e){var i=t[0],o=n[3],u=n[1];switch(u){case"dynamic_branch":return function(n,t,r,e){var i=n[1],o=xi(t[0],i,function(n){return Ti(n[0],i)}),u=r(n[0],o[1],t[2])?function(n){return n[2]}(o):function(n){return n[3]}(o);return Ei(u)?e:yi(zd(bi(u),t[1]),e)}([n[0],o],[t[2],i,t[3]],r[1],e);case"group":return function(n,t,r,e){return e.concat(mi(n,t,function(n){return n[0]===t})[1].map(function(n){return zd(n,r)}))}(n[2],o,i,e);case"static_branch":return r[0]([o,n[4],n[5]],[t[1],i],e);default:return fe(function(n){return se("shaderLibs",i)},ai(ci)),le(he("_getMaterialShaderLibDataArrByType","unknown type_:"+String(u),"","",""))}}function Kd(n,t,r,e){var i=r[1],o=r[0],u=t[2],c=t[0],a=c[2],s=c[1],f=c[0],h=n[2],l=n[1],v=n[0];return li(function(n,t){var r=t[1],c=t[0];return Ei(c)?yi(zd(r,u),n):Jd([v,bi(c),a,r,l,h],[u,f,s,e],[o,i],n)},[],t[1])}function $d(n,t,r){var e=t[0],i=n[0];if("modelMatrix_instance"===i){var o=mi(e,i,function(n){return n[0]===i});return Xd([n[1],n[2]],[t[1],o[1]],r)}return qd(i,e)}function Qd(n,t,r){return"basic_has_map"===t?gh(dh(n,r[0][3])):le(he("_isPass","unknown condition:"+String(t),"","",""))}function Zd(n,t,r,e){return Kd([n,t[0],t[1]],r,[$d,Qd],e)}function n_(n){return mi(n[3],"render_basic",function(n){return"render_basic"===n[0]})[1]}function t_(n,t,r){return jp(n,t,[Bd,jd,$f,n_,Zd],[r[0][2],r[1],r])}function r_(n,t,r){var e=r[0];return zp(n,t,t_,[e[0],e[1],r])}function e_(n){return qh((t=n[1],wi(t[0]))[0],n[3]);var t}function i_(n,t,r){return e.c(n[1],Ni(r[4]),[t,e_(r)],e.a(n[0],r)),r}function o_(n){return wi(n[2])}function u_(n){var t=n[5],r=n[6],e=n[7],i=n[8],o=n[9],u=n[10],c=Fl(n);return[[c[6],c[7],Ol(n),Yl(n)],o_(n),t,r,e,i,o,u]}function c_(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t),o=i.basicMaterialData,u=i.bufferData.basicMaterialCount,c=i.bufferData.textureCountPerMaterial;return Ii(r,i_([u_,r_],Fl(e)[8],function(n,t,r,e){var i=Wv(n,t,r),o=Fl(e);return e[12]=[Ee(i[0]),Ee(i[1]),Ee(i[2]),Ee(i[3]),Ee(i[4]),Ee(i[5]),o[6],o[7],o[8]],e}(o.buffer,u,c,e))),t})}function a_(n,t){var r,e=function(n){return n.length}(n);return r=e,qe(function(n){return ze(de("light count: "+String(r)+" <= max count: "+String(4),"not"),function(n){return oi(0,r,4)})},ai(ci)),r}function s_(n){var t=function(n){return a_(n[1])}(n[0]),r=function(n){return a_(n[1])}(n[1]);return["","#define DIRECTION_LIGHTS_COUNT "+String(t)+"\n#define POINT_LIGHTS_COUNT "+String(r),"","","",""]}function f_(n,t){return"defineLightCount"===t?s_(n):le(he("getHandle","unknown handle name: "+String(t),"","",""))}var h_=Wi;function l_(n,t){return r=n,e=t[1],co(Rv(r),e);var r,e}function v_(n,t,r){var e=r[3],i=t[2],o=t[1],u=t[0];qe(function(n){return ze(de("max buffer count === 4","is "+String(4)),function(n){return ui[0](4,4)})},ai(ci));var c=[["u_pointLights[0].position","u_pointLights[0].color","u_pointLights[0].intensity","u_pointLights[0].constant","u_pointLights[0].linear","u_pointLights[0].quadratic","u_pointLights[0].range"],["u_pointLights[1].position","u_pointLights[1].color","u_pointLights[1].intensity","u_pointLights[1].constant","u_pointLights[1].linear","u_pointLights[1].quadratic","u_pointLights[1].range"],["u_pointLights[2].position","u_pointLights[2].color","u_pointLights[2].intensity","u_pointLights[2].constant","u_pointLights[2].linear","u_pointLights[2].quadratic","u_pointLights[2].range"],["u_pointLights[3].position","u_pointLights[3].color","u_pointLights[3].intensity","u_pointLights[3].constant","u_pointLights[3].linear","u_pointLights[3].quadratic","u_pointLights[3].range"]],a=e[8];return hi(function(t,r,e){var s=ye.b(c,e),f=s[2],h=s[1],l=s[0];return Cf(n,o,[l,As(u,l,i,n)],h_(r,a)),Nf(n,o,[h,As(u,h,i,n)],l_(r,t)),Pf(n,o,[f,As(u,f,i,n)],function(n,t){return r=n,t[2][r];var r}(r,t)),function(n,t,r,e){var i=r[6],o=r[5],u=r[4],c=r[3],a=t[3],s=t[2],f=t[1],h=t[0];return Pf(h,s,[c,As(f,c,a,h)],function(n,t){return r=n,t[3][r];var r}(n,e)),Pf(h,s,[u,As(f,u,a,h)],function(n,t){return r=n,t[4][r];var r}(n,e)),Pf(h,s,[o,As(f,o,a,h)],function(n,t){return r=n,t[5][r];var r}(n,e)),Pf(h,s,[i,As(f,i,a,h)],function(n,t){return r=n,t[6][r];var r}(n,e)),e}(r,[n,u,o,i],s,t)},e,e[7]),0}function p_(n,t,r){return Nf(n,t[1],["u_ambient",As(t[0],"u_ambient",t[2],n)],function(n){return n[0][0]}(r[1]))}var d_=Wi;function __(n,t){return r=n,e=t[1],co(hp(r),e);var r,e}function g_(n,t){return r=n,e=t[2],uo(lp(r),e);var r,e}function y_(n,t,r){var e=r[2],i=t[2],o=t[1],u=t[0];qe(function(n){return ze(de("max buffer count === 4","is "+String(4)),function(n){return ui[0](4,4)})},ai(ci));var c=[["u_directionLights[0].direction","u_directionLights[0].color","u_directionLights[0].intensity"],["u_directionLights[1].direction","u_directionLights[1].color","u_directionLights[1].intensity"],["u_directionLights[2].direction","u_directionLights[2].color","u_directionLights[2].intensity"],["u_directionLights[3].direction","u_directionLights[3].color","u_directionLights[3].intensity"]],a=e[4];return hi(function(t,r,e){var s=ye.b(c,e),f=s[2],h=s[1],l=s[0];return Cf(n,o,[l,As(u,l,i,n)],d_(r,a)),Nf(n,o,[h,As(u,h,i,n)],__(r,t)),Pf(n,o,[f,As(u,f,i,n)],g_(r,t)),t},e,e[3]),0}function m_(n,t,r){var e=t[3],i=t[2],o=t[1],u=t[0];switch(n){case"ambientLight":return function(n,t){var r=n[0];return"send"===r?Xp([n[1],n[2],n[3]],t,p_):le(he("_addAmbientLightSendData","unknow field:"+String(r),"","",""))}([u,o,i,e],r);case"directionLight":return function(n,t){var r=n[0];return"send"===r?Xp([n[1],n[2],n[3]],t,y_):le(he("_addDirectionLightSendData","unknow field:"+String(r),"","",""))}([u,o,i,e],r);case"pointLight":return function(n,t){var r=n[0];return"send"===r?Xp([n[1],n[2],n[3]],t,v_):le(he("_addPointLightSendData","unknow field:"+String(r),"","",""))}([u,o,i,e],r);default:throw[Ue.f,["HandleUniformConfigDataInitLightMaterialService.re",74,2]]}}function w_(n,t,r){var e=n[3],i=n[2],o=n[1],u=n[0];return Ei(r)?t:li(function(n,t){var r=t[3],c=t[2],a=t[1],s=t[0],f=0;switch(r){case"camera":return ad([a,As(o,s,i,u),s,c,e],n);case"lightMaterial":return gd([a,As(o,s,i,u),s,c,e],n);case"model":return id([a,As(o,s,i,u),s,c,e],n);case"ambientLight":case"directionLight":case"pointLight":f=1;break;default:return le(he("_readUniforms","unknow from:"+String(r),"","",""))}if(1===f)return m_(r,[a,o,e,i],n)},t,bi(r))}function E_(n,t,r,e){return wd(n,[t,r],w_,[e[0],e[1]])}function b_(n,t,r){return Ed(n,[t[0],t[1],t[2]],E_,r)}function T_(n,t,r){var e=n[2],i=n[1],o=n[0];return Ei(r)?t:li(function(n,t){var r=t[2],u=t[1],c=t[0];if(!Ei(c)&&!Ei(r)){var a=bi(c),s=bi(r);return 4!==u?u>=5?Ld([o,i,a,e],n):Dd([o,i,a,u,s,e],n):function(n,t){return[t[0],yi([Ts(n[1],n[2],n[3],n[0]),3,function(n){return Di(n-4|0,12)+64|0}],t[1])]}([o,i,a,e],n)}return Rd(u,n)},t,bi(r))}function A_(n,t,r,e){return kd(n,[t,r],T_,e)}function x_(n,t,r){return Md(n,t,A_,r)}function S_(n,t,r,e){var i=[e[1],e[2]];return nd(n,[t[0],t[1]],[r,function(n){return f_(i,n)},x_,b_],[e[4],e[5],e[6],e[7],e[8],e[9]])}function L_(n,t,r){var e=t[0],i=n[0],o=0;switch(i){case"modelMatrix_instance":case"normalMatrix_instance":o=1;break;default:return qd(i,e)}if(1===o){var u=mi(e,i,function(n){return n[0]===i});return Xd([n[1],n[2]],[t[1],u[1]],r)}}function D_(n,t,r){var e=r[0];switch(t){case"has_diffuse_map":return gh(ap(n,e[3]));case"has_specular_map":return gh(sp(n,e[4]));case"light_has_map":return!!gh(ap(n,e[3]))||gh(sp(n,e[4]));default:return le(he("_isPass","unknown condition:"+String(t),"","",""))}}function R_(n,t,r,e){return Kd([n,t[0],t[1]],r,[L_,D_],e)}function k_(n){return mi(n[3],"front_render_light",function(n){return"front_render_light"===n[0]})[1]}function P_(n,t,r){return jp(n,t,[S_,jd,$f,k_,R_],[r[0][2],r[3],r])}function M_(n,t,r){var e=r[0];return zp(n,t,P_,[e[0],e[1],r])}function N_(n){var t=n[5],r=n[6],e=n[7],i=n[8],o=n[9],u=n[10],c=Xl(n),a=Nl(n),s=Wl(n);return[[s[7],s[8],Vl(n),jl(n),zl(n)],[c[0],Jl(c)],[a[0],Il(a)],o_(n),t,r,e,i,o,u]}function C_(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t),o=i.lightMaterialData,u=i.bufferData.lightMaterialCount,c=i.bufferData.textureCountPerMaterial;return Ii(r,i_([N_,M_],Wl(e)[9],function(n,t,r,e){var i=cp(n,t,r),o=Wl(e);return e[13]=[Ee(i[0]),Ee(i[1]),Ee(i[2]),Ee(i[3]),Ee(i[4]),Ee(i[5]),Ee(i[6]),o[7],o[8],o[9]],e}(o.buffer,u,c,e))),t})}function I_(n,t,r){return _i(function(n){var e=Bi(r),i=e[1],o=Mu(t).directionLightData,u=o.buffer,c=zc(i);return Ii(r,function(n,t){var r=Xl(t);return t[19]=[r[0],r[1],n.renderLightArr,r[3],r[4]],t}(o,function(n,t,r,e){var i=_p(n,t);return e[19]=[r,void 0,void 0,i[0],i[1]],e}(u,c,o.index,e))),t})}function B_(n,t,r){return _i(function(n){var e=Bi(r),i=function(n,t){var r=ye.a(t);return r[0]=[[n]],r}(Mu(t).ambientLightData.color,e);return Ii(r,i),t})}function U_(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t).renderConfigData;return e[2]=function(n){return[n[0],n[1]]}([JSON.parse(i.shaders),JSON.parse(i.shaderLibs)]),Ii(r,e),t})}function F_(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t).workerDetectData;return e[25]=[i.isUseWorker],Ii(r,e),t})}function O_(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t).browserDetectData;return e[26]=[i.browser],Ii(r,e),t})}function Y_(n,t){return _i(function(r){var e=Bi(t),i=Mu(n).initData.textureData;return Ii(t,function(n,t){var r=vs(t),e=wi(r[10]);li(function(n,t){return xa(t[0],t[1],n)},e,n);var i=ye.a(t);return i[16]=[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],e,r[11],r[12]],i}(i.arrayBufferViewSourceTextureData.needAddedSourceArray,e))})}function G_(n,t){return _i(function(r){var e=Bi(t),i=Mu(n).initData.textureData,o=Ta(e),u=vs(e);return e[15]=[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],Yc(Ni(e[4]),i.basicSourceTextureData.needInitedTextureIndexArray,o[9]),o[10]],e[16]=[u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],Yc(Ni(e[4]),i.arrayBufferViewSourceTextureData.needInitedTextureIndexArray,u[11]),u[12]],e})}function H_(n,t,r){var e=Bi(r),i=Mu(t).initData.textureData;return Nr(Fn(function(n){return Ii(r,n),0},pi([Ca(i.basicSourceTextureData.needAddedImageDataArray,e),Y_(t,r),G_(t,r)])).then(function(n){return Promise.resolve(t)}))}function W_(n,t,r){return _i(function(i){var o=Bi(r);return ge({operateType:nc(n),customData:ov(o)},e.a(_e,0)),t})}function V_(n,t,r,e){var i=Vi(n,r);return void 0!==i&&cl(Ae(i),t,e[0]),pc(n,r)}var j_=pc,z_=pc;function q_(n){return(t=n,wi(t[7]))[0];var t}function X_(n,t,r){return _i(function(n){var e=Bi(r),i=e[1],o=e[11],u=e[22],c=Mu(t),a=li(function(n,t){return[V_(t,q_(i),n[0],u),j_(t,n[1]),z_(t,n[2])]},[o[4],o[3],o[5]],c.sourceInstanceNeedDisposeVboBufferArr);return e[11]=[o[0],o[1],o[2],a[1],a[0],a[2]],Ii(r,e),t})}function J_(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t).directionLightData,o=Xl(e);return e[19]=[i.index,i.directionMap,i.renderLightArr,o[3],o[4]],Ii(r,e),t})}function K_(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t);i.initData.materialData;var o=i.initData.materialData.basicMaterialData,u=i.initData.materialData.lightMaterialData,c=Ni(e[4]),a=e_(e);return Ii(r,function(n,t,r,e){return Wl(e),li(function(t,e){return P_(n,[e[0],e[1],r],t)},N_(e),t.materialDataForWorkerInit),e}(c,u,a,function(n,t,r,e){return Fl(e),li(function(t,e){return t_(n,[e[0],e[1],r],t)},u_(e),t.materialDataForWorkerInit),e}(c,o,a,e))),t})}function $_(n,t,r){return _i(function(r){return ge({operateType:nc(n)},e.a(_e,0)),t})}var Q_=$_,Z_=$_;function ng(n,t){return r=t[3],qi(function(t,r,e){var i=Cs(n,e,t);return li(function(t,r){var e=r[0];return Ls(e)&&r[2](n,e,r[1](t)),t},Hf(i),r),i},t,r[5]);var r}function tg(n,t){return r=t[3],qi(function(t,r,e){var i=Cs(n,e,t);return li(function(t,r){return r[4](n,r[0],[r[1],r[2]],r[3](t)),t},Hf(i),r),i},t,r[6]);var r}function rg(n,t){return r=t[3],qi(function(t,r,e){var i=Cs(n,e,t);return li(function(t,r){return r[3](n,[r[0],r[1],r[2]],t),t},Wf(i),r),i},t,r[7]);var r}function eg(n){if(!Se(n[6]))return n;var t=Ni(n[18]);return rg(t,tg(t,ng(t,n)))}function ig(n,t,r){return _i(function(n){var e=Bi(r);return ys(Mu(t))?(eg(Zl(e)),Ii(r,e),t):t})}function og(n,t,r){return _i(function(n){var e,i=Bi(r);return i[8]=[(e=i[8])[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],void 0,void 0],Ii(r,i),t})}var ug=$_;function cg(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t);if(ys(i)){var o=i.renderData.basic,u=Bc(o.buffer,o.bufferCount);return e[21][0]=[o.renderIndexArray,u[0],u[1],u[2],u[3],u[4]],Ii(r,e),t}return t})}function ag(n,t,r){return _i(function(n){var e=Bi(r),i=Mu(t);if(ys(i)){var o=i.renderData.light,u=Bc(o.buffer,o.bufferCount);return e[21][1]=[o.renderIndexArray,u[0],u[1],u[2],u[3],u[4]],Ii(r,e),t}return t})}function sg(n){return Pi([["send_finish_send_job_data",Z_],[["get_init_render_data",Wp],[["get_isDebug_data",Ap],[["get_renderConfig_data",U_],[["get_setting_data",xp],[["get_material_data",Mp],[["get_browserDetect_data",O_],[["get_workerDetect_data",F_],[["preget_glslData",Rp],[["create_gl",Nu],[["set_viewport",Tv],[["detect_gl",Fu],[["preget_glslData",Rp],[["init_state",Zu],[["init_transform",bp],[["init_instance",Lv],[["init_geometry",xv],[["init_meshRenderer",Yp],[["init_basic_material",c_],[["init_direction_light",I_],[["init_point_light",Sp],[["init_light_material",C_],[["init_texture",gs],[["init_imgui",Qu],[["send_finish_init_render_data",ug],[["get_render_data",Ep],[["get_instance_data",Pp],[["get_geometry_data",kp],[["get_ambient_light_data",B_],[["get_direction_light_data",J_],[["get_point_light_data",Vp],[["init_material_for_render",K_],[["init_texture_for_render",H_],[["clear_color",ac],[["clear_buffer",Ac],[["clear_last_send_component",og],[["create_basic_render_object_typeArray",cg],[["create_light_render_object_typeArray",ag],[["get_custom_data",yp],[["get_camera_data",gp],[["send_uniform_shader_data",ig],[["render_basic",tv],[["front_render_light",Op],[["render_imgui",bv],[["commit",Ui],[["send_finish_render_data",W_],[["get_dispose_data",Tp],[["dispose_vbo",mc],[["dispose_sourceInstance",X_],[["send_finish_dispose_data",Q_],0]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]])}function fg(n,t){var r=Pe(n,t);return void 0!==r?Ae(r):function(n,t){return le(he("get no job","can't find job handle function whose job name is "+String(n),"","make sure that the job name defined in config record be correctly","jobHandleMap:"+ie(t)+"\nname: "+String(n)))}(n,t)}var hg=fg;function lg(n,t,r){return pe(ve("render worker error",String(n)+"","","","fileName:"+String(t)+"\n        lineno:"+String(r)))}function vg(n){return Ii(ki,[[[[0,0,0]]],[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],void 0,[void 0,void 0,void 0,void 0],[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],[0,ke(0),ke(0),Hi(0)],[Hi(0),void 0],[void 0],[Hi(0),Hi(0),Hi(0),Hi(0),Hi(0),Hi(0),Hi(0),Hi(0),Hi(0),Hi(0),[],void 0,void 0],[Hi(0),Hi(0)],[Re("webgl1_basic_map_fragment",Dp(["\n\n","\n\n"],"\nvarying vec2 v_mapCoord0;\n",["\n\n","\n\n"],"\nvec4 texelColor = texture2D(u_mapSampler, v_mapCoord0);\n\n    vec4 totalColor = vec4(texelColor.rgb * u_color, texelColor.a * u_alpha);\n"),Re("webgl1_basic_map_vertex",Dp(["\n\n","\n\n"],"\nvarying vec2 v_mapCoord0;\n",["\n\n","\n\n"],"\n//    vec2 sourceTexCoord0 = a_texCoord * u_map0SourceRegion.zw + u_map0SourceRegion.xy;\n//\n//    v_mapCoord0 = sourceTexCoord0 * u_map0RepeatRegion.zw + u_map0RepeatRegion.xy;\n\n    v_mapCoord0 = a_texCoord;\n"),Re("webgl1_no_basic_map_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nvec4 totalColor = vec4(u_color, u_alpha);\n"),Re("webgl1_basic_end_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = vec4(totalColor.rgb, totalColor.a);\n"),Re("webgl1_basic_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),Re("common_define",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),Re("common_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),Re("common_function",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n// mat2 transpose(mat2 m) {\n//   return mat2(  m[0][0], m[1][0],   // new col 0\n//                 m[0][1], m[1][1]    // new col 1\n//              );\n//   }\n\n// mat3 transpose(mat3 m) {\n//   return mat3(  m[0][0], m[1][0], m[2][0],  // new col 0\n//                 m[0][1], m[1][1], m[2][1],  // new col 1\n//                 m[0][2], m[1][2], m[2][2]   // new col 1\n//              );\n//   }\n\n//bool isRenderArrayEmpty(int isRenderArrayEmpty){\n//  return isRenderArrayEmpty == 1;\n//}\n"],"\n\n"),Re("common_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n// mat2 transpose(mat2 m) {\n//   return mat2(  m[0][0], m[1][0],   // new col 0\n//                 m[0][1], m[1][1]    // new col 1\n//              );\n//   }\n\n// mat3 transpose(mat3 m) {\n//   return mat3(  m[0][0], m[1][0], m[2][0],  // new col 0\n//                 m[0][1], m[1][1], m[2][1],  // new col 1\n//                 m[0][2], m[1][2], m[2][2]   // new col 1\n//              );\n//   }\n\n//bool isRenderArrayEmpty(int isRenderArrayEmpty){\n//  return isRenderArrayEmpty == 1;\n//}\n"],"\n\n"),Re("highp_fragment",Dp(["\nprecision highp float;\nprecision highp int;\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),Re("lowp_fragment",Dp(["\nprecision lowp float;\nprecision lowp int;\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),Re("mediump_fragment",Dp(["\nprecision mediump float;\nprecision mediump int;\n","\n\n"],"\n\n",["\n\n","\n\n"],"\n\n"),Re("webgl1_setPos_mvp",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),Re("webgl1_rotation_gizmo_circle_for_editor_fragment",Dp(["\n\n","\n\n"],"\nvarying vec3 v_position;\n",["\nbool isAngleBetweenVertexToCenterAndVertexToCameraLessThan90(vec3 vertexPos, vec3 cameraPosInLocalCoordSystem);\n","\nbool isAngleBetweenVertexToCenterAndVertexToCameraLessThan90(vec3 vertexPos, vec3 cameraPosInLocalCoordSystem){\nreturn dot(\nnormalize(-vertexPos),\ncameraPosInLocalCoordSystem - vertexPos\n) >= 0.0;\n}\n"],"\nif(isAngleBetweenVertexToCenterAndVertexToCameraLessThan90(v_position, u_cameraPosInLocalCoordSystem)){\n    discard;\n}\n\ngl_FragColor = vec4(u_color, u_alpha);\n"),Re("webgl1_rotation_gizmo_circle_for_editor_vertex",Dp(["\n\n","\n\n"],"\nvarying vec3 v_position;\n",["\n\n","\n\n"],"\nv_position = a_position;\n\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),Re("modelMatrix_batch_instance_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat4 mMatrix = u_mMatrix;\n"),Re("normalMatrix_batch_instance_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat3 normalMatrix = u_normalMatrix;\n"),Re("modelMatrix_hardware_instance_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat4 mMatrix = mat4(a_mVec4_0, a_mVec4_1, a_mVec4_2, a_mVec4_3);\n"),Re("normalMatrix_hardware_instance_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat3 normalMatrix = mat3(a_normalVec3_0, a_normalVec3_1, a_normalVec3_2);\n"),Re("modelMatrix_noInstance_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat4 mMatrix = u_mMatrix;\n"),Re("normalMatrix_noInstance_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nmat3 normalMatrix = u_normalMatrix;\n"),Re("webgl1_diffuse_map_fragment",Dp(["\n\n","\n\n"],"\nvarying vec2 v_diffuseMapTexCoord;\n",["\n\n","\nvec4 getMaterialDiffuse() {\n        vec4 texelColor = texture2D(u_diffuseMapSampler, v_diffuseMapTexCoord);\n\n        return vec4(texelColor.rgb * u_diffuse, texelColor.a);\n    }\n"],"\n\n"),Re("webgl1_diffuse_map_vertex",Dp(["\n\n","\n\n"],"\nvarying vec2 v_diffuseMapTexCoord;\n",["\n\n","\n\n"],"\n//TODO optimize(combine, reduce compute numbers)\n    //TODO BasicTexture extract textureMatrix\n//    vec2 sourceTexCoord = a_texCoord * u_diffuseMapSourceRegion.zw + u_diffuseMapSourceRegion.xy;\n//    v_diffuseMapTexCoord = sourceTexCoord * u_diffuseMapRepeatRegion.zw + u_diffuseMapRepeatRegion.xy;\n\n    v_diffuseMapTexCoord = a_texCoord;\n"),Re("webgl1_no_diffuse_map_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\nvec4 getMaterialDiffuse() {\n        return vec4(u_diffuse, 1.0);\n    }\n"],"\n\n"),Re("webgl1_no_emission_map_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\nvec3 getMaterialEmission() {\n        return vec3(0.0);\n    }\n"],"\n\n"),Re("webgl1_no_light_map_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\nvec3 getMaterialLight() {\n        return vec3(0.0);\n    }\n"],"\n\n"),Re("webgl1_no_normal_map_fragment",Dp(["\n\n","\n\n"],"\nvarying vec3 v_normal;\n",["\nvec3 getNormal();\n","\nvec3 getNormal(){\n    return v_normal;\n}\n\n#if POINT_LIGHTS_COUNT > 0\nvec3 getPointLightDir(int index){\n    //workaround '[] : Index expression must be constant' error\n    for (int x = 0; x <= POINT_LIGHTS_COUNT; x++) {\n        if(x == index){\n            return getPointLightDirByLightPos(u_pointLights[x].position);\n        }\n    }\n    /*!\n    solve error in window7 chrome/firefox:\n    not all control paths return a value.\n    failed to create d3d shaders\n    */\n    return vec3(0.0);\n}\n#endif\n\n#if DIRECTION_LIGHTS_COUNT > 0\nvec3 getDirectionLightDir(int index){\n    //workaround '[] : Index expression must be constant' error\n    for (int x = 0; x <= DIRECTION_LIGHTS_COUNT; x++) {\n        if(x == index){\n            return getDirectionLightDir(u_directionLights[x].direction);\n        }\n    }\n\n    /*!\n    solve error in window7 chrome/firefox:\n    not all control paths return a value.\n    failed to create d3d shaders\n    */\n    return vec3(0.0);\n}\n#endif\n\n\nvec3 getViewDir(){\n    return normalize(u_cameraPos - v_worldPosition);\n}\n"],"\n\n"),Re("webgl1_no_normal_map_vertex",Dp(["\n\n","\n\n"],"\nvarying vec3 v_normal;\n",["\n\n","\n\n"],"\nv_normal = normalize(normalMatrix * a_normal);\n"),Re("webgl1_no_shadow_map_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\nfloat getShadowVisibility() {\n        return 1.0;\n    }\n"],"\n\n"),Re("webgl1_no_specular_map_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\nfloat getSpecularStrength() {\n        return 1.0;\n    }\n"],"\n\n"),Re("webgl1_specular_map_fragment",Dp(["\n\n","\n\n"],"\nvarying vec2 v_specularMapTexCoord;\n",["\n\n","\nfloat getSpecularStrength() {\n        return texture2D(u_specularMapSampler, v_specularMapTexCoord).r;\n    }\n"],"\n\n"),Re("webgl1_specular_map_vertex",Dp(["\n\n","\n\n"],"\nvarying vec2 v_specularMapTexCoord;\n",["\n\n","\n\n"],"\nv_specularMapTexCoord = a_texCoord;\n"),Re("webgl1_ambientLight_fragment",Dp(["\n\n","\n\n"],"\nuniform vec3 u_ambient;\n",["\n\n","\n\n"],"\n\n"),Re("webgl1_frontLight_common_fragment",Dp(["\n\n","\n\n"],"\nvarying vec3 v_worldPosition;\n\n#if POINT_LIGHTS_COUNT > 0\nstruct PointLight {\n    vec3 position;\n    vec3 color;\n    float intensity;\n\n    float range;\n    float constant;\n    float linear;\n    float quadratic;\n};\nuniform PointLight u_pointLights[POINT_LIGHTS_COUNT];\n\n#endif\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\nstruct DirectionLight {\n    vec3 direction;\n\n    float intensity;\n\n    vec3 color;\n};\nuniform DirectionLight u_directionLights[DIRECTION_LIGHTS_COUNT];\n#endif\n",["\nvec3 getDirectionLightDir(vec3 lightDirection);\nvec3 getPointLightDirByLightPos(vec3 lightPos);\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition);\n","\nvec3 getDirectionLightDir(vec3 lightDirection){\n    lightDirection =  normalize(lightDirection);\n\n    return -lightDirection;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos){\n    return lightPos - v_worldPosition;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition){\n    return lightPos - worldPosition;\n}\n"],"\n\n"),Re("webgl1_frontLight_common_vertex",Dp(["\n\n","\n\n"],"\nvarying vec3 v_worldPosition;\n\n#if POINT_LIGHTS_COUNT > 0\nstruct PointLight {\n    vec3 position;\n    vec3 color;\n    float intensity;\n\n    float range;\n    float constant;\n    float linear;\n    float quadratic;\n};\nuniform PointLight u_pointLights[POINT_LIGHTS_COUNT];\n\n#endif\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\nstruct DirectionLight {\n    vec3 direction;\n\n    float intensity;\n\n    vec3 color;\n};\nuniform DirectionLight u_directionLights[DIRECTION_LIGHTS_COUNT];\n#endif\n",["\nvec3 getDirectionLightDir(vec3 lightDirection);\nvec3 getPointLightDirByLightPos(vec3 lightPos);\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition);\n","\nvec3 getDirectionLightDir(vec3 lightDirection){\n    lightDirection =  normalize(lightDirection);\n\n    return -lightDirection;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos){\n    return lightPos - v_worldPosition;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition){\n    return lightPos - worldPosition;\n}\n"],"\n\n"),Re("webgl1_frontLight_common",Dp(["\n\n","\n\n"],"\nvarying vec3 v_worldPosition;\n\n#if POINT_LIGHTS_COUNT > 0\nstruct PointLight {\n    vec3 position;\n    vec3 color;\n    float intensity;\n\n    float range;\n    float constant;\n    float linear;\n    float quadratic;\n};\nuniform PointLight u_pointLights[POINT_LIGHTS_COUNT];\n\n#endif\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\nstruct DirectionLight {\n    vec3 direction;\n\n    float intensity;\n\n    vec3 color;\n};\nuniform DirectionLight u_directionLights[DIRECTION_LIGHTS_COUNT];\n#endif\n",["\nvec3 getDirectionLightDir(vec3 lightDirection);\nvec3 getPointLightDirByLightPos(vec3 lightPos);\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition);\n","\nvec3 getDirectionLightDir(vec3 lightDirection){\n    lightDirection =  normalize(lightDirection);\n\n    return -lightDirection;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos){\n    return lightPos - v_worldPosition;\n}\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition){\n    return lightPos - worldPosition;\n}\n"],"\n\n"),Re("webgl1_frontLight_end_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = totalColor;\n"),Re("webgl1_frontLight_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\nfloat getBlinnShininess(float shininess, vec3 normal, vec3 lightDir, vec3 viewDir, float dotResultBetweenNormAndLight){\n        vec3 halfAngle = normalize(lightDir + viewDir);\n\n        float blinnTerm = dot(normal, halfAngle);\n\n        blinnTerm = clamp(blinnTerm, 0.0, 1.0);\n        blinnTerm = dotResultBetweenNormAndLight != 0.0 ? blinnTerm : 0.0;\n        blinnTerm = pow(blinnTerm, shininess);\n\n        return blinnTerm;\n}\n\n// float getPhongShininess(float shininess, vec3 normal, vec3 lightDir, vec3 viewDir, float dotResultBetweenNormAndLight){\n//         vec3 reflectDir = reflect(-lightDir, normal);\n//         float phongTerm = dot(viewDir, reflectDir);\n\n//         phongTerm = clamp(phongTerm, 0.0, 1.0);\n//         phongTerm = dotResultBetweenNormAndLight != 0.0 ? phongTerm : 0.0;\n//         phongTerm = pow(phongTerm, shininess);\n\n//         return phongTerm;\n// }\n\nvec3 calcAmbientColor(vec3 materialDiffuse){\n        vec3 materialLight = getMaterialLight();\n\n        return (u_ambient + materialLight) * materialDiffuse;\n}\n\nvec3 calcLight(vec3 lightDir, vec3 color, float intensity, float attenuation, vec3 normal, vec3 viewDir, vec3 materialDiffuse)\n{\n        vec3 materialSpecular = u_specular;\n        vec3 materialEmission = getMaterialEmission();\n\n        float specularStrength = getSpecularStrength();\n\n        float dotResultBetweenNormAndLight = dot(normal, lightDir);\n        float diff = max(dotResultBetweenNormAndLight, 0.0);\n\n        vec3 emissionColor = materialEmission;\n\n        vec3 ambientColor = calcAmbientColor(materialDiffuse);\n\n\n        // if(u_lightModel == 3){\n        //     return emissionColor + ambientColor;\n        // }\n\n        vec3 diffuseColor = color * materialDiffuse.rgb * diff * intensity;\n\n        float spec = 0.0;\n\n        // if(u_lightModel == 2){\n        //         spec = getPhongShininess(u_shininess, normal, lightDir, viewDir, diff);\n        // }\n        // else if(u_lightModel == 1){\n        //         spec = getBlinnShininess(u_shininess, normal, lightDir, viewDir, diff);\n        // }\n\n        spec = getBlinnShininess(u_shininess, normal, lightDir, viewDir, diff);\n\n\n        vec3 specularColor = spec * materialSpecular * specularStrength * intensity;\n\n       return vec3(emissionColor + ambientColor + attenuation * (diffuseColor.rgb + specularColor));\n}\n\n\n\n\n#if POINT_LIGHTS_COUNT > 0\n        vec3 calcPointLight(vec3 lightDir, PointLight light, vec3 normal, vec3 viewDir, vec3 materialDiffuse)\n{\n        //lightDir is not normalize computing distance\n        float distance = length(lightDir);\n\n        float attenuation = 0.0;\n\n        if(distance < light.range)\n        {\n            attenuation = 1.0 / (light.constant + light.linear * distance + light.quadratic * (distance * distance));\n        }\n\n        lightDir = normalize(lightDir);\n\n        return calcLight(lightDir, light.color, light.intensity, attenuation, normal, viewDir, materialDiffuse);\n}\n#endif\n\n\n\n#if DIRECTION_LIGHTS_COUNT > 0\n        vec3 calcDirectionLight(vec3 lightDir, DirectionLight light, vec3 normal, vec3 viewDir, vec3 materialDiffuse)\n{\n        float attenuation = 1.0;\n\n        // lightDir = normalize(lightDir);\n\n        return calcLight(lightDir, light.color, light.intensity, attenuation, normal, viewDir, materialDiffuse);\n}\n#endif\n\n\n\nvec4 calcTotalLight(vec3 norm, vec3 viewDir){\n    vec3 totalLight = vec3(0.0, 0.0, 0.0);\n\n    vec4 materialDiffuse = getMaterialDiffuse();\n\n    float alpha = materialDiffuse.a;\n    vec3 materialDiffuseRGB = materialDiffuse.rgb;\n\n\n    #if (DIRECTION_LIGHTS_COUNT == 0 && POINT_LIGHTS_COUNT == 0 )\n        return vec4(calcAmbientColor(materialDiffuseRGB), alpha);\n    #endif\n\n\n    #if POINT_LIGHTS_COUNT > 0\n                for(int i = 0; i < POINT_LIGHTS_COUNT; i++){\n                totalLight += calcPointLight(getPointLightDir(i), u_pointLights[i], norm, viewDir, materialDiffuseRGB);\n        }\n    #endif\n\n    #if DIRECTION_LIGHTS_COUNT > 0\n                for(int i = 0; i < DIRECTION_LIGHTS_COUNT; i++){\n                totalLight += calcDirectionLight(getDirectionLightDir(i), u_directionLights[i], norm, viewDir, materialDiffuseRGB);\n        }\n    #endif\n\n        return vec4(totalLight, alpha);\n}\n"],"\nvec3 normal = normalize(getNormal());\n\n// #ifdef BOTH_SIdE\n// normal = normal * (-1.0 + 2.0 * float(gl_FrontFacing));\n// #endif\n\nvec3 viewDir = normalize(getViewDir());\n\nvec4 totalColor = calcTotalLight(normal, viewDir);\n\n// totalColor.a *= u_opacity;\n\ntotalColor.rgb = totalColor.rgb * getShadowVisibility();\n"),Re("webgl1_frontLight_setWorldPosition_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nv_worldPosition = vec3(mMatrix * vec4(a_position, 1.0));\n"),Re("webgl1_frontLight_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * vec4(v_worldPosition, 1.0);\n"),Re("webgl1_outline_expand_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = vec4(u_outlineColor, 1.0);\n"),Re("webgl1_outline_expand_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\nvec3 position = a_position.xyz + a_normal.xyz * 0.08;\n\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(position, 1.0);\n"),Re("webgl1_outline_origin_fragment",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_FragColor = vec4(1.0);\n"),Re("webgl1_outline_origin_vertex",Dp(["\n\n","\n\n"],"\n\n",["\n\n","\n\n"],"\ngl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\n"),ke(0)))))))))))))))))))))))))))))))))))))))))))))],[void 0,void 0,void 0,Hi(0),Hi(0),Hi(0)],void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[void 0,void 0,void 0],[Hi(0),Hi(0)],[Hi(0),Hi(0),Hi(0),Hi(0),Hi(0),[],[],[]],[new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),new Float32Array([1,0,0,1,0,0,1,0,0])],void 0,void 0,ju(0),[{label:lv,image:vv,button:pv,box:dv,radioButton:_v,checkbox:gv,sliderInt:yv,sliderFloat:mv,beginGroup:wv,endGroup:Ev,getCustomDataInRenderWorker:ev,setCustomDataInRenderWorker:iv,getCustomDataFromMainWorkerToRenderWorker:cv,getCustomDataFromRenderWorkerToMainWorker:ov,setCustomDataFromRenderWorkerToMainWorker:uv}],[-1,-1,-1],[[[1,1,1],[]]]]),0}On(Rt(function(n){return Pt((vg(),Ri(JSON.parse(n.data.pipelineJobs),JSON.parse(n.data.jobs),[sg,hg],ki)))},Qt(function(n){return"SEND_JOB_DATA"===n.data.operateType},Tn("message",e.a(_e,0))))),r.d(t,"useThisToImportRenderWorkerSystem",function(){return dg}),r.d(t,"defineOnError",function(){return pg});var pg=function(n){onerror=((n,t,r)=>{lg(n,t,r)})};e.a(pg,0);var dg=lg}])});